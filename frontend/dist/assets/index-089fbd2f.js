import{r as m,j as e}from"./react-bb1a8b08.js";import{c as Ne}from"./react-dom-b05b0288.js";import{L as M,u as be,B as ve}from"./react-router-dom-bd488c8a.js";import{F as we,a as ke,b as se,B as _,I as Se,A as Ce,c as Pe,C as Ge,d as ae,e as W,f as X,g as Z,h as re,i as Oe,j as Te,G as Ee,k as Ie}from"./react-icons-ef56d0db.js";import{R as Y,a as T,b as D,c as ne,d as $e}from"./recoil-7bf270a0.js";import{Q as g,k as Ae}from"./react-toastify-ca6d5611.js";import{S as V}from"./react-split-394c0406.js";import{G as Le,E as Je}from"./@codemirror-4e45e905.js";import{R as _e,v as Me}from"./@uiw-0006cca6.js";import{a as E,d as Re,e as J}from"./react-router-c4336f7a.js";import{m as O}from"./framer-motion-ca35d016.js";import{l as R}from"./socket.io-client-5e3fa801.js";import{C as ze}from"./react-confetti-4487dd03.js";import{l as le}from"./lodash-8f34d9d6.js";import{Y as Fe}from"./react-youtube-4df3b629.js";import"./fast-deep-equal-ca765bc5.js";import"./scheduler-765c72db.js";import"./@remix-run-e5357272.js";import"./clsx-1229b3e0.js";import"./prop-types-e0d21109.js";import"./split.js-822f4990.js";import"./@lezer-b3acbd76.js";import"./crelt-7bb88e1d.js";import"./style-mod-ae491175.js";import"./w3c-keyname-9fb136d3.js";import"./@babel-df62547b.js";import"./engine.io-client-b8dcd8ee.js";import"./engine.io-parser-a5b7cb40.js";import"./@socket.io-3e1df240.js";import"./socket.io-parser-44417fca.js";import"./youtube-player-63f3f564.js";import"./sister-57707ffb.js";import"./load-script-d550e3b0.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const k="",Be=":3001",ie=`${k}/api/1.0/problems/`,He=`${k}/api/1.0/problems/details`,De=`${k}/api/1.0/workspace/run`,Ue=`${k}/api/1.0/workspace/submit`,We=`${k}/api/1.0/user/signin`,Ye=`${k}/api/1.0/user/signup`,Ve=`${k}/api/1.0/contest/hostCheckGame`,Ke=`${k}/api/1.0/contest/hostCreateGame`,qe=`${k}/api/1.0/contest/hostTerminateGame`,Qe=`${k}/api/1.0/contest/hostStartGame`,Xe=`${k}/api/1.0/contest/hostGetPlayersCode`,ee=`${k}/api/1.0/contest/hostSendMessage`,Ze=`${k}/api/1.0/contest/hostCloseGame`,et=`${k}/api/1.0/contest/hostGetHistory`,tt=`${k}/api/1.0/contest/hostClearHistory`,st=`${k}/api/1.0/contest/playerJoinGame`,at=`${k}/api/1.0/contest/playerCheckGame`,A="https://api.dicebear.com/6.x/avataaars/svg?size=64",rt=`${k}/api/1.0/contest/playerExitGame`,nt=`${k}/api/1.0/contest/playerSubmit`,oe=`${k}/api/1.0/contest/getPlayers`,K=`${k}/api/1.0/contest/getProblems`,ce=`${k}/api/1.0/contest/getPlayersProgress`,de=`${k}/api/1.0/contest/getTimeLimit`,lt=`${k}/api/1.0/contest/getGameResult`,z=Be,it=()=>{const[t,a]=m.useState(!1),[s,l]=m.useState(0),r=n=>{const i=Math.floor(n/3600),d=Math.floor(n%3600/60),p=n%60;return`${i<10?"0"+i:i}:${d<10?"0"+d:d}:${p<10?"0"+p:p}`};return m.useEffect(()=>{let n;return t&&(n=setInterval(()=>{l(i=>i+1)},1e3)),()=>clearInterval(n)},[t]),e.jsx("div",{children:t?e.jsxs("div",{className:"flex items-center space-x-2 bg-dark-fill-3 p-1.5 cursor-pointer rounded hover:bg-dark-fill-2",children:[e.jsx("div",{children:r(s)}),e.jsx(we,{onClick:()=>{a(!1),l(0)}})]}):e.jsx("div",{className:"flex items-center p-1 h-8 hover:bg-dark-fill-3 rounded cursor-pointer",onClick:()=>a(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})})})})},$=Y({key:"authModalState",default:{isOpen:!1,type:"login",isLogin:!1}}),me=Y({key:"bulletSwitchState",default:!0}),F=Y({key:"loadingState",default:!0}),B=({isWorkspace:t=!1})=>{const a=()=>{localStorage.removeItem("userData"),l(n=>({...n,isLogin:!1})),g.success("Sign Out Successfully ")},[s,l]=T($),r=()=>{l(n=>({...n,isOpen:!0,type:"login"}))};return m.useEffect(()=>{const n=localStorage.getItem("userData");n?JSON.parse(n).access_expired>new Date().getTime()/1e3?l(d=>({...d,isLogin:!0})):(localStorage.removeItem("userData"),l(d=>({...d,isLogin:!1}))):l(i=>({...i,isLogin:!1}))},[]),e.jsx("nav",{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",children:e.jsxs("div",{className:`flex w-full items-center justify-between ${t?"":"max-w-[1200px] mx-auto"}`,children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(M,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[t&&e.jsx(it,{}),s.isLogin?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" relative flex items-center text-2xl py-1 cursor-pointer",onClick:()=>l(n=>({...n,isOpen:!0,type:"profile"})),children:e.jsx(ke,{})}),e.jsx("button",{className:"bg-dark-fill-3 py-1.5 px-3 cursor-pointer rounded text-brand-orange hover:bg-dark-fill-2 transition-all",onClick:a,children:e.jsx(se,{})})]}):e.jsx("button",{className:" bg-dark-fill-3 py-1 px-2 cursor-pointer rounded",onClick:r,children:"Sign In"})]})]})})},ot=({handleRun:t,handleSubmit:a,splitRatio:s,pending:l,setSplitRatio:r})=>e.jsx("div",{className:"flex bg-dark-layer-1 absolute bottom-0 z-10 w-full",children:e.jsxs("div",{className:"mx-5 my-[10px] flex justify-between w-full",children:[e.jsx("div",{className:"mr-2 flex flex-1 flex-nowrap items-center space-x-4",children:l?e.jsx("div",{className:"px-3 py-1.5 font-medium text-dark-label-2 items-center transition-all inline-flex text-sm",children:"Pending..."}):e.jsxs("button",{className:"px-3 py-1.5 font-medium items-center transition-all inline-flex bg-dark-fill-3 text-sm hover:bg-dark-fill-2 text-dark-label-2 rounded-lg pl-3 pr-2",onClick:()=>{r(n=>n>90?50:100)},children:["Console",e.jsx("div",{className:`ml-1 transform transition duration-200 ease-in-out flex items-center ${s>90?"rotate-0":"rotate-180"}`,children:e.jsx(_,{className:"fill-gray-6 mx-1 fill-dark-gray-6"})})]})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx("button",{className:`px-3 py-1.5 text-sm font-medium items-center whitespace-nowrap transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 text-dark-label-2 rounded-lg 
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:t,disabled:l,children:"Run"}),e.jsx("button",{className:`px-3 py-1.5 font-medium items-center transition-all focus:outline-none inline-flex text-sm text-white bg-dark-green-s hover:bg-green-3 rounded-lg
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:a,disabled:l,children:"Submit"})]})]})}),I=({value:t,label:a})=>{const s=t===void 0?"undefined":typeof t=="string"?t:JSON.stringify(t);return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-4 text-white",children:[a," ="]}),e.jsx("div",{className:"w-full cursor-text rounded-lg px-3 py-[8px] bg-dark-fill-3 text-white mt-2 min-h-[40px]",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:s})})]})},ct=({problem:t,showTestcases:a})=>{const[s,l]=m.useState(0);return e.jsxs("div",{className:`${a?"block":"hidden"} py-3`,children:[e.jsx("div",{className:"flex",children:t.exampleCases.map((r,n)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>l(n),children:e.jsx("div",{className:"flex flex-wrap items-center",children:e.jsxs("div",{className:`items-center text-sm font-semibold transition-all focus:outline-none inline-flex  hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${s===n?"text-white bg-dark-fill-3":"text-gray-400"}
                `,children:["Case ",n+1]})})},n))}),e.jsx("div",{className:"mt-4",children:t.exampleCases.map((r,n)=>e.jsx("div",{className:`${n===s?"block":"hidden"}`,children:e.jsx("div",{className:"mt-4",children:t.inputKeys.map((i,d)=>{var p;return e.jsx(I,{label:i,value:(p=t.exampleCases[s])==null?void 0:p.input[d]},d)})})},n))})]})},dt=({problem:t,pending:a,showTestcases:s,runResults:l,execError:r,submitResult:n})=>{var x;const[i,d]=m.useState(0),[p,o]=m.useState(!0);return m.useEffect(()=>{o(!0),l==null||l.forEach(h=>{h.passed||o(!1)})},[l]),e.jsxs("div",{className:`${s?"hidden":"block"} py-4`,children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-dark-pink font-semibold text-xl ml-1",children:r.name}),e.jsx("div",{className:"w-full cursor-text rounded-lg border px-3 py-[8px] bg-dark-fill-3 border-transparent text-dark-pink bg-dark-pink bg-opacity-[15%] mt-3",children:e.jsxs("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:[r.line&&`Line ${r.line}
`,r.message]})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:p?e.jsx("span",{className:"text-dark-green-s",children:"Accepted"}):e.jsx("span",{className:"text-dark-pink",children:"Wrong Answer"})}),e.jsx("div",{className:"flex mt-1",children:t.exampleCases.map((h,f)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>d(f),children:e.jsx("div",{className:"flex flex-wrap items-center gap-y-4",children:e.jsxs("div",{className:`items-center transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${i===f?"text-white":"text-gray-500"}
                `,children:[e.jsx("div",{className:`w-1 h-1 rounded-full mr-2 ${l[f].passed?" bg-dark-green-s":"bg-dark-pink"}`}),"Case ",f+1]})})},f))}),t.exampleCases.map((h,f)=>e.jsxs("div",{className:`${f===i?"block":"hidden"}`,children:[e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Stdin",value:h.input.map(v=>JSON.stringify(v)).join(", ")})}),e.jsx("div",{className:`mt-4 ${l[i].stdout.length>0?"block":"hidden"}`,children:e.jsx(I,{label:"Stdout",value:l[i].stdout.map(v=>typeof v=="string"?v:JSON.stringify(v)).join(`
`)})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Output",value:l[i].output})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Expected",value:l[i].expected})})]},f))]}),n&&n.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-green-s",children:"Passed"})}),e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:"All the test cases are passed"})]}),n&&!n.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-pink",children:"Failed"})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Input",value:(x=n.input)==null?void 0:x.map(h=>JSON.stringify(h)).join(", ")})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Output",value:n.output})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Expected",value:n.expected})})]})]}),!(l||r||n)&&e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:a?"Pending...":"You need to run you code first"})]})},q=({userCode:t,onChangeCode:a,readOnly:s=!1,textLarge:l=!1})=>e.jsx("div",{className:"w-full overflow-y-auto h-full flex flex-col",children:e.jsx(_e,{className:`codeMirror ${l?"text-[16px]":"text-[14px]"}`,value:t,onChange:r=>a&&a(r),theme:Me,extensions:[Le(),Je.lineWrapping],basicSetup:{autocompletion:!1,highlightActiveLine:!s,foldGutter:!s,highlightActiveLineGutter:!s},editable:!s,readOnly:s})}),xe=({problem:t,gameMode:a=!1,gameData:s=void 0})=>{const[l,r]=m.useState(!1),[n,i]=m.useState(""),[d,p]=m.useState(!0),[o,x]=m.useState(),[h,f]=m.useState(),[v,w]=m.useState(),[P,N]=m.useState(50),[y,c]=m.useState(!1),u=()=>{l?(document.exitFullscreen(),r(!1)):(document.documentElement.requestFullscreen(),r(!0))},j=()=>{c(!0),w(void 0),x(void 0),f(void 0)},b=()=>{p(!1),c(!1)},S=()=>{if(n.length>1e4)return g.error("Codes should be less than 10000 characters");j(),fetch(De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:t.id||0,language:"js",code:n})}).then(C=>C.json()).then(C=>{if(C.errors)throw new Error(C.errors);C.type==="error"?w(C.data):x(C.data)}).catch(C=>{g.error(C.message||"run failed")}).finally(()=>{b()})},L=()=>{if(n.length>1e4)return g.error("Codes should be less than 10000 characters");j(),fetch(a?nt:Ue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a?{problemId:t.id||0,language:"js",code:n,playerId:s==null?void 0:s.player.id,gameId:s==null?void 0:s.player.gameId,progress:s==null?void 0:s.myProgress.progress,finishedAt:s==null?void 0:s.myProgress.finishedAt}:{problemId:t.id||0,language:"js",code:n})}).then(G=>G.json()).then(G=>{if(G.errors)throw new Error(G.errors);if(G.type==="error")w(G.data);else if(f(G.data),G.data.passed){g.success("Passed !");const Q=JSON.parse(localStorage.getItem("problemStatus")||"{}");Q[t.id]=!0,localStorage.setItem("problemStatus",JSON.stringify(Q)),a&&(s==null||s.setMyProgress({id:s.myProgress.id,name:s.myProgress.name,progress:G.progress,finishedAt:G.finishedAt}))}}).catch(G=>{g.error(G.message||"run failed")}).finally(()=>{b()})},je=C=>{t&&(localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,C),a&&(s==null||s.updateCode(s.player.gameId,s.player.id,s.player.name,t.id,t.title,C))),i(C)},ye=()=>{if(t){const C=t.boilerplate.replace(/\n\s+/g,`
`);i(C),localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,C)}};return m.useEffect(()=>{if(t){const C=localStorage.getItem(`code?problem_id=${t.id}&${a&&"gameMode"}`);i(C!==null?C:t.boilerplate.replace(/\n\s+/g,`
`))}},[t]),e.jsx("div",{className:"w-full overflow-auto flex flex-col",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-layer-2 h-10 w-full",children:[e.jsx("div",{className:"flex items-center text-white",children:e.jsx("button",{className:"flex cursor-pointer items-center rounded-lg bg-dark-fill-3 text-dark-label-2 px-2 py-1 hover:bg-dark-fill-2",children:"JavaScript"})}),e.jsxs("div",{className:"flex items-center m-2",children:[e.jsx("button",{className:"editor-nav-btn group",onClick:ye,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:e.jsx(Se,{})})}),e.jsx("button",{className:"editor-nav-btn group",onClick:u,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:l?e.jsx(Pe,{}):e.jsx(Ce,{})})})]})]}),e.jsxs("div",{className:" bg-dark-layer-1 h-full relative",children:[e.jsx("div",{className:"flex flex-col h-[calc(100vh-140px)]",children:e.jsxs(V,{direction:"vertical",minSize:0,snapOffset:60,sizes:[P,100-P],className:"h-full",onDragEnd:C=>{N(C[0])},children:[e.jsx(q,{userCode:n,onChangeCode:je}),e.jsxs("div",{className:"w-full px-5 overflow-auto relative",children:[e.jsxs("div",{className:"flex h-11 sticky top-0 bg-dark-layer-1 z-10",children:[e.jsx("div",{className:`flex h-full items-center text-white mx-2 border-b-2 cursor-pointer ${d?"border-white":"border-transparent"}`,onClick:()=>p(!0),children:"Testcases"}),e.jsx("div",{className:`flex h-full  items-center text-white mx-2 border-b-2 cursor-pointer ${d?"border-transparent":"border-white"}`,onClick:()=>p(!1),children:"Result"})]}),e.jsx(ct,{problem:t,showTestcases:d}),e.jsx(dt,{problem:t,pending:y,runResults:o,showTestcases:d,execError:v,submitResult:h})]})]})}),e.jsx(ot,{handleRun:S,handleSubmit:L,splitRatio:P,setSplitRatio:N,pending:y})]})]})})},he=({problem:t})=>e.jsx("div",{className:"flex px-0 py-4 h-[calc(100vh-88px)] overflow-y-auto",children:e.jsx("div",{className:"px-5",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsxs("div",{className:"flex-1 mr-2 text-lg font-semibold text-white",children:[t.id,". ",t.title]})}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsx("div",{className:`${t.difficulty==="Hard"?"bg-dark-pink text-dark-pink":t.difficulty==="Medium"?"bg-dark-yellow text-dark-yellow":"bg-dark-green-s text-dark-green-s"} inline-block rounded-[21px] bg-opacity-[.20] px-2.5 py-1 text-xs font-semibold`,children:t.difficulty})}),e.jsx("div",{className:"text-white text-md description mt-5",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6",children:t.exampleCases.map((a,s)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Example ",s+1,": "]}),e.jsxs("div",{className:"example-card",children:[a.image&&e.jsx("img",{src:`problemsImgs/${a.image}`,className:"mt-2 w-full max-w-[450px]"}),e.jsxs("pre",{className:"text-sm",children:[e.jsx("strong",{className:"text-white",children:"Input: "}),t.inputKeys.map((l,r)=>e.jsxs("span",{className:"mr-4",children:[l," = ",JSON.stringify(a.input[r])]},r)),e.jsx("br",{}),e.jsx("strong",{children:"Output: "}),JSON.stringify(a.output)," ",e.jsx("br",{}),a.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Explanation: "}),a.explanation]})]})]})]},s))}),e.jsxs("div",{className:"my-8 pb-4",children:[e.jsx("div",{className:"text-white text-md font-semibold",children:"Constraints:"}),t.constraints.map((a,s)=>e.jsx("ul",{className:"text-white ml-5 list-disc mt-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},s))]})]})})}),mt=({problem:t})=>e.jsx("div",{className:"bg-dark-layer-1",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-hidden",children:e.jsx("div",{className:"bg-dark-layer-1 rounded-t-[5px] px-5 py-[7px] text-sm cursor-pointer",children:"Description"})}),e.jsx(he,{problem:t})]})}),xt=()=>{const t=E(),[a]=be(),[s,l]=m.useState(),[r,n]=T(F),i=a.get("id")||0;return m.useEffect(()=>{n(!0),fetch(`${He}?id=${i}`).then(async d=>d.status!==200?d.json().then(p=>{throw p}):d.json()).then(d=>{l(d),n(!1)}).catch(d=>{console.error(d),g.error("Problem not found"),t("/")})},[i]),e.jsxs(e.Fragment,{children:[e.jsx(B,{isWorkspace:!0}),!r&&s&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs(V,{minSize:0,snapOffset:100,className:"split",children:[e.jsx(mt,{problem:s}),e.jsx(xe,{problem:s})]})})]})},ht=({setGameId:t,setCurrentState:a})=>{const s=D($),[l,r]=m.useState([]),[n,i]=m.useState([]),[d,p]=m.useState(60),[o,x]=T(F),h=E();m.useEffect(()=>{x(!0),fetch(ie,{method:"GET"}).then(N=>N.json()).then(N=>{r(N)}).finally(()=>{x(!1)})},[]);const f=()=>{n.length>=5?g.error("At most 5 questions!"):i(N=>[...N,0])},v=(N,y)=>{i(c=>{const u=[...c];return u[y]=N,u})},w=N=>{i(y=>{const c=[...y];return c.splice(N,1),c})},P=()=>{if(n.length===0)return g.error("No question is selected");if(new Set(n).size!==n.length)return g.error("Questions should not repeat");if(d>300)return g.error("Time limit should not exceed 300 mins");if(d<3)return g.error("Time limit should be more than 3 mins");const N=localStorage.getItem("userData");if(!N)return s(c=>({...c,isLogin:!1})),g.error("Please Log In");const y=JSON.parse(N).access_token;fetch(`${Ke}`,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({timeLimit:d,problemList:n.map(c=>l[c].id)})}).then(c=>{c.status===401||c.status===403?(g.error("Login timeout"),localStorage.removeItem("userData"),s(u=>({...u,isLogin:!1})),a("GameCreating")):c.status!==200?c.json().then(u=>{console.error(u),g.error(u.errors||"Create game failed"),h("/")}):c.json().then(u=>{t(u.gameId),a("PlayersJoining")})})};return e.jsx(e.Fragment,{children:!o&&e.jsxs(O.div,{className:"w-11/12 md:w-9/12 mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Create Game"}),e.jsx("h1",{className:"text-xl mt-6 ml-1",children:"Questions"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Id"}),e.jsx("th",{className:"px-3 py-3 w-[35%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%]"})]})}),e.jsx("tbody",{children:n.map((N,y)=>{const c=l[N],u=c.difficulty==="Easy"?"text-dark-green-s":c.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${y%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("div",{className:"mr-2",children:y+1})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("select",{className:" bg-dark-fill-2 outline-none py-1.5 px-2 rounded-lg text-dark-gray-8 font-medium",onChange:j=>{v(Number(j.target.value),y)},children:l.map((j,b)=>e.jsx("option",{value:b,children:j.title},b))})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:c.tags.map(j=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:j.title},j.id))})}),e.jsx("td",{className:`px-3 py-4 ${u}`,children:c.difficulty}),e.jsx("td",{children:e.jsx("button",{className:"mx-auto flex items-center text-3xl cursor-pointer rounded hover:text-dark-pink transition-all",onClick:()=>w(y),children:e.jsx(Ge,{})})})]},y)})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"mt-5 py-1 px-3 cursor-pointer rounded  font-medium bg-dark-gray-8 hover:bg-dark-gray-7 transition-all text-dark-layer-2",onClick:f,children:"Add Question"})})]}),e.jsxs("div",{className:" mt-5",children:[e.jsx("h1",{className:"text-xl mt-10 ml-1",children:"Time Limits"}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsx("input",{type:"text",value:d,onChange:N=>p(Math.abs(Math.floor(Number(N.target.value)))||0),className:" bg-dark-fill-2 px-3 py-1.5 w-16 outline-none rounded-lg"}),e.jsx("div",{className:"ml-2 text-lg",children:"Minutes"})]})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("button",{onClick:P,className:"bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Create Game"})})]})})},ue=({players:t})=>{const a=[4,3,5,10,1,2,11,8,0,9,6,7];return e.jsx("div",{className:"flex flex-wrap w-[760px] mx-auto justify-left",children:a.map((s,l)=>{var n;const r=t[s];return e.jsx("div",{className:` -mb-[28px] h-[120px] w-[120px] mx-[32px] bg-dark-fill-3 rotate-45 flex justify-center items-center rounded-md
              ${(l===0||l===7)&&" ml-[124px]"}
              ${l===10&&" ml-[215px]"}
              ${r&&"bg-green-200 bg-opacity-40"}
               transition-all duration-300`,children:e.jsx("div",{className:`-rotate-45 ${!r&&"opacity-0"} transition-all duration-300`,children:r&&e.jsxs(e.Fragment,{children:[e.jsx("img",{alt:"image",src:`${A}&seed=${(n=t[s])==null?void 0:n.name}`,className:"h-20 mb-[34px]"}),e.jsx("div",{className:`absolute left-[50%] -translate-x-[50%] bottom-[3px] text-white w-20 break-all text-center max-h-8 overflow-hidden leading-4
             ${r.name.length>10?"text-sm":"font-medium text-md"}`,children:r.name})]})})},l)})})},ut=({gameId:t})=>{const a=m.useRef(R(z)).current,[s,l]=m.useState([]);return m.useEffect(()=>{if(t)return fetch(oe,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(r=>r.json()).then(r=>{l(r.players)}),a.emit("ws-host-joinGame",{gameId:t}),a.on("ws-host-playerJoinGame",function(r){l(n=>[...n,{id:r.id,name:r.name,gameId:t}])}),a.on("ws-host-playerExitGame",function(r){l(n=>n.filter(i=>i.id!=r.id))}),()=>{a.off("ws-host-playerExitGame"),a.off("ws-host-playerJoinGame")}},[t,a]),e.jsxs(O.div,{className:"text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"mt-14",children:[e.jsxs("h1",{className:"text-4xl text-center",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7 mt-6",children:"Waiting For Players To Join..."})]}),e.jsx("div",{className:" mt-16",children:e.jsx(ue,{players:s})})]})},pt=({gameId:t,playersCode:a,focusedPlayerId:s,playersProgress:l,setFocusedPlayerId:r})=>{var f;const[n,i]=m.useState(""),d=a.find(v=>v.id===s),[p,o]=m.useState((d==null?void 0:d.lastModifyedProblem)||0),x=(f=l.find(v=>v.id===(d==null?void 0:d.id)))==null?void 0:f.progress,h=v=>{if(v.preventDefault(),i(w=>w.trim()),n!==""){if(n.length>30)return g.error("Message cannot be longer than 30 characters");i(""),v.nativeEvent.submitter.name==="sendMessage"&&d?fetch(ee,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:d.id,message:n})}):v.nativeEvent.submitter.name==="sendGroupMessage"&&fetch(ee,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:-1,message:n})})}};return e.jsx("div",{className:"text-gray-50 flex gap-[12px] px-[10px] mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto relative",children:d&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full  shrink rounded-lg overflow-hidden bg-dark-layer-1",children:e.jsx(q,{userCode:d.problems[p].code,readOnly:!0,textLarge:!0})}),e.jsxs("div",{className:"flex flex-col w-[300px] shrink-0 text-white bg-dark-layer-2",children:[e.jsxs("div",{className:"w-full overflow-auto flex flex-col",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-b-[1px] border-dark-fill-2",children:"Problems"}),e.jsx("div",{className:"overflow-y-auto",children:d.problems.map((v,w)=>e.jsxs("div",{className:`flex items-center px-4 py-[7px] text-sm  cursor-pointer w-full h-14 hover:bg-dark-fill-3 ${w===p?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>o(w),children:[e.jsxs("span",{children:[w+1,". ",v.title]}),x&&x.map((P,N)=>e.jsx("span",{className:`text-dark-green-s ml-auto text-[18px] ${P.id===v.id&&P.passed?"block":"hidden"}`,children:e.jsx(ae,{})},N))]},w))})]}),e.jsxs("div",{className:"mt-auto h-40",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-t-[1px] border-dark-fill-2",children:"Send Message"}),e.jsxs("form",{onSubmit:h,children:[e.jsx("div",{className:"px-2",children:e.jsx("input",{value:n,onChange:v=>i(v.target.value),className:" w-full bg-dark-fill-2 rounded-lg outline-none text-lg px-3 py-2 resize-none"})}),e.jsxs("div",{className:"flex px-3 mt-3",children:[e.jsx("button",{type:"submit",name:"sendMessage",className:" px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-green-s hover:bg-opacity-80 rounded-lg",children:"Send"}),e.jsx("button",{type:"submit",name:"sendGroupMessage",className:"ml-auto px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-gray-6 hover:bg-opacity-80 rounded-lg",children:"Send Group"})]})]})]})]}),e.jsx("div",{className:" absolute text-[24px] rounded-full border-[1.5px] border-white p-1 left-1/2 -translate-x-1/2 top-[30px] opacity-30 hover:opacity-90 transition-all cursor-pointer",onClick:()=>r(void 0),children:e.jsx(W,{})})]})})},ft=({gameId:t})=>{const[a,s]=m.useState([]),[l,r]=m.useState([]),[n,i]=m.useState([]),[d,p]=m.useState(!0),[o]=m.useState(()=>R(z)),[x,h]=m.useState(void 0),f=D(F),v=D($),w=E(),P=()=>{s(N=>(N.sort((y,c)=>{const u=y.progress.reduce((b,S)=>S.passed?b+1:b,0),j=c.progress.reduce((b,S)=>S.passed?b+1:b,0);return u>j?-1:u<j?1:y.finishedAt&&c.finishedAt?new Date(y.finishedAt).getTime()-new Date(c.finishedAt).getTime():0}),[...N]))};return m.useEffect(()=>{fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(N=>N.json()).then(N=>{r(N.problems)}),o.emit("ws-host-joinGame",{gameId:t})},[o]),m.useEffect(()=>{if(l.length>0){f(!0),fetch(ce,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(c=>c.json()).then(c=>{s(c.progress.map(u=>({id:u.id,name:u.name,finishedAt:u.finishedAt,progress:u.progress?JSON.parse(u.progress):l.map(j=>({id:j.id,passed:!1}))}))),P()}).finally(()=>{f(!1)});const N=localStorage.getItem("userData");if(!N){v(c=>({...c,isLogin:!1})),w("/"),g.error("Login Timeout");return}const y=JSON.parse(N).access_token;f(!0),fetch(Xe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${y}`}}).then(async c=>c.status===401||c.status===403?(g.error("Login timeout"),localStorage.removeItem("userData"),v(u=>({...u,isLogin:!1})),w("/"),c.json().then(u=>{throw u})):c.json()).then(c=>{i(c.playersCode.map(u=>({id:u.id,name:u.name,problems:l.map(j=>{const b=u.problems.findIndex(S=>S.id===j.id);return b===-1?{id:j.id,title:j.title,code:j.boilerplate.replace(/\n\s+/g,`
`)}:{...u.problems[b]}})})))}).catch(c=>{console.error(c)}).finally(()=>{f(!1)}),o.on("ws-host-updateProgress",function({playerId:c,progress:u,finishedAt:j}){s(b=>(b.forEach(S=>{S.id===c&&(S.progress=u,S.finishedAt=j)}),[...b])),P()}),o.on("ws-host-playerExitGame",function(c){s(u=>u.filter(j=>j.id!=c.id)),i(u=>u.filter(j=>j.id!=c.id))}),o.on("ws-host-playerJoinGame",function(c){s(u=>[...u,{id:c.id,name:c.name,finishedAt:null,progress:l.map(j=>({id:j.id,passed:!1}))}]),i(u=>(u.push({id:c.id,name:c.name,problems:l.map(j=>({id:j.id,title:j.title,code:j.boilerplate.replace(/\n\s+/g,`
`)}))}),[...u]))}),o.on("ws-host-playerUpdateCode",function(c){i(u=>{const j=u.findIndex(b=>b.id===c.id);if(j!==-1){const b=u[j].problems.findIndex(S=>S.id===c.problemId);b!==-1&&(u[j].problems[b].code=c.code,u[j].lastModifyedProblem=b)}return[...u]})})}return()=>{o.off("ws-host-updateProgress"),o.off("ws-host-playerJoinGame"),o.off("ws-host-playerExitGame"),o.off("ws-host-playerUpdateCode")}},[l,o]),e.jsx(e.Fragment,{children:e.jsxs(O.div,{className:"flex relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${d?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>p(!0),children:e.jsx(_,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8 shrink-0 bg-dark-layer-1 mt-[8px] h-[calc(100vh-64px)] rounded-lg transition-all duration-450
        ${d?"translate-x-0 w-[300px] ml-[8px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:"h-[64px] flex items-center border-b-[1px] border-dark-fill-2 px-3 relative",children:[e.jsxs("h1",{className:"text-xl",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("div",{className:`ml-1 transform transition-all duration-500 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[14px]
             right-[8px]`,onClick:()=>p(!1),children:e.jsx(_,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-128px)] overflow-y-auto overflow-hidden rounded-b-lg",children:a.map((N,y)=>{const c=N.progress.length,u=N.progress.reduce((j,b)=>b.passed?j+1:j,0);return e.jsxs("div",{className:`h-[72px] border-b-[1px] border-dark-fill-2 flex items-center  px-3 cursor-pointer 
                          hover:bg-dark-fill-3 ${x===N.id?"bg-dark-fill-3":"bg-dark-layer-1"}`,onClick:()=>{x===N.id?h(void 0):h(N.id)},children:[e.jsx("div",{className:"text-xl font-semibold text-dark-yellow",children:y+1}),e.jsx("div",{className:"h-11 w-11 shrink-0 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${A}&seed=${N.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:"text-lg ml-3 truncate",children:N.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[u,"/",c]})]},y)})})]}),!x&&e.jsx("div",{className:"shrink text-gray-50 mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-[12px] px-[14px]",children:n.map((N,y)=>{const c=N.problems[N.lastModifyedProblem||0];return e.jsxs("div",{className:"h-[300px] w-[calc(50%-10px)] relative rounded-lg bg-dark-layer-1 overflow-hidden cursor-pointer",onClick:()=>h(N.id),children:[e.jsx("div",{className:" absolute bottom-0",children:e.jsx(q,{userCode:c.code,readOnly:!0})}),e.jsxs("div",{className:"absolute top-2 left-3 flex bg-sky-900 items-center rounded-lg px-2 py-1",children:[e.jsx("img",{src:`${A}&seed=${N.name}`,alt:"avatar",className:" h-[26px] mr-1"}),e.jsx("div",{className:"truncate max-w-[160px]",children:N.name})]}),e.jsx("div",{className:" absolute top-2 right-3 truncate max-w-[200px] bg-emerald-900 items-center rounded-lg px-2 py-1",children:c.title})]},y)})})}),x&&e.jsx(pt,{gameId:t,playersCode:n,focusedPlayerId:x,playersProgress:a,setFocusedPlayerId:h})]})})},pe=({timeLeft:t,setTimeLeft:a})=>{const s=l=>{const r=Math.floor(l/3600),n=Math.floor(l%3600/60),i=l%60;return`${r<10?"0"+r:r}:${n<10?"0"+n:n}:${i<10?"0"+i:i}`};return m.useEffect(()=>{const l=setInterval(()=>{a(r=>r&&(r<=0?0:r-1))},1e3);return()=>clearInterval(l)},[a]),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center p-1 h-8 cursor-default",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})}),e.jsx("div",{children:s(t)})]})})},gt=({gameId:t,currentState:a,setCurrentState:s})=>{const l=E(),[r,n]=m.useState();m.useEffect(()=>{if(a==="GameWatching"&&t){const o=()=>{fetch(de,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(h=>h.json()).then(h=>{const f=h.endedAt-new Date().getTime();n(Math.floor(f/1e3))})};o();const x=setInterval(()=>{o()},6e4);return()=>clearInterval(x)}},[a,t]);const i=()=>{const o=localStorage.getItem("userData");if(o&&t){const x=JSON.parse(o).access_token;fetch(Qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({gameId:t})}).then(h=>{h.status===200?(g("🔥 Game Started !"),s("GameWatching")):g.error("Start Game failed")})}},d=()=>{const o=localStorage.getItem("userData");if(o&&t){const x=JSON.parse(o).access_token;fetch(qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({gameId:t})}).then(h=>{h.status===200?l("/"):g.error("Shot down failed")})}},p=()=>{const o=localStorage.getItem("userData");if(o&&t){const x=JSON.parse(o).access_token;fetch(Ze,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({gameId:t})}).then(h=>{h.status===200?s("GameResult"):l("/")})}};return m.useEffect(()=>{a==="GameWatching"&&r&&r<=0&&s("GameResult")},[r,a]),e.jsx(O.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(M,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"relative h-11 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:"./gameHost.png",alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:"HOST"})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GameWatching"&&r&&e.jsx(pe,{timeLeft:r,setTimeLeft:n}),a==="PlayersJoining"&&e.jsxs("div",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-green-s font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:i,children:[e.jsx("div",{className:"mr-2",children:"Start Game"}),e.jsx(X,{})]}),a==="GameWatching"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-yellow font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:p,children:[e.jsx("div",{className:"mr-2",children:"Close Game"}),e.jsx(X,{})]}),a==="PlayersJoining"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:d,children:[e.jsx("div",{className:"mr-2",children:"Shut Down"}),e.jsx(Z,{})]}),a==="GameResult"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:d,children:[e.jsx("div",{className:"mr-2",children:"Leave"}),e.jsx(Z,{})]})]})]})})},H=({name:t,place:a})=>e.jsxs("div",{className:"",children:[e.jsx("img",{src:`${A}&seed=${t}`,alt:"avatar",className:"w-24 mx-auto"}),e.jsx("div",{className:`rounded-lg text-center py-[3px] px-[3px] text-dark-layer-1 font-semibold truncate max-w-[120px] ${a===1?"bg-amber-200":a===2?"bg-slate-200":" bg-orange-200"}`,children:t})]}),fe=({gameId:t})=>{const[a,s]=m.useState([]),[l,r]=m.useState([]),[n,i]=T(F);m.useEffect(()=>{i(!0),fetch(lt,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(p=>p.json()).then(p=>{s(p.players),r(p.problems),i(!1)})},[]);const d=p=>{const o=Math.floor(p/3600),x=Math.floor(p%3600/60),h=p%60;return`${o<10?"0"+o:o}:${x<10?"0"+x:x}:${h<10?"0"+h:h}`};return e.jsx("div",{className:"",children:!n&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-center relative h-[400px] w-[600px] mx-auto ",children:[e.jsx(ze,{numberOfPieces:70,width:600,height:400}),a[0]&&e.jsx("div",{className:" absolute top-[75px]",children:e.jsx(H,{name:a[0].name,place:1})}),a[1]&&e.jsx("div",{className:" absolute top-[126px] left-[124px]",children:e.jsx(H,{name:a[1].name,place:2})}),a[2]&&e.jsx("div",{className:" absolute top-[149px] left-[380px]",children:e.jsx(H,{name:a[2].name,place:3})}),e.jsx("img",{src:"podium.png",alt:"",className:" h-[200px] mt-auto",color:"orange"})]}),e.jsxs("table",{className:`${l.length>3?"w-[960px]":"w-[740px]"}  mx-auto mt-8`,children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Place"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Name"}),l.map((p,o)=>e.jsxs("th",{className:"px-3 py-3 w-[12%] font-semibold text-sm",children:[o+1,"-",p.title]},o)),e.jsx("th",{className:"px-3 py-3 w-[12%] font-semibold",children:"Time"})]})}),e.jsx("tbody",{className:"text-white",children:a.map((p,o)=>e.jsxs("tr",{className:`${o%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-8 py-4 text-dark-yellow font-bold",children:o+1}),e.jsx("td",{className:"pl-3 py-4 font-bold",children:p.name}),p.progress.map((x,h)=>e.jsx("td",{className:"pl-3 py-4 text-center",children:x?e.jsx("span",{className:"text-dark-green-s",children:e.jsx(re,{})}):e.jsx("div",{className:"text-dark-pink w-fit",children:e.jsx(Oe,{})})},h)),e.jsx("td",{className:"px-3 py-4 text-dark-gray-7",children:p.timeUsed?d(p.timeUsed):"-"})]},o))})]})]})})},jt=()=>{const t=E(),[a,s]=m.useState(),[l,r]=m.useState("Loading");return m.useEffect(()=>{const n=localStorage.getItem("userData");if(!n)t("/"),g.error("Sign In Time Out");else{const i=JSON.parse(n).access_token;fetch(Ve,{method:"GET",headers:{"content-type":"application/json",Authorization:`Bearer ${i}`}}).then(d=>d.json()).then(d=>{d.founded?(s(d.contestId),r(()=>d.state==="created"?"PlayersJoining":d.state==="started"?"GameWatching":d.state==="closed"?"GameResult":"GameCreating")):r("GameCreating")}).catch(d=>{console.log(d)})}},[]),e.jsxs(e.Fragment,{children:[l==="GameCreating"||l==="Loading"?e.jsx(B,{}):e.jsx(gt,{gameId:a,currentState:l,setCurrentState:r}),e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[l==="GameCreating"&&e.jsx(ht,{setGameId:s,setCurrentState:r}),l==="PlayersJoining"&&a&&e.jsx(ut,{gameId:a}),l==="GameWatching"&&a&&e.jsx(ft,{gameId:a}),l==="GameResult"&&a&&e.jsx(fe,{gameId:a})]})]})};function ge(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function U(t){return/\s/g.test(t)}const yt=({setCurrentState:t,setPlayer:a})=>{const[s,l]=m.useState(""),[r,n]=m.useState(""),[i,d]=m.useState(!1),p=o=>{if(o.preventDefault(),s==="")return g.error("Name can not be empty");if(U(s))return g.error("Name can not have whitespace");if(s.length>20)return g.error("Name can not exceed 20 characters");if(!Number(r)||Number(r)>1e5||Number(r)<0)return g.error("Invalid game id");d(!0),fetch(st,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:r,playerName:s})}).then(async x=>x.status!==200?x.json().then(h=>{throw h}):x.json()).then(x=>{const h={id:x.playerId,gameId:Number(r),name:s};a(h),localStorage.setItem("playerData",JSON.stringify(h)),x.gameState==="created"?t("GameWaiting"):x.gameState==="started"?(g("🔥 Game is started !"),t("GamePlaying")):g.error("Game is ended")}).catch(x=>{console.error(x),g.error(x.errors||"Join game failed")}).finally(()=>{d(!1)})};return e.jsxs(O.div,{className:"flex flex-col items-center justify-center mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Join Game"}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-lg",children:"Game Id"}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:r,onChange:o=>n(o.target.value)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg",children:"Name "}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:s,onChange:o=>l(o.target.value)})]}),e.jsx("button",{disabled:i,className:"mt-8 bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Join Game"})]})]})},Nt=({player:t,setCurrentState:a})=>{const s=m.useRef(R(z)).current,[l,r]=m.useState([]),n=E();return m.useEffect(()=>{if(t)return fetch(oe,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(i=>i.json()).then(i=>{r(i.players)}),fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(i=>i.json()).then(i=>{i.problems.forEach(d=>{localStorage.removeItem(`code?problem_id=${d==null?void 0:d.id}&gameMode`)})}),s.emit("ws-player-joinGame",{gameId:t.gameId}),s.on("ws-host-playerJoinGame",function(i){r(d=>[...d,{id:i.id,name:i.name,gameId:t.gameId}])}),s.on("ws-host-playerExitGame",function(i){r(d=>d.filter(p=>p.id!=i.id))}),s.on("ws-player-hostTerminateGame",function(){g.info("Host terminated game"),localStorage.removeItem("playerData"),n("/")}),s.on("ws-player-hostStartGame",function(){g("🔥 Game Started !"),a("GamePlaying")}),()=>{s.off("ws-host-playerExitGame"),s.off("ws-host-playerJoinGame"),s.off("ws-player-hostTerminateGame"),s.off("ws-player-hostStartGame")}},[s]),e.jsx(O.div,{className:"w-11/12 md:w-9/12 mx-auto text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"mt-10",children:[e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7",children:"Game is about to start..."}),e.jsx("div",{className:"mt-16",children:e.jsx(ue,{players:l})})]})})},bt=({player:t,currentState:a,setCurrentState:s})=>{const[l,r]=m.useState(),[n,i]=T(me),d=E(),p=()=>{(a==="GamePlaying"||a==="GameWaiting")&&t&&fetch(rt,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId,playerId:t.id})}).then(o=>{o.status===200?localStorage.removeItem("playerData"):g.error("Failed to exit game")}),d("/")};return m.useEffect(()=>{if(a==="GamePlaying"&&t){const o=()=>{fetch(de,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(h=>h.json()).then(h=>{const f=h.endedAt-new Date().getTime();r(Math.floor(f/1e3))})};o();const x=setInterval(()=>{o()},6e4);return()=>clearInterval(x)}},[a,t]),m.useEffect(()=>{a==="GamePlaying"&&l&&l<=0&&s("GameResult")},[l,a]),e.jsx("nav",{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(M,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-10 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:`${A}&seed=${t.name}`,alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GamePlaying"&&e.jsxs("div",{className:"text-xl relative cursor-pointer flex h-9 w-9  justify-center items-center",title:`${n?"Turn off bullets":"Turn on bullets"}`,onClick:()=>{i(o=>!o)},children:[e.jsx("div",{className:`absolute text-dark-gray-6 text-3xl top-1/2 -translate-x-1/2 left-1/2 -translate-y-1/2
                            ${n?"opacity-0":"opacity-100"} transition-all`,children:e.jsx(Te,{})}),e.jsx(Ee,{})]}),a==="GamePlaying"&&l&&e.jsx(pe,{timeLeft:l,setTimeLeft:r}),e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink hover:bg-dark-fill-2 transition-all",onClick:p,children:[e.jsx("div",{className:"mr-2",children:"Exit"}),e.jsx(se,{})]})]})]})]})})},vt=({player:t})=>{const a=m.useRef(R(z)).current,[s,l]=m.useState([]),r=["bg-sky-500","bg-pink-500","bg-yellow-500","bg-slate-500","bg-green-500","bg-purple-500"];m.useEffect(()=>(a.emit("ws-player-joinGame",{gameId:t.gameId}),a.on("ws-player-sendMessageToPlayer",function(i){(i.id===-1||i.id===t.id)&&(console.log(new Date().toLocaleString()),console.log("Host message",i.message),n(i.message))}),()=>{a.off("ws-player-sendMessageToPlayer")}),[a]);const n=i=>{const d=0+Math.random()*400,p=le.uniqueId(),o=15+Math.floor(Math.random()*8),x=r[Math.floor(Math.random()*r.length)];l(h=>[...h,{message:i,height:d,id:p,duration:o,colorName:x}]),setTimeout(()=>{l(h=>h.filter(f=>f.id!==p))},o*1e3)};return e.jsx("div",{className:"bg-transparent h-[calc(100vh-48px)] w-full absolute overflow-hidden top-0 z-40 pointer-events-none",children:s.map(i=>e.jsxs("div",{className:"bullet",style:{top:i.height,animationDuration:`${i.duration}s`},children:[e.jsxs("div",{className:`bg-opacity-50 ${i.colorName} flex shrink-0 items-center py-0.5 pl-3 pr-2 rounded-l-3xl rounded-r-lg truncate max-w-[800px]`,children:[e.jsx("img",{src:"./gameHost.png",alt:"GameHost",className:"h-7 mr-2"}),i.message]}),e.jsx("img",{src:"fire.gif",className:" rotate-90 h-8 opacity-90"})]},i.id))})},wt=({player:t,setCurrentState:a})=>{const[s,l]=m.useState([]),[r,n]=m.useState(0),[i,d]=m.useState(),[p,o]=m.useState([]),x=m.useRef(R(z)).current,h=ne(me),[f,v]=m.useState(!0),w=()=>{o(y=>(y.sort((c,u)=>{const j=c.progress.reduce((S,L)=>L.passed?S+1:S,0),b=u.progress.reduce((S,L)=>L.passed?S+1:S,0);return j>b?-1:j<b?1:c.finishedAt&&u.finishedAt?new Date(c.finishedAt).getTime()-new Date(u.finishedAt).getTime():0}),[...y]))};m.useEffect(()=>(fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(y=>y.json()).then(y=>{l(y.problems)}),x.emit("ws-player-joinGame",{gameId:t.gameId}),x.on("ws-player-hostCloseGame",function(){a("GameResult"),g.info("Host terminated game")}),x.on("ws-host-playerJoinGame",function(y){o(c=>[...c,{id:y.id,name:y.name,finishedAt:null,progress:s.map(u=>({id:u.id,passed:!1}))}])}),x.on("ws-host-updateProgress",function({playerId:y,progress:c,finishedAt:u}){o(j=>(j.forEach(b=>{b.id===y&&(b.progress=c,b.finishedAt=u)}),[...j])),w()}),()=>{x.off("ws-player-hostCloseGame"),x.off("ws-host-playerJoinGame"),x.off("ws-host-updateProgress")}),[x]),m.useEffect(()=>{s.length>0&&t&&fetch(ce,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(y=>y.json()).then(y=>{o([]),y.progress.forEach(c=>{c.id===t.id&&d({id:c.id,name:c.name,finishedAt:c.finishedAt,progress:c.progress?JSON.parse(c.progress):s.map(u=>({id:u.id,passed:!1}))}),o(u=>[...u,{id:c.id,name:c.name,finishedAt:c.finishedAt,progress:c.progress?JSON.parse(c.progress):s.map(j=>({id:j.id,passed:!1}))}])}),w()})},[s]);const P=(y,c,u,j,b,S)=>{x.emit("ws-player-updateCode",{gameId:y,playerId:c,playerName:u,problemId:j,problemTitle:b,code:S})},N=m.useCallback(le.debounce(P,500),[]);return e.jsxs(O.div,{className:"relative flex w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[h&&e.jsx(vt,{player:t}),e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${f?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>v(!0),children:e.jsx(_,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0 bg-dark-layer-2 transition-all duration-500
        ${f?"translate-x-0 w-[260px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:" h-[40px] flex items-end border-dark-fill-2 px-3 relative",children:[e.jsx("h1",{className:"text-xl",children:"Rank"}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[8px]
             right-[8px]`,onClick:()=>v(!1),children:e.jsx(_,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-96px)] overflow-y-auto overflow-hidden rounded-b-lg",children:p.map((y,c)=>{const u=y.progress.length,j=y.progress.reduce((b,S)=>S.passed?b+1:b,0);return e.jsxs("div",{className:"w-full h-[56px] flex items-center px-[12px] mt-[8px]",children:[e.jsx("div",{className:`text-xl font-semibold ${y.id===t.id?"text-dark-pink":"text-dark-yellow"}`,children:c+1}),e.jsx("div",{className:"h-10 w-10 shrink-0 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-[10px]",children:e.jsx("img",{src:`${A}&seed=${y.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:`text-md ml-3 truncate ${y.id===t.id?"font-semibold":"font-normal"}`,children:y.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[j,"/",u]})]},c)})})]}),e.jsx("div",{className:"w-full",children:s.length>0&&i&&e.jsxs(V,{minSize:0,snapOffset:100,className:"split",children:[e.jsxs("div",{className:"bg-dark-layer-1",children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-auto no-scrollbar",children:s.map((y,c)=>e.jsxs("div",{className:`flex items-center rounded-t-[5px] px-4 py-[7px] text-sm cursor-pointer ${c===r?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>n(c),children:[i&&i.progress.map((u,j)=>e.jsx("span",{className:`text-dark-green-s mr-1 ml-[-8px] ${u.id===y.id&&u.passed?"block":"hidden"}`,children:e.jsx(ae,{})},j)),e.jsxs("span",{className:"  whitespace-nowrap",children:["Prob ",c+1]})]},c))}),e.jsx(he,{problem:s[r]})]}),e.jsx(xe,{problem:s[r],gameMode:!0,gameData:{player:t,myProgress:i,setMyProgress:d,updateCode:N}})]})})]})},kt=()=>{const[t,a]=m.useState("Loading"),[s,l]=m.useState();return m.useEffect(()=>{const r=localStorage.getItem("playerData");if(!r)a("GameJoining");else{const n=JSON.parse(r);fetch(at,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({playerId:n.id,gameId:n.gameId})}).then(i=>i.json()).then(i=>{l(n),i.founded?a(()=>i.state==="created"?"GameWaiting":i.state==="started"?"GamePlaying":i.state==="closed"?"GameResult":"GameJoining"):(localStorage.removeItem("playerData"),a("GameJoining"))})}},[]),e.jsxs(e.Fragment,{children:[t==="GameJoining"||t==="Loading"?e.jsx(B,{}):e.jsx(bt,{player:s,currentState:t,setCurrentState:a}),e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[t==="GameJoining"&&e.jsx(yt,{setCurrentState:a,setPlayer:l}),t==="GameWaiting"&&s&&e.jsx(Nt,{setCurrentState:a,player:s}),t==="GamePlaying"&&s&&e.jsx(wt,{setCurrentState:a,player:s}),t==="GameResult"&&s&&e.jsx(fe,{gameId:s.gameId})]})]})},St=()=>{const[t,a]=T(F),[s,l]=m.useState({isOpen:!1,videoId:""}),[r,n]=m.useState([]),[i,d]=m.useState(JSON.parse(localStorage.getItem("problemStatus")||"{}"));m.useEffect(()=>{a(!0),fetch(ie,{method:"GET"}).then(o=>o.json()).then(o=>{n(o),a(!1)})},[]);const p=()=>{l({isOpen:!1,videoId:""})};return e.jsx(e.Fragment,{children:!t&&e.jsx(O.div,{className:"relative overflow-x-auto mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:r.length>0&&e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Status"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Solution"})]})}),e.jsx("tbody",{className:"text-white",children:r!==void 0&&r.map((o,x)=>{const h=o.difficulty==="Easy"?"text-dark-green-s":o.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${x%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-4 py-4 whitespace-nowrap text-dark-green-s",children:e.jsx("div",{className:" cursor-pointer h-6",onClick:()=>{d(f=>(f[o.id]=!f[o.id],localStorage.setItem("problemStatus",JSON.stringify(f)),{...f}))},children:i[o.id]&&e.jsx(re,{width:"18"})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx(M,{className:"hover:text-blue-600",to:`/problem?id=${o.id}`,children:o.title})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:o.tags.map(f=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:f.title},f.id))})}),e.jsx("td",{className:`px-3 py-4 ${h}`,children:o.difficulty}),e.jsx("td",{className:"px-3 py-4",children:o.solutionVideo?e.jsx(Ie,{fontSize:"28",className:"cursor-pointer hover:text-red-600",onClick:()=>l({isOpen:!0,videoId:o.solutionVideo})}):e.jsx("p",{className:"text-gray-400",children:"Coming soon"})})]},x)})}),s.isOpen&&e.jsxs("tfoot",{className:"fixed top-0 left-0 h-screen w-screen flex items-center justify-center",children:[e.jsx("div",{className:"bg-black z-10 opacity-70 top-0 left-0 w-screen h-screen absolute",onClick:p}),e.jsx("div",{className:"w-full z-50 h-full px-6 relative max-w-4xl",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center relative",children:e.jsxs("div",{className:"w-full relative",children:[e.jsx(W,{fontSize:"35",className:"cursor-pointer absolute -top-16 right-0 text-dark-gray-8",onClick:p}),e.jsx(Fe,{videoId:s.videoId,loading:"lazy",iframeClassName:"w-full min-h-[500px]"})]})})})]})]})})})},te=()=>{const t=ne($),a=E(),s=()=>{t.isLogin?a("/gameHost"):g.error("Please Sign In")};return e.jsxs("div",{children:[e.jsx(B,{}),e.jsx(O.div,{className:"block h-[calc(100vh-48px)] overflow-y-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"w-11/12 md:w-9/12 mx-auto pt-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1",children:"Let's Code!"}),e.jsxs("div",{className:" flex mt-5",children:[e.jsx("button",{onClick:s,children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105 flex items-end justify-center",children:[e.jsx("img",{src:"createGame.svg",className:"h-24 object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Create Game"})]})}),e.jsx(M,{to:"gamePlayer",className:" ml-8",children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105",children:[e.jsx("img",{src:"joinGame.svg",className:"h-full w-full object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Join Game"})]})})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1 mt-5",children:"Problems"}),e.jsx(St,{})]})]})})]})},Ct=()=>{const[t,a]=T($),[s,l]=m.useState(""),[r,n]=m.useState(""),[i,d]=m.useState(!1);m.useEffect(()=>{t.isOpen&&p()},[t]);const p=()=>{l(""),n("")},o=x=>{if(!i){if(x.preventDefault(),s==="")return g.error("Email can not be empty");if(!ge(s))return g.error("Please enter a valid email");if(r==="")return g.error("Password can not be empty");if(s.length>40)return g.error("Email can not exceed 40 characters");if(r.length>30)return g.error("Password can not exceed 30 characters");d(!0),fetch(We,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"native",email:s,password:r})}).then(h=>h.json()).then(h=>{h.errors?g.error(h.errors):(g.success("Sign In Successfully"),localStorage.setItem("userData",JSON.stringify(h.data)),p(),a(f=>({...f,isOpen:!1,isLogin:!0})))}).catch(h=>{console.error(h)}).finally(()=>{d(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign In"}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:s,name:"email",onChange:x=>{l(x.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:r,name:"password",onChange:x=>{n(x.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{disabled:i,className:"w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s mt-6 disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-5",children:["Not Registered?",e.jsx("button",{onClick:()=>{a(x=>({...x,type:"register"}))},className:"text-blue-400 hover:underline ml-3",children:"Create Account"})]})]})},Pt=()=>{const[t,a]=T($),[s,l]=m.useState(""),[r,n]=m.useState(""),[i,d]=m.useState(""),[p,o]=m.useState(""),[x,h]=m.useState(!1);m.useEffect(()=>{t.isOpen&&f()},[t]);const f=()=>{l(""),n(""),d(""),o("")},v=w=>{if(!x){if(w.preventDefault(),U(s)&&g.error("Name should not contain spaces"),U(i)&&g.error("Password should not contain spaces"),s==="")return g.error("Name can not be empty");if(r==="")return g.error("Email can not be empty");if(!ge(r))return g.error("Please enter a valid email");if(i==="")return g.error("Password can not be empty");if(s.length>30)return g.error("UserName should not exceed 30 characters");if(r.length>40)return g.error("Email should not exceed 40 characters");if(i.length>30)return g.error("Password shoule not exceed 30 characters");if(p!==i)return g.error("Passwords are not matched");h(!0),fetch(Ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:r,password:i})}).then(P=>P.json()).then(P=>{P.errors?g.error(P.errors):(g.success("Sign Up Successfully"),localStorage.setItem("userData",JSON.stringify(P.data)),f(),a(N=>({...N,isOpen:!1,isLogin:!0})))}).catch(P=>{g.error(P.errors)}).finally(()=>{h(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign Up"}),e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Name"}),e.jsx("input",{type:"name",value:s,onChange:w=>l(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:r,onChange:w=>n(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:i,onChange:w=>d(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Confirm Password"}),e.jsx("input",{type:"password",value:p,onChange:w=>o(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{disabled:x,className:" mt-5 w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-3",children:["Already have an account",e.jsx("button",{className:"text-blue-300 hover:underline ml-3",onClick:()=>{a(w=>({...w,type:"login"}))},children:"Sign In"})]})]})},Gt=()=>{const[t,a]=m.useState(""),[s,l]=T($),[r,n]=m.useState(),i=E(),d=o=>{l(x=>({...x,isOpen:!1})),i(`/problem?id=${o}`)},p=()=>{const o=localStorage.getItem("userData");if(!o){g.error("Login timeout"),l(f=>({...f,isOpen:!1,isLogin:!1}));return}const h=JSON.parse(o).access_token;fetch(tt,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${h}`}}).then(f=>{console.log(f),f.status===200&&n([])})};return m.useEffect(()=>{if(s.isOpen){const o=localStorage.getItem("userData");if(!o){g.error("Login timeout"),l(f=>({...f,isOpen:!1,isLogin:!1}));return}const x=JSON.parse(o);a(x.user.name);const h=x.access_token;fetch(et,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${h}`}}).then(f=>f.json()).then(f=>{n(f)})}},[s]),e.jsxs("div",{className:" w-[800px] h-[560px] bg-dark-layer-1 px-10",children:[e.jsxs("div",{className:" h-[100px] mt-[20px] px-3 text-white font-semibold text-2xl flex items-center tracking-wide",children:[e.jsxs("span",{className:" text-dark-yellow mr-[10px]",children:[t,"'s"]}),"Host History",e.jsx("button",{onClick:p,className:"ml-auto mr-3 py-1 px-3 cursor-pointer rounded bg-dark-fill-3 hover:bg-dark-fill-2 transition-all font-medium text-base text-dark-pink",children:"Clear"})]}),e.jsxs("div",{className:"h-[420px] overflow-y-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-dark-gray-8 text-left border-b-[1px] h-[60px]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-2 w-[10%]",children:"GameId"}),e.jsx("th",{className:"py-3 px-2 w-[25%]",children:"Problems"}),e.jsx("th",{className:"py-3 px-2 w-[30%]",children:"Players"}),e.jsx("th",{className:"py-3 px-2 w-[15%] text-center",children:"Time"})]})}),e.jsx("tbody",{className:"text-dark-gray-8 ",children:r&&r.length>0&&r.map((o,x)=>e.jsxs("tr",{className:`${x%2===1?"bg-dark-fill-3":""}`,children:[e.jsx("td",{className:"py-3 px-3",children:o.contestId}),e.jsx("td",{className:"py-3 px-2",children:o.problems.map((h,f)=>e.jsx("div",{className:"font-semibold leading-7 hover:text-blue-500 transition-all cursor-pointer",onClick:()=>d(h.id),children:h.title},f))}),e.jsx("td",{className:"py-4 px-2 flex flex-wrap",children:o.players.map((h,f)=>e.jsxs("div",{className:"mr-[12px] mb-1 flex items-center",children:[e.jsx("img",{src:`${A}&seed=${h.name}`,className:"h-[25px] mr-[4px]"}),h.name]},f))}),e.jsxs("td",{className:"py-3 text-center text-dark-gray-7",children:[e.jsx("div",{children:new Date(o.startedAt).toLocaleDateString()}),e.jsx("div",{children:new Date(o.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},x))})]}),r&&r.length===0&&e.jsx("div",{className:"h-[300px] w-full items-center justify-center flex text-xl tracking-wide text-dark-gray-7",children:"You have no host history"})]})]})},Ot=()=>{const[t,a]=T($),s=()=>{a(l=>({...l,isOpen:!1}))};return e.jsxs("div",{children:[e.jsx("div",{className:`z-40 absolute top-0 w-full h-full flex items-center justify-center bg-black transition-all duration-500 ${t.isOpen?" opacity-50 ":"pointer-events-none opacity-0"}`,onClick:s}),e.jsxs("div",{className:`w-fit absolute left-[50%] translate-y-[-50%] translate-x-[-50%] flex justify-center z-50 rounded-lg overflow-hidden
        transition-all duration-500 ${t.isOpen?"top-[50%] opacity-100":"top-[-60%] opacity-0"} `,children:[e.jsx("button",{className:"absolute bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center text-white right-[5px] top-[5px]",children:e.jsx(W,{className:"h-6 w-6",onClick:s})}),t.type==="register"&&e.jsx(Pt,{}),t.type==="login"&&e.jsx(Ct,{}),t.type==="profile"&&e.jsx(Gt,{})]})]})};function Tt(){return e.jsx(ve,{children:e.jsxs("div",{className:"bg-dark-layer-2 min-h-screen relative",children:[e.jsx(Ae,{position:"top-center",autoClose:2500,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),e.jsx(Ot,{}),e.jsxs(Re,{children:[e.jsx(J,{path:"/",element:e.jsx(te,{})}),e.jsx(J,{path:"problem",element:e.jsx(xt,{})}),e.jsx(J,{path:"gameHost",element:e.jsx(jt,{})}),e.jsx(J,{path:"gamePlayer",element:e.jsx(kt,{})}),e.jsx(J,{path:"*",element:e.jsx(te,{})})]})]})})}Ne.createRoot(document.getElementById("root")).render(e.jsx($e,{children:e.jsx(Tt,{})}));
