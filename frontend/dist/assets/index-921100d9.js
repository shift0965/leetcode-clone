import{r as d,j as e}from"./react-bb1a8b08.js";import{c as ge}from"./react-dom-b05b0288.js";import{L as _,u as je,B as ye}from"./react-router-dom-bd488c8a.js";import{F as Ne,a as be,b as ee,B as L,I as ve,A as we,c as ke,C as Se,d as te,e as D,f as Q,g as X,h as se,i as Ce,j as Pe,G as Ge,k as Oe}from"./react-icons-ef56d0db.js";import{R as U,a as I,b as ae,c as W,d as Ee}from"./recoil-c3334d42.js";import{Q as N,k as Te}from"./react-toastify-ca6d5611.js";import{m as P}from"./framer-motion-ca35d016.js";import{S as Y}from"./react-split-394c0406.js";import{G as Ie,E as $e}from"./@codemirror-4e45e905.js";import{R as Ae,v as Je}from"./@uiw-0006cca6.js";import{a as $,d as Le,e as B}from"./react-router-c4336f7a.js";import{l as M}from"./socket.io-client-5e3fa801.js";import{C as _e}from"./react-confetti-4487dd03.js";import{l as re}from"./lodash-8f34d9d6.js";import{Y as Me}from"./react-youtube-4df3b629.js";import"./fast-deep-equal-ca765bc5.js";import"./scheduler-765c72db.js";import"./@remix-run-e5357272.js";import"./clsx-1229b3e0.js";import"./prop-types-e0d21109.js";import"./split.js-822f4990.js";import"./@lezer-b3acbd76.js";import"./crelt-7bb88e1d.js";import"./style-mod-ae491175.js";import"./w3c-keyname-9fb136d3.js";import"./@babel-df62547b.js";import"./engine.io-client-b8dcd8ee.js";import"./engine.io-parser-a5b7cb40.js";import"./@socket.io-3e1df240.js";import"./socket.io-parser-44417fca.js";import"./youtube-player-63f3f564.js";import"./sister-57707ffb.js";import"./load-script-d550e3b0.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();const w="",Re=":3001",ne=`${w}/api/1.0/problems/`,Be=`${w}/api/1.0/problems/details`,ze=`${w}/api/1.0/workspace/run`,Fe=`${w}/api/1.0/workspace/submit`,He=`${w}/api/1.0/user/signin`,De=`${w}/api/1.0/user/signup`,Ue=`${w}/api/1.0/contest/hostCheckGame`,We=`${w}/api/1.0/contest/hostCreateGame`,Ye=`${w}/api/1.0/contest/hostTerminateGame`,Ke=`${w}/api/1.0/contest/hostStartGame`,Ve=`${w}/api/1.0/contest/hostGetPlayersCode`,Z=`${w}/api/1.0/contest/hostSendMessage`,qe=`${w}/api/1.0/contest/hostCloseGame`,Qe=`${w}/api/1.0/contest/hostGetHistory`,Xe=`${w}/api/1.0/contest/playerJoinGame`,Ze=`${w}/api/1.0/contest/playerCheckGame`,T="https://api.dicebear.com/6.x/avataaars/svg?size=64",et=`${w}/api/1.0/contest/playerExitGame`,tt=`${w}/api/1.0/contest/playerSubmit`,le=`${w}/api/1.0/contest/getPlayers`,K=`${w}/api/1.0/contest/getProblems`,ie=`${w}/api/1.0/contest/getPlayersProgress`,oe=`${w}/api/1.0/contest/getTimeLimit`,st=`${w}/api/1.0/contest/getGameResult`,R=Re,at=()=>{const[t,r]=d.useState(!1),[s,n]=d.useState(0),a=i=>{const o=Math.floor(i/3600),l=Math.floor(i%3600/60),m=i%60;return`${o<10?"0"+o:o}:${l<10?"0"+l:l}:${m<10?"0"+m:m}`};return d.useEffect(()=>{let i;return t&&(i=setInterval(()=>{n(o=>o+1)},1e3)),()=>clearInterval(i)},[t]),e.jsx("div",{children:t?e.jsxs("div",{className:"flex items-center space-x-2 bg-dark-fill-3 p-1.5 cursor-pointer rounded hover:bg-dark-fill-2",children:[e.jsx("div",{children:a(s)}),e.jsx(Ne,{onClick:()=>{r(!1),n(0)}})]}):e.jsx("div",{className:"flex items-center p-1 h-8 hover:bg-dark-fill-3 rounded cursor-pointer",onClick:()=>r(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})})})})},A=U({key:"authModalState",default:{isOpen:!1,type:"login",isLogin:!1}}),ce=U({key:"bulletSwitchState",default:!0}),z=U({key:"loadingState",default:!0}),F=({isWorkspace:t=!1})=>{const r=()=>{localStorage.removeItem("userData"),n(i=>({...i,isLogin:!1})),N.success("Sign Out Successfully ")},[s,n]=I(A),a=()=>{n(i=>({...i,isOpen:!0,type:"login"}))};return d.useEffect(()=>{const i=localStorage.getItem("userData");i?JSON.parse(i).access_expired>new Date().getTime()/1e3?n(l=>({...l,isLogin:!0})):(localStorage.removeItem("userData"),n(l=>({...l,isLogin:!1}))):n(o=>({...o,isLogin:!1}))},[]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:`flex w-full items-center justify-between ${t?"":"max-w-[1200px] mx-auto"}`,children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[t&&e.jsx(at,{}),s.isLogin?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" relative flex items-center text-2xl py-1 cursor-pointer",onClick:()=>n(i=>({...i,isOpen:!0,type:"profile"})),children:e.jsx(be,{})}),e.jsx("button",{className:"bg-dark-fill-3 py-1.5 px-3 cursor-pointer rounded text-brand-orange hover:bg-dark-fill-2 transition-all",onClick:r,children:e.jsx(ee,{})})]}):e.jsx("button",{className:" bg-dark-fill-3 py-1 px-2 cursor-pointer rounded",onClick:a,children:"Sign In"})]})]})})},rt=({handleRun:t,handleSubmit:r,splitRatio:s,pending:n,setSplitRatio:a})=>e.jsx("div",{className:"flex bg-dark-layer-1 absolute bottom-0 z-10 w-full",children:e.jsxs("div",{className:"mx-5 my-[10px] flex justify-between w-full",children:[e.jsx("div",{className:"mr-2 flex flex-1 flex-nowrap items-center space-x-4",children:n?e.jsx("div",{className:"px-3 py-1.5 font-medium text-dark-label-2 items-center transition-all inline-flex text-sm",children:"Pending..."}):e.jsxs("button",{className:"px-3 py-1.5 font-medium items-center transition-all inline-flex bg-dark-fill-3 text-sm hover:bg-dark-fill-2 text-dark-label-2 rounded-lg pl-3 pr-2",onClick:()=>{a(i=>i>90?50:100)},children:["Console",e.jsx("div",{className:`ml-1 transform transition duration-200 ease-in-out flex items-center ${s>90?"rotate-0":"rotate-180"}`,children:e.jsx(L,{className:"fill-gray-6 mx-1 fill-dark-gray-6"})})]})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx("button",{className:`px-3 py-1.5 text-sm font-medium items-center whitespace-nowrap transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 text-dark-label-2 rounded-lg 
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:t,disabled:n,children:"Run"}),e.jsx("button",{className:`px-3 py-1.5 font-medium items-center transition-all focus:outline-none inline-flex text-sm text-white bg-dark-green-s hover:bg-green-3 rounded-lg
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:r,disabled:n,children:"Submit"})]})]})}),E=({value:t,label:r})=>{const s=t===void 0?"undefined":typeof t=="string"?t:JSON.stringify(t);return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-4 text-white",children:[r," ="]}),e.jsx("div",{className:"w-full cursor-text rounded-lg px-3 py-[8px] bg-dark-fill-3 text-white mt-2 min-h-[40px]",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:s})})]})},nt=({problem:t,showTestcases:r})=>{const[s,n]=d.useState(0);return e.jsxs("div",{className:`${r?"block":"hidden"} py-3`,children:[e.jsx("div",{className:"flex",children:t.exampleCases.map((a,i)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>n(i),children:e.jsx("div",{className:"flex flex-wrap items-center",children:e.jsxs("div",{className:`items-center text-sm font-semibold transition-all focus:outline-none inline-flex  hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${s===i?"text-white bg-dark-fill-3":"text-gray-400"}
                `,children:["Case ",i+1]})})},i))}),e.jsx("div",{className:"mt-4",children:t.exampleCases.map((a,i)=>e.jsx("div",{className:`${i===s?"block":"hidden"}`,children:e.jsx("div",{className:"mt-4",children:t.inputKeys.map((o,l)=>{var m;return e.jsx(E,{label:o,value:(m=t.exampleCases[s])==null?void 0:m.input[l]},l)})})},i))})]})},lt=({problem:t,pending:r,showTestcases:s,runResults:n,execError:a,submitResult:i})=>{var p;const[o,l]=d.useState(0),[m,c]=d.useState(!0);return d.useEffect(()=>{c(!0),n==null||n.forEach(u=>{u.passed||c(!1)})},[n]),e.jsxs("div",{className:`${s?"hidden":"block"} py-4`,children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-dark-pink font-semibold text-xl ml-1",children:a.name}),e.jsx("div",{className:"w-full cursor-text rounded-lg border px-3 py-[8px] bg-dark-fill-3 border-transparent text-dark-pink bg-dark-pink bg-opacity-[15%] mt-3",children:e.jsxs("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:[a.line&&`Line ${a.line}
`,a.message]})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:m?e.jsx("span",{className:"text-dark-green-s",children:"Accepted"}):e.jsx("span",{className:"text-dark-pink",children:"Wrong Answer"})}),e.jsx("div",{className:"flex mt-1",children:t.exampleCases.map((u,f)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>l(f),children:e.jsx("div",{className:"flex flex-wrap items-center gap-y-4",children:e.jsxs("div",{className:`items-center transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${o===f?"text-white":"text-gray-500"}
                `,children:[e.jsx("div",{className:`w-1 h-1 rounded-full mr-2 ${n[f].passed?" bg-dark-green-s":"bg-dark-pink"}`}),"Case ",f+1]})})},f))}),t.exampleCases.map((u,f)=>e.jsxs("div",{className:`${f===o?"block":"hidden"}`,children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Stdin",value:u.input.map(h=>JSON.stringify(h)).join(", ")})}),e.jsx("div",{className:`mt-4 ${n[o].stdout.length>0?"block":"hidden"}`,children:e.jsx(E,{label:"Stdout",value:n[o].stdout.map(h=>typeof h=="string"?h:JSON.stringify(h)).join(`
`)})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:n[o].output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:n[o].expected})})]},f))]}),i&&i.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-green-s",children:"Passed"})}),e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:"All the test cases are passed"})]}),i&&!i.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-pink",children:"Failed"})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Input",value:(p=i.input)==null?void 0:p.map(u=>JSON.stringify(u)).join(", ")})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:i.output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:i.expected})})]})]}),!(n||a||i)&&e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:r?"Pending...":"You need to run you code first"})]})},V=({userCode:t,onChangeCode:r,readOnly:s=!1,textLarge:n=!1})=>e.jsx("div",{className:"w-full overflow-y-auto h-full flex flex-col",children:e.jsx(Ae,{className:`codeMirror ${n?"text-[16px]":"text-[14px]"}`,value:t,onChange:a=>r&&r(a),theme:Je,extensions:[Ie(),$e.lineWrapping],basicSetup:{autocompletion:!1,highlightActiveLine:!s,foldGutter:!s,highlightActiveLineGutter:!s},editable:!s,readOnly:s})}),de=({problem:t,gameMode:r=!1,gameData:s=void 0})=>{const[n,a]=d.useState(!1),[i,o]=d.useState(""),[l,m]=d.useState(!0),[c,p]=d.useState(),[u,f]=d.useState(),[h,x]=d.useState(),[g,b]=d.useState(50),[j,y]=d.useState(!1),v=()=>{n?(document.exitFullscreen(),a(!1)):(document.documentElement.requestFullscreen(),a(!0))},S=()=>{y(!0),x(void 0),p(void 0),f(void 0)},C=()=>{m(!1),y(!1)},O=()=>{S(),fetch(ze,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:t.id||0,language:"js",code:i})}).then(k=>k.json()).then(k=>{if(k.errors)throw new Error(k.errors);k.type==="error"?x(k.data):p(k.data)}).catch(k=>{N.error(k.message||"run failed")}).finally(()=>{C()})},J=()=>{S(),fetch(r?tt:Fe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r?{problemId:t.id||0,language:"js",code:i,playerId:s==null?void 0:s.player.id,gameId:s==null?void 0:s.player.gameId,progress:s==null?void 0:s.myProgress.progress,finishedAt:s==null?void 0:s.myProgress.finishedAt}:{problemId:t.id||0,language:"js",code:i})}).then(G=>G.json()).then(G=>{if(G.errors)throw new Error(G.errors);if(G.type==="error")x(G.data);else if(f(G.data),G.data.passed){N.success("Passed !");const q=JSON.parse(localStorage.getItem("problemStatus")||"{}");q[t.id]=!0,localStorage.setItem("problemStatus",JSON.stringify(q)),r&&(s==null||s.setMyProgress({id:s.myProgress.id,name:s.myProgress.name,progress:G.progress,finishedAt:G.finishedAt}))}}).catch(G=>{N.error(G.message||"run failed")}).finally(()=>{C()})},ue=k=>{t&&(localStorage.setItem(`code?problem_id=${t.id}&${r&&"gameMode"}`,k),r&&(s==null||s.updateCode(s.player.gameId,s.player.id,s.player.name,t.id,t.title,k))),o(k)},fe=()=>{if(t){const k=t.boilerplate.replace(/\n\s+/g,`
`);o(k),localStorage.setItem(`code?problem_id=${t.id}&${r&&"gameMode"}`,k)}};return d.useEffect(()=>{if(t){const k=localStorage.getItem(`code?problem_id=${t.id}&${r&&"gameMode"}`);o(k!==null?k:t.boilerplate.replace(/\n\s+/g,`
`))}},[t]),e.jsx("div",{className:"w-full overflow-auto flex flex-col",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-layer-2 h-10 w-full",children:[e.jsx("div",{className:"flex items-center text-white",children:e.jsx("button",{className:"flex cursor-pointer items-center rounded-lg bg-dark-fill-3 text-dark-label-2 px-2 py-1 hover:bg-dark-fill-2",children:"JavaScript"})}),e.jsxs("div",{className:"flex items-center m-2",children:[e.jsx("button",{className:"editor-nav-btn group",onClick:fe,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:e.jsx(ve,{})})}),e.jsx("button",{className:"editor-nav-btn group",onClick:v,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:n?e.jsx(ke,{}):e.jsx(we,{})})})]})]}),e.jsxs("div",{className:" bg-dark-layer-1 h-full relative",children:[e.jsx("div",{className:"flex flex-col h-[calc(100vh-140px)]",children:e.jsxs(Y,{direction:"vertical",minSize:0,snapOffset:60,sizes:[g,100-g],className:"h-full",onDragEnd:k=>{b(k[0])},children:[e.jsx(V,{userCode:i,onChangeCode:ue}),e.jsxs("div",{className:"w-full px-5 overflow-auto relative",children:[e.jsxs("div",{className:"flex h-11 sticky top-0 bg-dark-layer-1 z-10",children:[e.jsx("div",{className:`flex h-full items-center text-white mx-2 border-b-2 cursor-pointer ${l?"border-white":"border-transparent"}`,onClick:()=>m(!0),children:"Testcases"}),e.jsx("div",{className:`flex h-full  items-center text-white mx-2 border-b-2 cursor-pointer ${l?"border-transparent":"border-white"}`,onClick:()=>m(!1),children:"Result"})]}),e.jsx(nt,{problem:t,showTestcases:l}),e.jsx(lt,{problem:t,pending:j,runResults:c,showTestcases:l,execError:h,submitResult:u})]})]})}),e.jsx(rt,{handleRun:O,handleSubmit:J,splitRatio:g,setSplitRatio:b,pending:j})]})]})})},me=({problem:t})=>e.jsx("div",{className:"flex px-0 py-4 h-[calc(100vh-88px)] overflow-y-auto",children:e.jsx("div",{className:"px-5",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsxs("div",{className:"flex-1 mr-2 text-lg font-semibold text-white",children:[t.id,". ",t.title]})}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsx("div",{className:`${t.difficulty==="Hard"?"bg-dark-pink text-dark-pink":t.difficulty==="Medium"?"bg-dark-yellow text-dark-yellow":"bg-dark-green-s text-dark-green-s"} inline-block rounded-[21px] bg-opacity-[.20] px-2.5 py-1 text-xs font-semibold`,children:t.difficulty})}),e.jsx("div",{className:"text-white text-md description mt-5",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6",children:t.exampleCases.map((r,s)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Example ",s+1,": "]}),e.jsxs("div",{className:"example-card",children:[r.image&&e.jsx("img",{src:`problemsImgs/${r.image}`,className:"mt-2 w-full max-w-[450px]"}),e.jsxs("pre",{className:"text-sm",children:[e.jsx("strong",{className:"text-white",children:"Input: "}),t.inputKeys.map((n,a)=>e.jsxs("span",{className:"mr-4",children:[n," = ",JSON.stringify(r.input[a])]},a)),e.jsx("br",{}),e.jsx("strong",{children:"Output: "}),JSON.stringify(r.output)," ",e.jsx("br",{}),r.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Explanation: "}),r.explanation]})]})]})]},s))}),e.jsxs("div",{className:"my-8 pb-4",children:[e.jsx("div",{className:"text-white text-md font-semibold",children:"Constraints:"}),t.constraints.map((r,s)=>e.jsx("ul",{className:"text-white ml-5 list-disc mt-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r}})},s))]})]})})}),it=({problem:t})=>e.jsx("div",{className:"bg-dark-layer-1",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-hidden",children:e.jsx("div",{className:"bg-dark-layer-1 rounded-t-[5px] px-5 py-[7px] text-sm cursor-pointer",children:"Description"})}),e.jsx(me,{problem:t})]})}),ot=()=>{const t=$(),[r]=je(),[s,n]=d.useState(),[a,i]=I(z),o=r.get("id")||0;return d.useEffect(()=>{i(!0),fetch(`${Be}?id=${o}`).then(l=>(l.status!==200&&l.json().then(m=>{N.error(m.errors),t("/")}),l.json())).then(l=>{n(l),i(!1)})},[o]),e.jsxs(e.Fragment,{children:[e.jsx(F,{isWorkspace:!0}),!a&&s&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsx(it,{problem:s}),e.jsx(de,{problem:s})]})})]})},ct=({setGameId:t,setCurrentState:r})=>{const[s,n]=d.useState([]),[a,i]=d.useState([]),[o,l]=d.useState(60);d.useEffect(()=>{fetch(ne,{method:"GET"}).then(f=>f.json()).then(f=>{n(f)})},[]);const m=()=>{a.length>=5?N.error("At most 5 questions!"):i(f=>[...f,0])},c=(f,h)=>{i(x=>{const g=[...x];return g[h]=f,g})},p=f=>{i(h=>{const x=[...h];return x.splice(f,1),x})},u=()=>{if(a.length===0)return N.error("No question is selected");if(new Set(a).size!==a.length)return N.error("Questions should not repeat");const f=localStorage.getItem("userData");if(!f)return N.error("Please Log In");const h=JSON.parse(f).access_token;fetch(`${We}`,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({timeLimit:o,problemList:a.map(x=>s[x].id)})}).then(x=>{x.status===401||x.status===403?(N.error("Login timeout"),localStorage.removeItem("userData"),r("GameCreating")):x.json().then(g=>{t(g.gameId),r("PlayersJoining")})})};return e.jsxs(P.div,{className:"w-11/12 md:w-9/12 mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Create Game"}),e.jsx("h1",{className:"text-xl mt-6 ml-1",children:"Questions"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Id"}),e.jsx("th",{className:"px-3 py-3 w-[35%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%]"})]})}),e.jsx("tbody",{children:a.map((f,h)=>{const x=s[f],g=x.difficulty==="Easy"?"text-dark-green-s":x.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${h%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("div",{className:"mr-2",children:h+1})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("select",{className:" bg-dark-fill-2 outline-none py-1.5 px-2 rounded-lg text-dark-gray-8 font-medium",onChange:b=>{c(Number(b.target.value),h)},children:s.map((b,j)=>e.jsx("option",{value:j,children:b.title},j))})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:x.tags.map(b=>e.jsxs("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:[b.title," "]},b.id))})}),e.jsx("td",{className:`px-3 py-4 ${g}`,children:x.difficulty}),e.jsx("td",{children:e.jsx("button",{className:"mx-auto flex items-center text-3xl cursor-pointer rounded hover:text-dark-pink transition-all",onClick:()=>p(h),children:e.jsx(Se,{})})})]},h)})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"mt-5 py-1 px-3 cursor-pointer rounded  font-medium bg-dark-gray-8 hover:bg-dark-gray-7 transition-all text-dark-layer-2",onClick:m,children:"Add Question"})})]}),e.jsxs("div",{className:" mt-5",children:[e.jsx("h1",{className:"text-xl mt-10 ml-1",children:"Time Limits"}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsx("input",{type:"text",value:o,onChange:f=>l(Number(f.target.value)),className:" bg-dark-fill-2 px-3 py-1.5 w-16 outline-none rounded-lg"}),e.jsx("div",{className:"ml-2 text-lg",children:"Minutes"})]})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("button",{onClick:u,className:"bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Create Game"})})]})},xe=({players:t})=>{const r=[4,3,5,10,1,2,11,8,0,9,6,7];return e.jsx("div",{className:"flex flex-wrap w-[760px] mx-auto justify-left",children:r.map((s,n)=>{var i;const a=t[s];return e.jsx("div",{className:` -mb-[28px] h-[120px] w-[120px] mx-[32px] bg-dark-fill-3 rotate-45 flex justify-center items-center rounded-md
              ${(n===0||n===7)&&" ml-[124px]"}
              ${n===10&&" ml-[215px]"}
              ${a&&"bg-green-200 bg-opacity-40"}
               transition-all duration-300`,children:e.jsx("div",{className:`-rotate-45 ${!a&&"opacity-0"} transition-all duration-300`,children:a&&e.jsxs(e.Fragment,{children:[e.jsx("img",{alt:"image",src:`${T}&seed=${(i=t[s])==null?void 0:i.name}`,className:"h-20 mb-[34px]"}),e.jsx("div",{className:`absolute left-[50%] -translate-x-[50%] bottom-[3px] text-white w-20 break-all text-center max-h-8 overflow-hidden leading-4
             ${a.name.length>10?"text-sm":"font-medium text-md"}`,children:a.name})]})})},n)})})},dt=({gameId:t})=>{const r=d.useRef(M(R)).current,[s,n]=d.useState([]);return d.useEffect(()=>{if(t)return fetch(le,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(a=>a.json()).then(a=>{n(a.players)}),r.emit("ws-host-joinGame",{gameId:t}),r.on("ws-host-playerJoinGame",function(a){n(i=>[...i,{id:a.id,name:a.name,gameId:t}])}),r.on("ws-host-playerExitGame",function(a){n(i=>i.filter(o=>o.id!=a.id))}),()=>{r.off("ws-host-playerExitGame"),r.off("ws-host-playerJoinGame")}},[t,r]),e.jsxs(P.div,{className:"text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"mt-14",children:[e.jsxs("h1",{className:"text-4xl text-center",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7 mt-6",children:"Waiting For Players To Join..."})]}),e.jsx("div",{className:" mt-16",children:e.jsx(xe,{players:s})})]})},mt=({gameId:t,playersCode:r,focusedPlayerId:s,playersProgress:n,setFocusedPlayerId:a})=>{var h;const[i,o]=d.useState(""),l=r.find(x=>x.id===s),[m,c]=d.useState((l==null?void 0:l.lastModifyedProblem)||0),p=(h=n.find(x=>x.id===(l==null?void 0:l.id)))==null?void 0:h.progress,u=()=>{l&&fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:l.id,message:i})}),o("")},f=()=>{fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:-1,message:i})}),o("")};return e.jsx("div",{className:"text-gray-50 flex gap-[12px] px-[10px] mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto relative",children:l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full  shrink rounded-lg overflow-hidden bg-dark-layer-1",children:e.jsx(V,{userCode:l.problems[m].code,readOnly:!0,textLarge:!0})}),e.jsxs("div",{className:"flex flex-col w-[300px] shrink-0 text-white bg-dark-layer-2",children:[e.jsxs("div",{className:"w-full overflow-auto flex flex-col",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-b-[1px] border-dark-fill-2",children:"Problems"}),e.jsx("div",{className:"overflow-y-auto",children:l.problems.map((x,g)=>e.jsxs("div",{className:`flex items-center px-4 py-[7px] text-sm  cursor-pointer w-full h-14 hover:bg-dark-fill-3 ${g===m?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>c(g),children:[e.jsxs("span",{children:[g+1,". ",x.title]}),p&&p.map((b,j)=>e.jsx("span",{className:`text-dark-green-s ml-auto text-[18px] ${b.id===x.id&&b.passed?"block":"hidden"}`,children:e.jsx(te,{})},j))]},g))})]}),e.jsxs("div",{className:"mt-auto h-40",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-t-[1px] border-dark-fill-2",children:"Send Message"}),e.jsx("div",{className:"px-2",children:e.jsx("input",{value:i,onChange:x=>o(x.target.value),onKeyDownCapture:x=>{x.key==="Enter"&&u()},className:" w-full bg-dark-fill-2 rounded-lg outline-none text-lg px-3 py-2 resize-none"})}),e.jsxs("div",{className:"flex px-3 mt-3",children:[e.jsx("button",{className:" px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-gray-6 hover:bg-opacity-80 rounded-lg",onClick:f,children:"Send Group"}),e.jsx("button",{className:"ml-auto px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-green-s hover:bg-opacity-80 rounded-lg",onClick:u,children:"Send"})]})]})]}),e.jsx("div",{className:" absolute text-[24px] rounded-full border-[1.5px] border-white p-1 left-1/2 -translate-x-1/2 top-[30px] opacity-30 hover:opacity-90 transition-all cursor-pointer",onClick:()=>a(void 0),children:e.jsx(D,{})})]})})},xt=({gameId:t})=>{const[r,s]=d.useState([]),[n,a]=d.useState([]),[i,o]=d.useState([]),[l,m]=d.useState(!0),c=d.useRef(M(R)).current,[p,u]=d.useState(void 0),f=()=>{s(h=>(h.sort((x,g)=>{const b=x.progress.reduce((y,v)=>v.passed?y+1:y,0),j=g.progress.reduce((y,v)=>v.passed?y+1:y,0);return b>j?-1:b<j?1:x.finishedAt&&g.finishedAt?new Date(x.finishedAt).getTime()-new Date(g.finishedAt).getTime():0}),[...h]))};return d.useEffect(()=>{fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(h=>h.json()).then(h=>{a(h.problems)}),c.emit("ws-host-joinGame",{gameId:t})},[c]),d.useEffect(()=>(n.length>0&&(fetch(ie,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(h=>h.json()).then(h=>{s(h.progress.map(x=>({id:x.id,name:x.name,finishedAt:x.finishedAt,progress:x.progress?JSON.parse(x.progress):n.map(g=>({id:g.id,passed:!1}))}))),f()}),fetch(Ve,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(h=>h.json()).then(h=>{o(h.playersCode.map(x=>({id:x.id,name:x.name,problems:n.map(g=>{const b=x.problems.findIndex(j=>j.id===g.id);return b===-1?{id:g.id,title:g.title,code:g.boilerplate.replace(/\n\s+/g,`
`)}:{...x.problems[b]}})})))}),c.on("ws-host-updateProgress",function({playerId:h,progress:x,finishedAt:g}){s(b=>(b.forEach(j=>{j.id===h&&(j.progress=x,j.finishedAt=g)}),[...b])),f()}),c.on("ws-host-playerExitGame",function(h){s(x=>x.filter(g=>g.id!=h.id)),o(x=>x.filter(g=>g.id!=h.id))}),c.on("ws-host-playerJoinGame",function(h){s(x=>[...x,{id:h.id,name:h.name,finishedAt:null,progress:n.map(g=>({id:g.id,passed:!1}))}]),o(x=>(x.push({id:h.id,name:h.name,problems:n.map(g=>({id:g.id,title:g.title,code:g.boilerplate.replace(/\n\s+/g,`
`)}))}),[...x]))}),c.on("ws-host-playerUpdateCode",function(h){o(x=>{const g=x.findIndex(b=>b.id===h.id);if(g!==-1){const b=x[g].problems.findIndex(j=>j.id===h.problemId);b!==-1&&(x[g].problems[b].code=h.code,x[g].lastModifyedProblem=b)}return[...x]})})),()=>{c.off("ws-host-updateProgress"),c.off("ws-host-playerJoinGame"),c.off("ws-host-playerExitGame"),c.off("ws-host-playerUpdateCode")}),[n,c]),e.jsxs(P.div,{className:"flex relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${l?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>m(!0),children:e.jsx(L,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0  bg-dark-layer-1 mt-[8px] h-[calc(100vh-64px)] rounded-lg transition-all duration-500
        ${l?"translate-x-0 w-[300px] ml-[8px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:"h-[64px] flex items-center border-b-[1px] border-dark-fill-2 px-3 relative",children:[e.jsxs("h1",{className:"text-xl",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[14px]
             right-[8px]`,onClick:()=>m(!1),children:e.jsx(L,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-128px)] overflow-y-auto overflow-hidden rounded-b-lg",children:r.map((h,x)=>{const g=h.progress.length,b=h.progress.reduce((j,y)=>y.passed?j+1:j,0);return e.jsxs("div",{className:`h-[72px] border-b-[1px] border-dark-fill-2 flex items-center  px-3 cursor-pointer 
                          hover:bg-dark-fill-3 ${p===h.id?"bg-dark-fill-3":"bg-dark-layer-1"}`,onClick:()=>{p===h.id?u(void 0):u(h.id)},children:[e.jsx("div",{className:"text-xl font-semibold text-dark-yellow",children:x+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${h.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:"text-lg ml-3",children:h.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[b,"/",g]})]},x)})})]}),!p&&e.jsx("div",{className:"shrink text-gray-50 mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-[12px] px-[14px]",children:i.map((h,x)=>{const g=h.problems[h.lastModifyedProblem||0];return e.jsxs("div",{className:"h-[300px] w-[calc(50%-10px)] relative rounded-lg bg-dark-layer-1 overflow-hidden cursor-pointer",onClick:()=>u(h.id),children:[e.jsx("div",{className:" absolute bottom-0",children:e.jsx(V,{userCode:g.code,readOnly:!0})}),e.jsxs("div",{className:" absolute top-2 left-3 inline-flex bg-sky-900 items-center rounded-lg px-2 py-1",children:[e.jsx("img",{src:`${T}&seed=${h.name}`,alt:"avatar",className:" h-[26px] mr-1"}),h.name]}),e.jsx("div",{className:" absolute top-2 right-3 inline-flex bg-emerald-900  items-center rounded-lg px-2 py-1",children:g.title})]},x)})})}),p&&e.jsx(mt,{gameId:t,playersCode:i,focusedPlayerId:p,playersProgress:r,setFocusedPlayerId:u})]})},he=({timeLeft:t,setTimeLeft:r})=>{const s=n=>{const a=Math.floor(n/3600),i=Math.floor(n%3600/60),o=n%60;return`${a<10?"0"+a:a}:${i<10?"0"+i:i}:${o<10?"0"+o:o}`};return d.useEffect(()=>{const n=setInterval(()=>{r(a=>a&&(a<=0?0:a-1))},1e3);return()=>clearInterval(n)},[r]),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center p-1 h-8 cursor-default",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})}),e.jsx("div",{children:s(t)})]})})},ht=({gameId:t,currentState:r,setCurrentState:s})=>{const n=$(),[a,i]=d.useState();d.useEffect(()=>{if(r==="GameWatching"&&t){const c=()=>{fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(u=>u.json()).then(u=>{const f=u.endedAt-new Date().getTime();i(Math.floor(f/1e3))})};c();const p=setInterval(()=>{c()},6e4);return()=>clearInterval(p)}},[r,t]);const o=()=>{const c=localStorage.getItem("userData");if(c&&t){const p=JSON.parse(c).access_token;fetch(Ke,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({gameId:t})}).then(u=>{u.status===200?(N("ðŸ”¥ Game Started !"),s("GameWatching")):N.error("Start Game failed")})}},l=()=>{const c=localStorage.getItem("userData");if(c&&t){const p=JSON.parse(c).access_token;fetch(Ye,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({gameId:t})}).then(u=>{u.status===200?n("/"):N.error("Shot down failed")})}},m=()=>{const c=localStorage.getItem("userData");if(c&&t){const p=JSON.parse(c).access_token;fetch(qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({gameId:t})}).then(u=>{u.status===200?s("GameResult"):n("/")})}};return d.useEffect(()=>{r==="GameWatching"&&a&&a<=0&&s("GameResult")},[a,r]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"relative h-11 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:"./gameHost.png",alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:"HOST"})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[r==="GameWatching"&&a&&e.jsx(he,{timeLeft:a,setTimeLeft:i}),r==="PlayersJoining"&&e.jsxs("div",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-green-s font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:o,children:[e.jsx("div",{className:"mr-2",children:"Start Game"}),e.jsx(Q,{})]}),r==="GameWatching"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-yellow font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:m,children:[e.jsx("div",{className:"mr-2",children:"Close Game"}),e.jsx(Q,{})]}),r==="PlayersJoining"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:l,children:[e.jsx("div",{className:"mr-2",children:"Shut Down"}),e.jsx(X,{})]}),r==="GameResult"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:l,children:[e.jsx("div",{className:"mr-2",children:"Leave"}),e.jsx(X,{})]})]})]})})},H=({name:t,place:r})=>e.jsxs("div",{className:"",children:[e.jsx("img",{src:`${T}&seed=${t}`,alt:"avatar",className:"w-24"}),e.jsx("div",{className:`rounded-lg text-center py-[3px] text-dark-layer-1 font-semibold  ${r===1?"bg-amber-200":r===2?"bg-slate-200":" bg-orange-200"}`,children:t})]}),pe=({gameId:t})=>{const[r,s]=d.useState([]),[n,a]=d.useState([]),[i,o]=I(z);d.useEffect(()=>{o(!0),fetch(st,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(m=>m.json()).then(m=>{s(m.players),a(m.problems),o(!1)})},[]);const l=m=>{const c=Math.floor(m/3600),p=Math.floor(m%3600/60),u=m%60;return`${c<10?"0"+c:c}:${p<10?"0"+p:p}:${u<10?"0"+u:u}`};return e.jsx("div",{className:"",children:!i&&e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-center relative h-[400px] w-[600px] mx-auto ",children:[e.jsx(_e,{numberOfPieces:70,width:600,height:400}),r[0]&&e.jsx("div",{className:" absolute top-[75px]",children:e.jsx(H,{name:r[0].name,place:1})}),r[1]&&e.jsx("div",{className:" absolute top-[126px] left-[124px]",children:e.jsx(H,{name:r[1].name,place:2})}),r[2]&&e.jsx("div",{className:" absolute top-[149px] left-[380px]",children:e.jsx(H,{name:r[2].name,place:3})}),e.jsx("img",{src:"podium.png",alt:"",className:" h-[200px] mt-auto",color:"orange"})]}),e.jsxs("table",{className:`${n.length>3?"w-[960px]":"w-[700px]"}  mx-auto mt-8`,children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Place"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Name"}),n.map((m,c)=>e.jsxs("th",{className:"px-3 py-3 w-[12%] font-semibold text-sm",children:[c+1,"-",m.title]},c)),e.jsx("th",{className:"px-3 py-3 w-[12%] font-semibold",children:"Time"})]})}),e.jsx("tbody",{className:"text-white",children:r.map((m,c)=>e.jsxs("tr",{className:`${c%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-8 py-4 text-dark-yellow font-bold",children:c+1}),e.jsx("td",{className:"pl-3 py-4 font-bold",children:m.name}),m.progress.map((p,u)=>e.jsx("td",{className:"pl-3 py-4 text-center",children:p?e.jsx("span",{className:"text-dark-green-s",children:e.jsx(se,{})}):e.jsx("div",{className:"text-dark-pink w-fit",children:e.jsx(Ce,{})})},u)),e.jsx("td",{className:"px-3 py-4 text-dark-gray-7",children:m.timeUsed?l(m.timeUsed):"-"})]},c))})]})]})})},pt=()=>{const t=$(),[r,s]=d.useState(),[n,a]=d.useState("Loading");return d.useEffect(()=>{const i=localStorage.getItem("userData");if(!i)t("/"),N.error("Sign In Time Out");else{const o=JSON.parse(i).access_token;fetch(Ue,{method:"GET",headers:{"content-type":"application/json",Authorization:`Bearer ${o}`}}).then(l=>l.json()).then(l=>{l.founded?(s(l.contestId),a(()=>l.state==="created"?"PlayersJoining":l.state==="started"?"GameWatching":l.state==="closed"?"GameResult":"GameCreating")):a("GameCreating")})}},[]),e.jsxs(e.Fragment,{children:[n==="GameCreating"||n==="Loading"?e.jsx(F,{}):e.jsx(ht,{gameId:r,currentState:n,setCurrentState:a}),n==="GameCreating"&&e.jsx(ct,{setGameId:s,setCurrentState:a}),n==="PlayersJoining"&&r&&e.jsx(dt,{gameId:r}),n==="GameWatching"&&r&&e.jsx(xt,{gameId:r}),n==="GameResult"&&r&&e.jsx(pe,{gameId:r})]})},ut=({setCurrentState:t,setPlayer:r})=>{const[s,n]=d.useState(""),[a,i]=d.useState(""),o=()=>{if(s==="")return N.error("Name can not be empty");if(s.length>20)return N.error("Name too long");if(a==="")return N.error("Game id can not be empty");if(Number(a)>1e5||Number(a)<0)return N.error("Invalid game id");fetch(Xe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:a,playerName:s})}).then(l=>l.status!==200?l.json().then(m=>{throw m}):l.json()).then(l=>{const m={id:l.playerId,gameId:Number(a),name:s};r(m),localStorage.setItem("playerData",JSON.stringify(m)),l.gameState==="created"?t("GameWaiting"):l.gameState==="started"?(N("ðŸ”¥ Game is started !"),t("GamePlaying")):N.error("Game is ended")}).catch(l=>{N.error(l.errors)})};return e.jsxs(P.div,{className:"flex flex-col items-center justify-center mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Join Game"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-lg",children:"Game Id"}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:a,onChange:l=>i(l.target.value)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg",children:"Name "}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:s,onChange:l=>n(l.target.value),onKeyDownCapture:l=>{l.key==="Enter"&&o()}})]}),e.jsx("button",{onClick:o,className:"mt-8 bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Join Game"})]})},ft=({player:t,setCurrentState:r})=>{const s=d.useRef(M(R)).current,[n,a]=d.useState([]),i=$();return d.useEffect(()=>{if(t)return fetch(le,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{a(o.players)}),fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{o.problems.forEach(l=>{localStorage.removeItem(`code?problem_id=${l==null?void 0:l.id}&gameMode`)})}),s.emit("ws-player-joinGame",{gameId:t.gameId}),s.on("ws-host-playerJoinGame",function(o){a(l=>[...l,{id:o.id,name:o.name,gameId:t.gameId}])}),s.on("ws-host-playerExitGame",function(o){a(l=>l.filter(m=>m.id!=o.id))}),s.on("ws-player-hostTerminateGame",function(){N.info("Host terminated game"),localStorage.removeItem("playerData"),i("/")}),s.on("ws-player-hostStartGame",function(){N("ðŸ”¥ Game Started !"),r("GamePlaying")}),()=>{s.off("ws-host-playerExitGame"),s.off("ws-host-playerJoinGame"),s.off("ws-player-hostTerminateGame"),s.off("ws-player-hostStartGame")}},[s]),e.jsx(P.div,{className:"w-11/12 md:w-9/12 mx-auto text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"mt-10",children:[e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7",children:"Game is about to start..."}),e.jsx("div",{className:"mt-16",children:e.jsx(xe,{players:n})})]})})},gt=({player:t,currentState:r,setCurrentState:s})=>{const[n,a]=d.useState(),[i,o]=I(ce),l=$(),m=()=>{(r==="GamePlaying"||r==="GameWaiting")&&t&&(fetch(et,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId,playerId:t.id})}),localStorage.removeItem("playerData")),localStorage.removeItem("playerData"),l("/")};return d.useEffect(()=>{if(r==="GamePlaying"&&t){const c=()=>{fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(u=>u.json()).then(u=>{const f=u.endedAt-new Date().getTime();a(Math.floor(f/1e3))})};c();const p=setInterval(()=>{c()},6e4);return()=>clearInterval(p)}},[r,t]),d.useEffect(()=>{r==="GamePlaying"&&n&&n<=0&&s("GameResult")},[n,r]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-10 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:`${T}&seed=${t.name}`,alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[r==="GamePlaying"&&e.jsxs("div",{className:"text-xl relative cursor-pointer flex h-9 w-9  justify-center items-center",title:`${i?"Turn off bullets":"Turn on bullets"}`,onClick:()=>{o(c=>!c)},children:[e.jsx("div",{className:`absolute text-dark-gray-6 text-3xl top-1/2 -translate-x-1/2 left-1/2 -translate-y-1/2
                            ${i?"opacity-0":"opacity-100"} transition-all`,children:e.jsx(Pe,{})}),e.jsx(Ge,{})]}),r==="GamePlaying"&&n&&e.jsx(he,{timeLeft:n,setTimeLeft:a}),e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink hover:bg-dark-fill-2 transition-all",onClick:m,children:[e.jsx("div",{className:"mr-2",children:"Exit"}),e.jsx(ee,{})]})]})]})]})})},jt=({player:t})=>{const r=d.useRef(M(R)).current,[s,n]=d.useState([]),a=["bg-sky-500","bg-pink-500","bg-yellow-500","bg-slate-500","bg-green-500","bg-purple-500"];d.useEffect(()=>(r.emit("ws-player-joinGame",{gameId:t.gameId}),r.on("ws-player-sendMessageToPlayer",function(o){(o.id===-1||o.id===t.id)&&(console.log("Host message",o.message),i(o.message))}),()=>{r.off("ws-player-sendMessageToPlayer")}),[r]);const i=o=>{const l=0+Math.random()*400,m=re.uniqueId(),c=16+Math.floor(Math.random()*8),p=a[Math.floor(Math.random()*a.length)];n(u=>[...u,{message:o,height:l,id:m,duration:c,colorName:p}]),setTimeout(()=>{n(u=>u.filter(f=>f.id!==m))},c*1e3)};return e.jsx("div",{className:"bg-transparent h-[calc(100vh-48px)] w-full absolute overflow-hidden top-0 z-40 pointer-events-none",children:s.map(o=>e.jsxs("div",{className:"bullet",style:{top:o.height,animationDuration:`${o.duration}s`},children:[e.jsxs("div",{className:`bg-opacity-50 ${o.colorName} flex shrink-0 items-center py-0.5 pl-3 pr-2 rounded-l-3xl rounded-r-lg`,children:[e.jsx("img",{src:"./gameHost.png",alt:"GameHost",className:"h-7 mr-2"}),o.message]}),e.jsx("img",{src:"fire.gif",className:" rotate-90 h-8 opacity-90"})]},o.id))})},yt=({player:t,setCurrentState:r})=>{const[s,n]=d.useState([]),[a,i]=d.useState(0),[o,l]=d.useState(),[m,c]=d.useState([]),p=d.useRef(M(R)).current,u=ae(ce),[f,h]=d.useState(!0),x=()=>{c(j=>(j.sort((y,v)=>{const S=y.progress.reduce((O,J)=>J.passed?O+1:O,0),C=v.progress.reduce((O,J)=>J.passed?O+1:O,0);return S>C?-1:S<C?1:y.finishedAt&&v.finishedAt?new Date(y.finishedAt).getTime()-new Date(v.finishedAt).getTime():0}),[...j]))};d.useEffect(()=>(fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{n(j.problems)}),p.emit("ws-player-joinGame",{gameId:t.gameId}),p.on("ws-player-hostCloseGame",function(){r("GameResult"),N.info("Host terminated game")}),p.on("ws-host-playerJoinGame",function(j){c(y=>[...y,{id:j.id,name:j.name,finishedAt:null,progress:s.map(v=>({id:v.id,passed:!1}))}])}),p.on("ws-host-updateProgress",function({playerId:j,progress:y,finishedAt:v}){c(S=>(S.forEach(C=>{C.id===j&&(C.progress=y,C.finishedAt=v)}),[...S])),x()}),()=>{p.off("ws-player-hostCloseGame"),p.off("ws-host-playerJoinGame"),p.off("ws-host-updateProgress")}),[p]),d.useEffect(()=>{s.length>0&&t&&fetch(ie,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{c([]),j.progress.forEach(y=>{y.id===t.id&&l({id:y.id,name:y.name,finishedAt:y.finishedAt,progress:y.progress?JSON.parse(y.progress):s.map(v=>({id:v.id,passed:!1}))}),c(v=>[...v,{id:y.id,name:y.name,finishedAt:y.finishedAt,progress:y.progress?JSON.parse(y.progress):s.map(S=>({id:S.id,passed:!1}))}])}),x()})},[s]);const g=(j,y,v,S,C,O)=>{p.emit("ws-player-updateCode",{gameId:j,playerId:y,playerName:v,problemId:S,problemTitle:C,code:O})},b=d.useCallback(re.debounce(g,500),[]);return e.jsxs(P.div,{className:"relative flex w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[u&&e.jsx(jt,{player:t}),e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${f?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>h(!0),children:e.jsx(L,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0 bg-dark-layer-2 h-[calc(100vh-48px)] transition-all duration-500
        ${f?"translate-x-0 w-[260px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:" h-[40px] flex items-end border-dark-fill-2 px-3 relative",children:[e.jsx("h1",{className:"text-xl",children:"Rank"}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[8px]
             right-[8px]`,onClick:()=>h(!1),children:e.jsx(L,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-96px)] overflow-y-auto overflow-hidden rounded-b-lg",children:m.map((j,y)=>{const v=j.progress.length,S=j.progress.reduce((C,O)=>O.passed?C+1:C,0);return e.jsxs("div",{className:"w-full h-[56px] flex items-center px-[12px] mt-[8px]",children:[e.jsx("div",{className:`text-xl font-semibold ${j.id===t.id?"text-dark-pink":"text-dark-yellow"}`,children:y+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${j.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:`text-lg ml-3 ${j.id===t.id?"font-semibold":"font-normal"}`,children:j.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[S,"/",v]})]},y)})})]}),e.jsx("div",{className:"w-full",children:s.length>0&&o&&e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsxs("div",{className:"bg-dark-layer-1",children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-auto no-scrollbar",children:s.map((j,y)=>e.jsxs("div",{className:`flex items-center rounded-t-[5px] px-4 py-[7px] text-sm cursor-pointer ${y===a?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>i(y),children:[o&&o.progress.map((v,S)=>e.jsx("span",{className:`text-dark-green-s mr-1 ml-[-8px] ${v.id===j.id&&v.passed?"block":"hidden"}`,children:e.jsx(te,{})},S)),e.jsxs("span",{className:"  whitespace-nowrap",children:["Prob ",y+1]})]},y))}),e.jsx(me,{problem:s[a]})]}),e.jsx(de,{problem:s[a],gameMode:!0,gameData:{player:t,myProgress:o,setMyProgress:l,updateCode:b}})]})})]})},Nt=()=>{const[t,r]=I(z),[s,n]=d.useState("GameJoining"),[a,i]=d.useState();return d.useEffect(()=>{r(!0);const o=localStorage.getItem("playerData");if(!o)n("GameJoining"),r(!1);else{const l=JSON.parse(o);fetch(Ze,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({playerId:l.id,contestId:l.gameId})}).then(m=>m.json()).then(m=>{i(l),r(!1),m.founded?n(()=>m.state==="created"?"GameWaiting":m.state==="started"?"GamePlaying":m.state==="closed"?"GameResult":"GameJoining"):(localStorage.removeItem("playerData"),n("GameJoining"))})}},[]),e.jsxs(e.Fragment,{children:[s==="GameJoining"?e.jsx(F,{}):e.jsx(gt,{player:a,currentState:s,setCurrentState:n}),e.jsxs(P.div,{className:`text-dark-gray-8 ${t&&"opacity-0"} transition-all`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[s==="GameJoining"&&e.jsx(ut,{setCurrentState:n,setPlayer:i}),s==="GameWaiting"&&a&&e.jsx(ft,{setCurrentState:n,player:a}),s==="GamePlaying"&&a&&e.jsx(yt,{setCurrentState:n,player:a}),s==="GameResult"&&a&&e.jsx(pe,{gameId:a.gameId})]})]})},bt=()=>{const[t,r]=I(z),[s,n]=d.useState({isOpen:!1,videoId:""}),[a,i]=d.useState([]),[o,l]=d.useState(JSON.parse(localStorage.getItem("problemStatus")||"{}"));d.useEffect(()=>{r(!0),fetch(ne,{method:"GET"}).then(c=>c.json()).then(c=>{i(c),r(!1)})},[]);const m=()=>{n({isOpen:!1,videoId:""})};return e.jsx(e.Fragment,{children:!t&&e.jsx(P.div,{className:"relative overflow-x-auto mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:a.length>0&&e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Status"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Solution"})]})}),e.jsx("tbody",{className:"text-white",children:a!==void 0&&a.map((c,p)=>{const u=c.difficulty==="Easy"?"text-dark-green-s":c.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${p%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-4 py-4 whitespace-nowrap text-dark-green-s",children:e.jsx("div",{className:" cursor-pointer h-6",onClick:()=>{l(f=>(f[c.id]=!f[c.id],localStorage.setItem("problemStatus",JSON.stringify(f)),{...f}))},children:o[c.id]&&e.jsx(se,{width:"18"})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx(_,{className:"hover:text-blue-600",to:`/problem?id=${c.id}`,children:c.title})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:c.tags.map(f=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:f.title},f.id))})}),e.jsx("td",{className:`px-3 py-4 ${u}`,children:c.difficulty}),e.jsx("td",{className:"px-3 py-4",children:c.solutionVideo?e.jsx(Oe,{fontSize:"28",className:"cursor-pointer hover:text-red-600",onClick:()=>n({isOpen:!0,videoId:c.solutionVideo})}):e.jsx("p",{className:"text-gray-400",children:"Coming soon"})})]},p)})}),s.isOpen&&e.jsxs("tfoot",{className:"fixed top-0 left-0 h-screen w-screen flex items-center justify-center",children:[e.jsx("div",{className:"bg-black z-10 opacity-70 top-0 left-0 w-screen h-screen absolute",onClick:m}),e.jsx("div",{className:"w-full z-50 h-full px-6 relative max-w-4xl",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center relative",children:e.jsxs("div",{className:"w-full relative",children:[e.jsx(D,{fontSize:"35",className:"cursor-pointer absolute -top-16 right-0 text-dark-gray-8",onClick:m}),e.jsx(Me,{videoId:s.videoId,loading:"lazy",iframeClassName:"w-full min-h-[500px]"})]})})})]})]})})})},vt=()=>{const t=ae(A),r=$(),s=()=>{t.isLogin?r("/gameHost"):N.error("Please Sign In")};return e.jsxs("div",{children:[e.jsx(F,{}),e.jsx(P.div,{className:"block h-[calc(100vh-48px)] overflow-y-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"w-11/12 md:w-9/12 mx-auto pt-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1",children:"Let's Code!"}),e.jsxs("div",{className:" flex mt-5",children:[e.jsx("button",{onClick:s,children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105 flex items-end justify-center",children:[e.jsx("img",{src:"createGame.svg",className:"h-24 object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Create Game"})]})}),e.jsx(_,{to:"gamePlayer",className:" ml-8",children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105",children:[e.jsx("img",{src:"joinGame.svg",className:"h-full w-full object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Join Game"})]})})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1 mt-5",children:"Problems"}),e.jsx(bt,{})]})]})})]})},wt=()=>{const t=W(A),[r,s]=d.useState(""),[n,a]=d.useState(""),i=o=>{if(o.preventDefault(),r==="")return N.error("Email can not be empty");if(n==="")return N.error("Password can not be empty");fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"native",email:r,password:n})}).then(l=>l.status!==200?l.json().then(m=>{throw m}):l.json()).then(l=>{N.success("Sign In Successfully"),localStorage.setItem("userData",JSON.stringify(l.data)),s(""),a(""),t(m=>({...m,isOpen:!1,isLogin:!0}))}).catch(l=>{N.error(l.errors)})};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign In"}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:r,name:"email",onChange:o=>{s(o.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:n,name:"password",onChange:o=>{a(o.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{className:"w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s mt-6",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-5",children:["Not Registered?",e.jsx("button",{onClick:()=>{t(o=>({...o,type:"register"}))},className:"text-blue-400 hover:underline ml-3",children:"Create Account"})]})]})},kt=()=>{const t=W(A),[r,s]=d.useState(""),[n,a]=d.useState(""),[i,o]=d.useState(""),[l,m]=d.useState(""),c=p=>{if(p.preventDefault(),r==="")return N.error("Name can not be empty");if(n==="")return N.error("Email can not be empty");if(i==="")return N.error("Password can not be empty");if(l!==i)return N.error("Passwords are not matched");fetch(De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:n,password:i})}).then(u=>u.json()).then(u=>{u.errors?N.error(u.errors):(N.success("Sign Up Successfully"),localStorage.setItem("userData",JSON.stringify(u.data)),s(""),a(""),o(""),m(""),t(f=>({...f,isOpen:!1,isLogin:!0})))}).catch(u=>{N.error(u.errors)})};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign Up"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Name"}),e.jsx("input",{type:"name",value:r,onChange:p=>s(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:n,onChange:p=>a(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:i,onChange:p=>o(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Confirm Password"}),e.jsx("input",{type:"password",value:l,onChange:p=>m(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]})," ",e.jsx("button",{className:" mt-5 w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-3",children:["Already have an account",e.jsx("button",{className:"text-blue-300 hover:underline ml-3",onClick:()=>{t(p=>({...p,type:"login"}))},children:"Sign In"})]})]})},St=()=>{const[t,r]=d.useState(""),s=W(A),[n,a]=d.useState(),i=$(),o=l=>{s(m=>({...m,isOpen:!1})),i(`/problem?id=${l}`)};return d.useEffect(()=>{const l=localStorage.getItem("userData");if(l){const m=JSON.parse(l);r(m.user.name);const c=m.access_token;fetch(Qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${c}`}}).then(p=>p.json()).then(p=>{a(p)})}else N.error("Login timeout"),s(m=>({...m,isOpen:!1,isLogin:!1}))},[]),e.jsxs("div",{className:" w-[800px] h-[560px] bg-dark-layer-1 px-10",children:[e.jsxs("div",{className:" h-[100px] mt-[20px] px-3 text-white font-semibold text-2xl flex items-center tracking-wide",children:[e.jsxs("span",{className:" text-dark-yellow mr-[10px]",children:[t,"'s"]}),"Host History"]}),e.jsxs("div",{className:"h-[420px] overflow-y-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-dark-gray-8 text-left border-b-[1px] h-[60px]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-2 w-[10%]",children:"GameId"}),e.jsx("th",{className:"py-3 px-2 w-[25%]",children:"Problems"}),e.jsx("th",{className:"py-3 px-2 w-[30%]",children:"Players"}),e.jsx("th",{className:"py-3 px-2 w-[15%] text-center",children:"Time"})]})}),e.jsx("tbody",{className:"text-dark-gray-8 ",children:n&&n.length>0&&n.map((l,m)=>e.jsxs("tr",{className:`${m%2===1?"bg-dark-fill-3":""}`,children:[e.jsx("td",{className:"py-3 px-3",children:l.contestId}),e.jsx("td",{className:"py-3 px-2",children:l.problems.map((c,p)=>e.jsx("div",{className:"font-semibold leading-7 hover:text-blue-500 transition-all cursor-pointer",onClick:()=>o(c.id),children:c.title},p))}),e.jsx("td",{className:"py-4 px-2 flex flex-wrap",children:l.players.map((c,p)=>e.jsxs("div",{className:"mr-[12px] mb-1 flex items-center",children:[e.jsx("img",{src:`${T}&seed=${c.name}`,className:"h-[25px] mr-[4px]"}),c.name]},p))}),e.jsxs("td",{className:"py-3 text-center text-dark-gray-7",children:[e.jsx("div",{children:new Date(l.startedAt).toLocaleDateString()}),e.jsx("div",{children:new Date(l.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},m))})]}),n&&n.length===0&&e.jsx("div",{className:"h-[300px] w-full items-center justify-center flex text-xl tracking-wide text-dark-gray-7",children:"You have no host history"})]})]})},Ct=()=>{const[t,r]=I(A),s=()=>{r(n=>({...n,isOpen:!1}))};return e.jsxs("div",{children:[e.jsx("div",{className:`z-40 absolute top-0 w-full h-full flex items-center justify-center bg-black transition-all duration-500 ${t.isOpen?" opacity-50 ":"pointer-events-none opacity-0"}`,onClick:s}),e.jsxs("div",{className:`w-fit absolute left-[50%] translate-y-[-50%] translate-x-[-50%] flex justify-center z-50 rounded-lg overflow-hidden
        transition-all duration-500 ${t.isOpen?"top-[50%] opacity-100":"top-[-60%] opacity-0"} `,children:[e.jsx("button",{className:"absolute bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center text-white right-[5px] top-[5px]",children:e.jsx(D,{className:"h-6 w-6",onClick:s})}),t.type==="register"&&e.jsx(kt,{}),t.type==="login"&&e.jsx(wt,{}),t.type==="profile"&&e.jsx(St,{})]})]})};function Pt(){return e.jsx(ye,{children:e.jsxs("div",{className:"bg-dark-layer-2 min-h-screen relative",children:[e.jsx(Te,{position:"top-center",autoClose:2500,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),e.jsx(Ct,{}),e.jsxs(Le,{children:[e.jsx(B,{path:"/",element:e.jsx(vt,{})}),e.jsx(B,{path:"problem",element:e.jsx(ot,{})}),e.jsx(B,{path:"gameHost",element:e.jsx(pt,{})}),e.jsx(B,{path:"gamePlayer",element:e.jsx(Nt,{})})]})]})})}ge.createRoot(document.getElementById("root")).render(e.jsx(Ee,{children:e.jsx(Pt,{})}));
