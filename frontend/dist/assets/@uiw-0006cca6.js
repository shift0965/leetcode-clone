import{_ as G,a as q}from"./@babel-df62547b.js";import{a as e}from"./@lezer-b3acbd76.js";import{E as g,H as J,s as R,c as P,d as Q,a as X,h as Y,f as Z,b as $,l as ee,e as te,g as ae,i as re,j as ie,k as oe,m as ne,n as se,o as T,p as ce,q as le,r as fe,t as ue,u as de,v as he,w as ge,x as me,y as pe,z as be,A as U,B as ye,C as Se,D as ve,F as ke,S as xe}from"./@codemirror-4e45e905.js";import{r as l,j as Ce}from"./react-bb1a8b08.js";var Ee=i=>{var{theme:a,settings:t={},styles:r=[]}=i,o={".cm-gutters":{}},f={};t.background&&(f.backgroundColor=t.background),t.foreground&&(f.color=t.foreground),(t.background||t.foreground)&&(o["&"]=f),t.fontFamily&&(o["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(o[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(o[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(o[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(o[".cm-content"]={caretColor:t.caret},o[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var c={};t.gutterActiveForeground&&(c.color=t.gutterActiveForeground),t.lineHighlight&&(o[".cm-activeLine"]={backgroundColor:t.lineHighlight},c.backgroundColor=t.lineHighlight),o[".cm-activeLineGutter"]=c,t.selection&&(o["&.cm-focused .cm-selectionBackground, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={backgroundColor:t.selection}),t.selectionMatch&&(o["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var d=g.theme(o,{dark:a==="dark"}),s=J.define(r),m=[d,R(s)];return m},Ne={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'};function Be(i){var{theme:a="dark",settings:t={},styles:r=[]}=i||{};return Ee({theme:a,settings:G({},Ne,t),styles:[{tag:[e.keyword,e.operatorKeyword,e.modifier,e.color,e.constant(e.name),e.standard(e.name),e.standard(e.tagName),e.special(e.brace),e.atom,e.bool,e.special(e.variableName)],color:"#569cd6"},{tag:[e.controlKeyword,e.moduleKeyword],color:"#c586c0"},{tag:[e.name,e.deleted,e.character,e.macroName,e.propertyName,e.variableName,e.labelName,e.definition(e.name)],color:"#9cdcfe"},{tag:e.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[e.typeName,e.className,e.tagName,e.number,e.changed,e.annotation,e.self,e.namespace],color:"#4ec9b0"},{tag:[e.function(e.variableName),e.function(e.propertyName)],color:"#dcdcaa"},{tag:[e.number],color:"#b5cea8"},{tag:[e.operator,e.punctuation,e.separator,e.url,e.escape,e.regexp],color:"#d4d4d4"},{tag:[e.regexp],color:"#d16969"},{tag:[e.special(e.string),e.processingInstruction,e.string,e.inserted],color:"#ce9178"},{tag:[e.angleBracket],color:"#808080"},{tag:e.strong,fontWeight:"bold"},{tag:e.emphasis,fontStyle:"italic"},{tag:e.strikethrough,textDecoration:"line-through"},{tag:[e.meta,e.comment],color:"#6a9955"},{tag:e.link,color:"#6a9955",textDecoration:"underline"},{tag:e.invalid,color:"#ff0000"},...r]})}var we=Be(),j=function(a){a===void 0&&(a={});var t=[];a.closeBracketsKeymap!==!1&&(t=t.concat(P)),a.defaultKeymap!==!1&&(t=t.concat(Q)),a.searchKeymap!==!1&&(t=t.concat(X)),a.historyKeymap!==!1&&(t=t.concat(Y)),a.foldKeymap!==!1&&(t=t.concat(Z)),a.completionKeymap!==!1&&(t=t.concat($)),a.lintKeymap!==!1&&(t=t.concat(ee));var r=[];return a.lineNumbers!==!1&&r.push(te()),a.highlightActiveLineGutter!==!1&&r.push(ae()),a.highlightSpecialChars!==!1&&r.push(re()),a.history!==!1&&r.push(ie()),a.foldGutter!==!1&&r.push(oe()),a.drawSelection!==!1&&r.push(ne()),a.dropCursor!==!1&&r.push(se()),a.allowMultipleSelections!==!1&&r.push(T.allowMultipleSelections.of(!0)),a.indentOnInput!==!1&&r.push(ce()),a.syntaxHighlighting!==!1&&r.push(R(le,{fallback:!0})),a.bracketMatching!==!1&&r.push(fe()),a.closeBrackets!==!1&&r.push(ue()),a.autocompletion!==!1&&r.push(de()),a.rectangularSelection!==!1&&r.push(he()),a.crosshairCursor!==!1&&r.push(ge()),a.highlightActiveLine!==!1&&r.push(me()),a.highlightSelectionMatches!==!1&&r.push(pe()),a.tabSize&&typeof a.tabSize=="number"&&r.push(be.of(" ".repeat(a.tabSize))),r.concat([U.of(t.flat())]).filter(Boolean)},Ke=g.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Me=function(a){a===void 0&&(a={});var{indentWithTab:t=!0,editable:r=!0,readOnly:o=!1,theme:f="light",placeholder:c="",basicSetup:d=!0}=a,s=[];switch(t&&s.unshift(U.of([ye])),d&&(typeof d=="boolean"?s.unshift(j()):s.unshift(j(d))),c&&s.unshift(Se(c)),f){case"light":s.push(Ke);break;case"dark":s.push(ve);break;case"none":break;default:s.push(f);break}return r===!1&&s.push(g.editable.of(!1)),o&&s.push(T.readOnly.of(!0)),[...s]},We=i=>({line:i.state.doc.lineAt(i.state.selection.main.from),lineCount:i.state.doc.lines,lineBreak:i.state.lineBreak,length:i.state.doc.length,readOnly:i.state.readOnly,tabSize:i.state.tabSize,selection:i.state.selection,selectionAsSingle:i.state.selection.asSingle().main,ranges:i.state.selection.ranges,selectionCode:i.state.sliceDoc(i.state.selection.main.from,i.state.selection.main.to),selections:i.state.selection.ranges.map(a=>i.state.sliceDoc(a.from,a.to)),selectedText:i.state.selection.ranges.some(a=>!a.empty)}),z=ke.define();function He(i){var{value:a,selection:t,onChange:r,onStatistics:o,onCreateEditor:f,onUpdate:c,extensions:d=[],autoFocus:s,theme:m="light",height:C="",minHeight:p="",maxHeight:E="",placeholder:N="",width:B="",minWidth:K="",maxWidth:M="",editable:W=!0,readOnly:H=!1,indentWithTab:F=!0,basicSetup:L=!0,root:D,initialState:v}=i,[b,O]=l.useState(),[n,h]=l.useState(),[y,S]=l.useState(),w=g.theme({"&":{height:C,minHeight:p,maxHeight:E,width:B,minWidth:K,maxWidth:M},"& .cm-scroller":{height:"100% !important"}}),I=g.updateListener.of(u=>{if(u.docChanged&&typeof r=="function"&&!u.transactions.some(_=>_.annotation(z))){var x=u.state.doc,A=x.toString();r(A,u)}o&&o(We(u))}),V=Me({theme:m,editable:W,readOnly:H,placeholder:N,indentWithTab:F,basicSetup:L}),k=[I,w,...V];return c&&typeof c=="function"&&k.push(g.updateListener.of(c)),k=k.concat(d),l.useEffect(()=>{if(b&&!y){var u={doc:a,selection:t,extensions:k},x=v?T.fromJSON(v.json,u,v.fields):T.create(u);if(S(x),!n){var A=new g({state:x,parent:b,root:D});h(A),f&&f(A,x)}}return()=>{n&&(S(void 0),h(void 0))}},[b,y]),l.useEffect(()=>O(i.container),[i.container]),l.useEffect(()=>()=>{n&&(n.destroy(),h(void 0))},[n]),l.useEffect(()=>{s&&n&&n.focus()},[s,n]),l.useEffect(()=>{n&&n.dispatch({effects:xe.reconfigure.of(k)})},[m,d,C,p,E,B,K,M,N,W,H,F,L,r,c]),l.useEffect(()=>{if(a!==void 0){var u=n?n.state.doc.toString():"";n&&a!==u&&n.dispatch({changes:{from:0,to:u.length,insert:a||""},annotations:[z.of(!0)]})}},[a,n]),{state:y,setState:S,view:n,setView:h,container:b,setContainer:O}}var Fe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Le=l.forwardRef((i,a)=>{var{className:t,value:r="",selection:o,extensions:f=[],onChange:c,onStatistics:d,onCreateEditor:s,onUpdate:m,autoFocus:C,theme:p="light",height:E,minHeight:N,maxHeight:B,width:K,minWidth:M,maxWidth:W,basicSetup:H,placeholder:F,indentWithTab:L,editable:D,readOnly:v,root:b,initialState:O}=i,n=q(i,Fe),h=l.useRef(null),{state:y,view:S,container:w}=He({container:h.current,root:b,value:r,autoFocus:C,theme:p,height:E,minHeight:N,maxHeight:B,width:K,minWidth:M,maxWidth:W,basicSetup:H,placeholder:F,indentWithTab:L,editable:D,readOnly:v,selection:o,onChange:c,onStatistics:d,onCreateEditor:s,onUpdate:m,extensions:f,initialState:O});if(l.useImperativeHandle(a,()=>({editor:h.current,state:y,view:S}),[h,w,y,S]),typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var I=typeof p=="string"?"cm-theme-"+p:"cm-theme";return Ce.jsx("div",G({ref:h,className:""+I+(t?" "+t:"")},n))});Le.displayName="CodeMirror";export{Le as R,we as v};
