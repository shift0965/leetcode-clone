import{r as d,j as e}from"./react-bb1a8b08.js";import{c as ye}from"./react-dom-b05b0288.js";import{L as z,u as be,B as Ne}from"./react-router-dom-6c3e7987.js";import{F as ve,a as we,b as se,B as M,I as ke,A as Se,c as Ce,C as Pe,d as ae,e as W,f as Z,g as ee,h as re,i as Ge,j as Oe,G as Ee,k as Te,l as Ie,m as $e}from"./react-icons-c7bbb99d.js";import{R as Y,a as E,b as F,c as le,d as Ae}from"./recoil-7bf270a0.js";import{Q as j,k as Le}from"./react-toastify-ca6d5611.js";import{S as V}from"./react-split-394c0406.js";import{G as Je,E as Me}from"./@codemirror-4e45e905.js";import{R as _e,v as Re}from"./@uiw-0006cca6.js";import{a as T,d as Be,e as J,f as Fe}from"./react-router-9c58481d.js";import{m as O}from"./framer-motion-ca35d016.js";import{l as _}from"./socket.io-client-5e3fa801.js";import{C as ze}from"./react-confetti-4487dd03.js";import{l as ne}from"./lodash-8f34d9d6.js";import{Y as De}from"./react-youtube-4df3b629.js";import"./fast-deep-equal-ca765bc5.js";import"./scheduler-765c72db.js";import"./@remix-run-e5357272.js";import"./clsx-1229b3e0.js";import"./prop-types-e0d21109.js";import"./split.js-822f4990.js";import"./@lezer-b3acbd76.js";import"./crelt-7bb88e1d.js";import"./style-mod-ae491175.js";import"./w3c-keyname-9fb136d3.js";import"./@babel-df62547b.js";import"./engine.io-client-b8dcd8ee.js";import"./engine.io-parser-a5b7cb40.js";import"./@socket.io-3e1df240.js";import"./socket.io-parser-44417fca.js";import"./youtube-player-63f3f564.js";import"./sister-57707ffb.js";import"./load-script-d550e3b0.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const S="",He=":3001",ie=`${S}/api/1.0/problems/`,Ue=`${S}/api/1.0/problems/details`,We=`${S}/api/1.0/workspace/run/example`,Ye=`${S}/api/1.0/workspace/run/hidden`,Ve=`${S}/api/1.0/user/signin`,Ke=`${S}/api/1.0/user/signup`,qe=`${S}/api/1.0/contest/hostCheckGame`,Qe=`${S}/api/1.0/contest/hostCreateGame`,Xe=`${S}/api/1.0/contest/hostTerminateGame`,Ze=`${S}/api/1.0/contest/hostStartGame`,et=`${S}/api/1.0/contest/hostGetPlayersCode`,te=`${S}/api/1.0/contest/hostSendMessage`,tt=`${S}/api/1.0/contest/hostCloseGame`,st=`${S}/api/1.0/contest/hostGetHistory`,at=`${S}/api/1.0/contest/hostClearHistory`,rt=`${S}/api/1.0/contest/playerJoinGame`,lt=`${S}/api/1.0/contest/playerCheckGame`,A="https://api.dicebear.com/6.x/avataaars/svg?size=64",nt=`${S}/api/1.0/contest/playerExitGame`,it=`${S}/api/1.0/contest/playerSubmit`,oe=`${S}/api/1.0/contest/getPlayers`,K=`${S}/api/1.0/contest/getProblems`,ce=`${S}/api/1.0/contest/getPlayersProgress`,de=`${S}/api/1.0/contest/getTimeLimit`,ot=`${S}/api/1.0/contest/getGameResult`,R=He,ct=()=>{const[t,a]=d.useState(!1),[s,l]=d.useState(0),r=n=>{const i=Math.floor(n/3600),o=Math.floor(n%3600/60),p=n%60;return`${i<10?"0"+i:i}:${o<10?"0"+o:o}:${p<10?"0"+p:p}`};return d.useEffect(()=>{let n;return t&&(n=setInterval(()=>{l(i=>i+1)},1e3)),()=>clearInterval(n)},[t]),e.jsx("div",{children:t?e.jsxs("button",{className:"flex items-center space-x-2 bg-dark-fill-3 p-1.5 cursor-pointer rounded hover:bg-dark-fill-2","aria-label":"stop timer",onClick:()=>{a(!1),l(0)},children:[e.jsx("div",{children:r(s)}),e.jsx(ve,{})]}):e.jsx("button",{className:"flex items-center p-1 h-8 hover:bg-dark-fill-3 rounded cursor-pointer","aria-label":"start timer",onClick:()=>a(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})})})})},$=Y({key:"authModalState",default:{isOpen:!1,type:"login",isLogin:!1}}),q=Y({key:"bulletSwitchState",default:!0}),B=Y({key:"loadingState",default:!0}),D=({isWorkspace:t=!1})=>{const a=()=>{localStorage.removeItem("userData"),l(n=>({...n,isLogin:!1})),j.success("Sign Out Successfully ")},[s,l]=E($),r=()=>{l(n=>({...n,isOpen:!0,type:"login"}))};return d.useEffect(()=>{const n=localStorage.getItem("userData");n?JSON.parse(n).access_expired>new Date().getTime()/1e3?l(o=>({...o,isLogin:!0})):(localStorage.removeItem("userData"),l(o=>({...o,isLogin:!1}))):l(i=>({...i,isLogin:!1}))},[]),e.jsx("nav",{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",children:e.jsxs("div",{className:`flex w-full items-center justify-between ${t?"":"max-w-[1200px] mx-auto"}`,children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(z,{to:"/",className:" block w-[100px]","aria-label":"letscode",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[t&&e.jsx(ct,{}),s.isLogin?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" relative flex items-center text-2xl py-1 cursor-pointer","aria-label":"profile",onClick:()=>l(n=>({...n,isOpen:!0,type:"profile"})),children:e.jsx(we,{})}),e.jsx("button",{"aria-label":"log out",className:"bg-dark-fill-3 py-1.5 px-3 cursor-pointer rounded text-brand-orange hover:bg-dark-fill-2 transition-all",onClick:a,children:e.jsx(se,{})})]}):e.jsx("button",{className:" bg-dark-fill-3 py-1 px-2 cursor-pointer rounded","aria-label":"sign in",onClick:r,children:"Sign In"})]})]})})},dt=({handleRun:t,handleSubmit:a,splitRatio:s,pending:l,setSplitRatio:r})=>e.jsx("div",{className:"flex bg-dark-layer-1 absolute bottom-0 z-10 w-full",children:e.jsxs("div",{className:"mx-5 my-[10px] flex justify-between w-full",children:[e.jsx("div",{className:"mr-2 flex flex-1 flex-nowrap items-center space-x-4",children:l?e.jsx("div",{className:"px-3 py-1.5 font-medium text-dark-label-2 items-center transition-all inline-flex text-sm",children:"Pending..."}):e.jsxs("button",{"aria-label":"toggle result area",className:"px-3 py-1.5 font-medium items-center transition-all inline-flex bg-dark-fill-3 text-sm hover:bg-dark-fill-2 text-dark-label-2 rounded-lg pl-3 pr-2",onClick:()=>{r(n=>n>90?50:100)},children:["Console",e.jsx("div",{className:`ml-1 transform transition duration-200 ease-in-out flex items-center ${s>90?"rotate-0":"rotate-180"}`,children:e.jsx(M,{className:"fill-gray-6 mx-1 fill-dark-gray-6"})})]})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx("button",{"aria-label":"run",className:`px-3 py-1.5 text-sm font-medium items-center whitespace-nowrap transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 text-dark-label-2 rounded-lg 
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:t,disabled:l,children:"Run"}),e.jsx("button",{"aria-label":"submit",className:`px-3 py-1.5 font-medium items-center transition-all focus:outline-none inline-flex text-sm text-white bg-dark-green-s hover:bg-green-3 rounded-lg
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:a,disabled:l,children:"Submit"})]})]})}),I=({value:t,label:a})=>{const s=t===void 0?"undefined":typeof t=="string"?t:JSON.stringify(t);return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-4 text-white",children:[a," ="]}),e.jsx("div",{className:"w-full cursor-text rounded-lg px-3 py-[8px] bg-dark-fill-3 text-white mt-2 min-h-[40px]",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:s})})]})},mt=({problem:t,showTestcases:a})=>{const[s,l]=d.useState(0);return e.jsxs("div",{className:`${a?"block":"hidden"} py-3`,children:[e.jsx("div",{className:"flex",children:t.exampleCases.map((r,n)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>l(n),children:e.jsx("div",{className:"flex flex-wrap items-center",children:e.jsxs("div",{className:`items-center text-sm font-semibold transition-all focus:outline-none inline-flex  hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${s===n?"text-white bg-dark-fill-3":"text-gray-400"}
                `,children:["Case ",n+1]})})},`case ${n}`))}),e.jsx("div",{className:"mt-4",children:t.exampleCases.map((r,n)=>e.jsx("div",{className:`${n===s?"block":"hidden"}`,children:e.jsx("div",{className:"mt-4",children:t.inputKeys.map((i,o)=>{var p;return e.jsx(I,{label:i,value:(p=t.exampleCases[s])==null?void 0:p.input[o]},o)})})},n))})]})},xt=({problem:t,pending:a,showTestcases:s,runResults:l,execError:r,submitResult:n})=>{var h;const[i,o]=d.useState(0),[p,m]=d.useState(!0);return d.useEffect(()=>{m(!0),l==null||l.forEach(x=>{x.passed||m(!1)})},[l]),e.jsxs("div",{className:`${s?"hidden":"block"} py-4`,children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-dark-pink font-semibold text-xl ml-1",children:r.name}),e.jsx("div",{className:"w-full cursor-text rounded-lg border px-3 py-[8px] bg-dark-fill-3 border-transparent text-dark-pink bg-dark-pink bg-opacity-[15%] mt-3",children:e.jsxs("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:[r.line&&`Line ${r.line}
`,r.message]})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:p?e.jsx("span",{className:"text-dark-green-s",children:"Accepted"}):e.jsx("span",{className:"text-dark-pink",children:"Wrong Answer"})}),e.jsx("div",{className:"flex mt-1",children:t.exampleCases.map((x,f)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>o(f),children:e.jsx("div",{className:"flex flex-wrap items-center gap-y-4",children:e.jsxs("div",{className:`items-center transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${i===f?"text-white":"text-gray-500"}
                `,children:[e.jsx("div",{className:`w-1 h-1 rounded-full mr-2 ${l[f].passed?" bg-dark-green-s":"bg-dark-pink"}`}),"Case ",f+1]})})},f))}),t.exampleCases.map((x,f)=>e.jsxs("div",{className:`${f===i?"block":"hidden"}`,children:[e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Stdin",value:x.input.map(y=>JSON.stringify(y)).join(", ")})}),e.jsx("div",{className:`mt-4 ${l[i].stdout.length>0?"block":"hidden"}`,children:e.jsx(I,{label:"Stdout",value:l[i].stdout.map(y=>typeof y=="string"?y:JSON.stringify(y)).join(`
`)})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Output",value:l[i].output})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Expected",value:l[i].expected})})]},f))]}),n&&n.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-green-s",children:"Passed"})}),e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:"All the test cases are passed"})]}),n&&!n.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-pink",children:"Failed"})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Input",value:(h=n.input)==null?void 0:h.map(x=>JSON.stringify(x)).join(", ")})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Output",value:n.output})}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{label:"Expected",value:n.expected})})]})]}),!(l||r||n)&&e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:a?"Pending...":"You need to run you code first"})]})},Q=({userCode:t,onChangeCode:a,readOnly:s=!1,textLarge:l=!1})=>e.jsx("div",{className:"w-full overflow-y-auto h-full flex flex-col",children:e.jsx(_e,{id:"code editor",className:`codeMirror ${l?"text-[16px]":"text-[14px]"}`,value:t,onChange:r=>a&&a(r),theme:Re,extensions:[Je(),Me.lineWrapping],basicSetup:{autocompletion:!1,highlightActiveLine:!s,foldGutter:!s,highlightActiveLineGutter:!s},editable:!s,readOnly:s})}),me=({problem:t,gameMode:a=!1,gameData:s=void 0})=>{const[l,r]=d.useState(!1),[n,i]=d.useState(""),[o,p]=d.useState(!0),[m,h]=d.useState(),[x,f]=d.useState(),[y,w]=d.useState(),[k,g]=d.useState(50),[N,c]=d.useState(!1),u=()=>{l?(document.exitFullscreen(),r(!1)):(document.documentElement.requestFullscreen(),r(!0))},b=()=>{c(!0),w(void 0),h(void 0),f(void 0)},v=()=>{p(!1),c(!1)},C=()=>{if(n.length>1e4)return j.error("Codes should be less than 10000 characters");b(),fetch(We,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:t.id||0,language:"js",code:n})}).then(P=>P.json()).then(P=>{if(P.errors)throw new Error(P.errors);P.type==="error"?w(P.data):h(P.data)}).catch(P=>{j.error(P.message||"run failed")}).finally(()=>{v()})},L=()=>{if(n.length>1e4)return j.error("Codes should be less than 10000 characters");b(),fetch(a?it:Ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a?{problemId:t.id||0,language:"js",code:n,playerId:s==null?void 0:s.player.id,gameId:s==null?void 0:s.player.gameId,progress:s==null?void 0:s.myProgress.progress,finishedAt:s==null?void 0:s.myProgress.finishedAt}:{problemId:t.id||0,language:"js",code:n})}).then(G=>G.json()).then(G=>{if(G.errors)throw new Error(G.errors);if(G.type==="error")w(G.data);else if(f(G.data),G.data.passed){j.success("Passed !");const X=JSON.parse(localStorage.getItem("problemStatus")||"{}");X[t.id]=!0,localStorage.setItem("problemStatus",JSON.stringify(X)),a&&(s==null||s.setMyProgress({id:s.myProgress.id,name:s.myProgress.name,progress:G.progress,finishedAt:G.finishedAt}))}}).catch(G=>{j.error(G.message||"run failed")}).finally(()=>{v()})},ge=P=>{t&&(localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,P),a&&(s==null||s.updateCode(s.player.gameId,s.player.id,s.player.name,t.id,t.title,P))),i(P)},je=()=>{if(t){const P=t.boilerplate.replace(/\n\s+/g,`
`);i(P),localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,P)}};return d.useEffect(()=>{if(t){const P=localStorage.getItem(`code?problem_id=${t.id}&${a&&"gameMode"}`);i(P!==null?P:t.boilerplate.replace(/\n\s+/g,`
`))}},[t]),e.jsx("div",{className:"w-full overflow-auto flex flex-col",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-layer-2 h-10 w-full",children:[e.jsx("div",{className:"flex items-center text-white",children:e.jsx("button",{className:"flex cursor-pointer items-center rounded-lg bg-dark-fill-3 text-dark-label-2 px-2 py-1 hover:bg-dark-fill-2",children:"JavaScript"})}),e.jsxs("div",{className:"flex items-center m-2",children:[e.jsx("button",{className:"editor-nav-btn group","aria-label":"reset code",title:"reset code",onClick:je,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:e.jsx(ke,{})})}),e.jsx("button",{className:"editor-nav-btn group","aria-label":"full screen",title:"full screen",onClick:u,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:l?e.jsx(Ce,{}):e.jsx(Se,{})})})]})]}),e.jsxs("div",{className:" bg-dark-layer-1 h-full relative",children:[e.jsx("div",{className:"flex flex-col h-[calc(100vh-140px)]",children:e.jsxs(V,{direction:"vertical",minSize:0,snapOffset:60,sizes:[k,100-k],className:"h-full",onDragEnd:P=>{g(P[0])},children:[e.jsx(Q,{userCode:n,onChangeCode:ge}),e.jsxs("div",{className:"w-full px-5 overflow-auto relative",children:[e.jsxs("div",{className:"flex h-11 sticky top-0 bg-dark-layer-1 z-10",children:[e.jsx("button",{"aria-label":"show testcases",className:`flex h-full items-center text-white mx-2 border-b-2 cursor-pointer ${o?"border-white":"border-transparent"}`,onClick:()=>p(!0),children:"Testcases"}),e.jsx("button",{"aria-label":"show result",className:`flex h-full  items-center text-white mx-2 border-b-2 cursor-pointer ${o?"border-transparent":"border-white"}`,onClick:()=>p(!1),children:"Result"})]}),e.jsx(mt,{problem:t,showTestcases:o}),e.jsx(xt,{problem:t,pending:N,runResults:m,showTestcases:o,execError:y,submitResult:x})]})]})}),e.jsx(dt,{handleRun:C,handleSubmit:L,splitRatio:k,setSplitRatio:g,pending:N})]})]})})},xe=({problem:t})=>e.jsx("div",{className:"flex px-0 py-4 h-[calc(100vh-88px)] overflow-y-auto",children:e.jsx("div",{className:"px-5",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsxs("div",{className:"flex-1 mr-2 text-lg font-semibold text-white",children:[t.id,". ",t.title]})}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsx("div",{className:`${t.difficulty==="Hard"?"bg-dark-pink text-dark-pink":t.difficulty==="Medium"?"bg-dark-yellow text-dark-yellow":"bg-dark-green-s text-dark-green-s"} inline-block rounded-[21px] bg-opacity-[.20] px-2.5 py-1 text-xs font-semibold`,children:t.difficulty})}),e.jsx("div",{className:"text-white text-md description mt-5",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6",children:t.exampleCases.map((a,s)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Example ",s+1,": "]}),e.jsxs("div",{className:"example-card",children:[a.image&&e.jsx("img",{src:`problemsImgs/${a.image}`,className:"mt-2 w-full max-w-[450px]"}),e.jsxs("pre",{className:"text-sm",children:[e.jsx("strong",{className:"text-white",children:"Input: "}),t.inputKeys.map((l,r)=>e.jsxs("span",{className:"mr-4",children:[l," = ",JSON.stringify(a.input[r])]},r)),e.jsx("br",{}),e.jsx("strong",{children:"Output: "}),JSON.stringify(a.output)," ",e.jsx("br",{}),a.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Explanation: "}),a.explanation]})]})]})]},s))}),e.jsxs("div",{className:"my-8 pb-4",children:[e.jsx("div",{className:"text-white text-md font-semibold",children:"Constraints:"}),t.constraints.map((a,s)=>e.jsx("ul",{className:"text-white ml-5 list-disc mt-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},s))]})]})})}),ht=({problem:t})=>e.jsx("div",{className:"bg-dark-layer-1",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-hidden",children:e.jsx("div",{className:"bg-dark-layer-1 rounded-t-[5px] px-5 py-[7px] text-sm cursor-pointer",children:"Description"})}),e.jsx(xe,{problem:t})]})}),ut=()=>{const t=T(),[a]=be(),[s,l]=d.useState(),[r,n]=E(B),i=a.get("id")||0;return d.useEffect(()=>{n(!0),fetch(`${Ue}?id=${i}`).then(async o=>o.status!==200?o.json().then(p=>{throw p}):o.json()).then(o=>{l(o),n(!1)}).catch(o=>{console.error(o),j.error("Problem not found"),t("/")})},[i]),e.jsxs(e.Fragment,{children:[e.jsx(D,{isWorkspace:!0}),!r&&s&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs(V,{minSize:0,snapOffset:100,className:"split",children:[e.jsx(ht,{problem:s}),e.jsx(me,{problem:s})]})})]})},pt=({setGameId:t,setCurrentState:a})=>{const s=F($),[l,r]=d.useState([]),[n,i]=d.useState([]),[o,p]=d.useState(60),[m,h]=E(B),x=T();d.useEffect(()=>{h(!0),fetch(ie,{method:"GET"}).then(g=>g.json()).then(g=>{r(g)}).finally(()=>{h(!1)})},[]);const f=()=>{n.length>=5?j.error("At most 5 questions!"):i(g=>[...g,0])},y=(g,N)=>{i(c=>{const u=[...c];return u[N]=g,u})},w=g=>{i(N=>{const c=[...N];return c.splice(g,1),c})},k=()=>{if(n.length===0)return j.error("No question is selected");if(new Set(n).size!==n.length)return j.error("Questions should not repeat");if(o>300)return j.error("Time limit should not exceed 300 mins");if(o<3)return j.error("Time limit should be more than 3 mins");const g=localStorage.getItem("userData");if(!g)return s(c=>({...c,isLogin:!1})),j.error("Please Log In");const N=JSON.parse(g).access_token;fetch(`${Qe}`,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${N}`},body:JSON.stringify({timeLimit:o,problemList:n.map(c=>l[c].id)})}).then(c=>{c.status===401||c.status===403?(j.error("Login timeout"),localStorage.removeItem("userData"),s(u=>({...u,isLogin:!1})),a("GameCreating")):c.status!==200?c.json().then(u=>{console.error(u),j.error(u.errors||"Create game failed"),x("/")}):c.json().then(u=>{t(u.gameId),a("PlayersJoining")})})};return e.jsx(e.Fragment,{children:!m&&e.jsxs(O.div,{className:"w-11/12 md:w-9/12 mx-auto py-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Create Game"}),e.jsx("h1",{className:"text-xl mt-6 ml-1",children:"Questions"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Id"}),e.jsx("th",{className:"px-3 py-3 w-[35%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%]"})]})}),e.jsx("tbody",{children:n.map((g,N)=>{const c=l[g],u=c.difficulty==="Easy"?"text-dark-green-s":c.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${N%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("div",{className:"mr-2",children:N+1})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("select",{className:" bg-dark-fill-2 outline-none py-1.5 px-2 rounded-lg text-dark-gray-8 font-medium",onChange:b=>{y(Number(b.target.value),N)},children:l.map((b,v)=>e.jsx("option",{value:v,children:b.title},v))})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:c.tags.map(b=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:b.title},b.id))})}),e.jsx("td",{className:`px-3 py-4 ${u}`,children:c.difficulty}),e.jsx("td",{children:e.jsx("button",{className:"mx-auto flex items-center text-3xl cursor-pointer rounded hover:text-dark-pink transition-all",onClick:()=>w(N),children:e.jsx(Pe,{})})})]},N)})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"mt-5 py-1 px-3 cursor-pointer rounded  font-medium bg-dark-gray-8 hover:bg-dark-gray-7 transition-all text-dark-layer-2",onClick:f,children:"Add Question"})})]}),e.jsxs("div",{className:" mt-5",children:[e.jsx("h1",{className:"text-xl mt-10 ml-1",children:"Time Limits"}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsx("input",{type:"text",value:o,onChange:g=>p(Math.abs(Math.floor(Number(g.target.value)))||0),className:" bg-dark-fill-2 px-3 py-1.5 w-16 outline-none rounded-lg"}),e.jsx("div",{className:"ml-2 text-lg",children:"Minutes"})]})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("button",{onClick:k,className:"bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Create Game"})})]})})},he=({players:t})=>{const s=[4,3,5,10,1,2,11,8,0,9,6,7].map((l,r)=>{var i;const n=t[l];return e.jsx("div",{className:` -mb-[28px] h-[120px] w-[120px] mx-[32px] rotate-45 flex justify-center items-center rounded-md
          ${(r===0||r===7)&&" ml-[124px]"}
          ${r===10&&" ml-[215px]"}
          ${n?"bg-[#5B7363]":"bg-[#313030]"}
           transition-all duration-300`,children:e.jsx("div",{className:`-rotate-45 ${!n&&"opacity-0"} transition-all duration-300`,children:n&&e.jsxs(e.Fragment,{children:[e.jsx("img",{alt:"image",src:`${A}&seed=${(i=t[l])==null?void 0:i.name}`,className:"h-20 mb-[34px]"}),e.jsx("div",{className:`absolute left-[50%] -translate-x-[50%] bottom-[3px] text-white w-20 break-all text-center max-h-8 overflow-hidden leading-4
         ${n.name.length>10?"text-sm":"font-medium text-md"}`,children:n.name})]})})},r)});return e.jsx("div",{className:"relative w-[740px] mx-auto",children:e.jsx("div",{className:"flex flex-wrap w-full justify-left py-[60px]",children:s})})},ft=({gameId:t})=>{const a=d.useRef(_(R)).current,[s,l]=d.useState([]);return d.useEffect(()=>{if(t)return fetch(oe,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(r=>r.json()).then(r=>{l(r.players)}),a.emit("ws-host-joinGame",{gameId:t}),a.on("ws-host-playerJoinGame",function(r){l(n=>[...n,{id:r.id,name:r.name,gameId:t}])}),a.on("ws-host-playerExitGame",function(r){l(n=>n.filter(i=>i.id!=r.id))}),()=>{a.off("ws-host-playerExitGame"),a.off("ws-host-playerJoinGame")}},[t,a]),e.jsx(O.div,{className:"text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"py-12",children:[e.jsxs("h1",{className:"text-4xl text-center",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7 mt-6",children:"Waiting For Players To Join..."}),e.jsx("div",{className:"mt-2",children:e.jsx(he,{players:s})})]})})},gt=({gameId:t,playersCode:a,focusedPlayerId:s,playersProgress:l,setFocusedPlayerId:r})=>{var f;const[n,i]=d.useState(""),o=a.find(y=>y.id===s),[p,m]=d.useState((o==null?void 0:o.lastModifyedProblem)||0),h=(f=l.find(y=>y.id===(o==null?void 0:o.id)))==null?void 0:f.progress,x=y=>{if(y.preventDefault(),i(w=>w.trim()),n!==""){if(n.length>50)return j.error("Message cannot be longer than 50 characters");i(""),y.nativeEvent.submitter.name==="sendMessage"&&o?fetch(te,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:o.id,message:n})}):y.nativeEvent.submitter.name==="sendGroupMessage"&&fetch(te,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:-1,message:n})})}};return e.jsx("div",{className:"text-gray-50 flex gap-[12px] px-[10px] mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto relative",children:o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full  shrink rounded-lg overflow-hidden bg-dark-layer-1",children:e.jsx(Q,{userCode:o.problems[p].code,readOnly:!0,textLarge:!0})}),e.jsxs("div",{className:"flex flex-col w-[300px] shrink-0 text-white bg-dark-layer-2",children:[e.jsxs("div",{className:"w-full overflow-auto flex flex-col",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-b-[1px] border-dark-fill-2",children:"Problems"}),e.jsx("div",{className:"overflow-y-auto",children:o.problems.map((y,w)=>e.jsxs("div",{className:`flex items-center px-4 py-[7px] text-sm  cursor-pointer w-full h-14 hover:bg-dark-fill-3 ${w===p?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>m(w),children:[e.jsxs("span",{children:[w+1,". ",y.title]}),h&&h.map((k,g)=>e.jsx("span",{className:`text-dark-green-s ml-auto text-[18px] ${k.id===y.id&&k.passed?"block":"hidden"}`,children:e.jsx(ae,{})},g))]},w))})]}),e.jsxs("div",{className:"mt-auto h-40",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-t-[1px] border-dark-fill-2",children:"Send Message"}),e.jsxs("form",{onSubmit:x,children:[e.jsx("div",{className:"px-2",children:e.jsx("input",{name:"message",value:n,onChange:y=>i(y.target.value),className:" w-full bg-dark-fill-2 rounded-lg outline-none text-lg px-3 py-2 resize-none"})}),e.jsxs("div",{className:"flex px-3 mt-3",children:[e.jsx("button",{type:"submit","aria-label":"send message",name:"sendMessage",className:" px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-green-s hover:bg-opacity-80 rounded-lg",children:"Send"}),e.jsx("button",{type:"submit","aria-label":"send group message",name:"sendGroupMessage",className:"ml-auto px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-gray-6 hover:bg-opacity-80 rounded-lg",children:"Send Group"})]})]})]})]}),e.jsx("div",{"aria-label":"close focus",className:" absolute text-[24px] rounded-full border-[1.5px] border-white p-1 left-1/2 -translate-x-1/2 top-[30px] opacity-30 hover:opacity-90 transition-all cursor-pointer",onClick:()=>r(void 0),children:e.jsx(W,{})})]})})},jt=({gameId:t})=>{const[a,s]=d.useState([]),[l,r]=d.useState([]),[n,i]=d.useState([]),[o,p]=d.useState(!0),[m]=d.useState(()=>_(R)),[h,x]=d.useState(void 0),f=F(B),y=F($),w=T(),k=()=>{s(g=>(g.sort((N,c)=>{const u=N.progress.reduce((v,C)=>C.passed?v+1:v,0),b=c.progress.reduce((v,C)=>C.passed?v+1:v,0);return u>b?-1:u<b?1:N.finishedAt&&c.finishedAt?new Date(N.finishedAt).getTime()-new Date(c.finishedAt).getTime():0}),[...g]))};return d.useEffect(()=>{fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(g=>g.json()).then(g=>{r(g.problems)}),m.emit("ws-host-joinGame",{gameId:t})},[m]),d.useEffect(()=>{if(l.length>0){f(!0),fetch(ce,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(c=>c.json()).then(c=>{s(c.progress.map(u=>({id:u.id,name:u.name,finishedAt:u.finishedAt,progress:u.progress?JSON.parse(u.progress):l.map(b=>({id:b.id,passed:!1}))}))),k()}).finally(()=>{f(!1)});const g=localStorage.getItem("userData");if(!g){y(c=>({...c,isLogin:!1})),w("/"),j.error("Login Timeout");return}const N=JSON.parse(g).access_token;f(!0),fetch(et,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${N}`}}).then(async c=>c.status===401||c.status===403?(j.error("Login timeout"),localStorage.removeItem("userData"),y(u=>({...u,isLogin:!1})),w("/"),c.json().then(u=>{throw u})):c.json()).then(c=>{i(c.playersCode.map(u=>({id:u.id,name:u.name,problems:l.map(b=>{const v=u.problems.findIndex(C=>C.id===b.id);return v===-1?{id:b.id,title:b.title,code:b.boilerplate.replace(/\n\s+/g,`
`)}:{...u.problems[v]}})})))}).catch(c=>{console.error(c)}).finally(()=>{f(!1)}),m.on("ws-host-updateProgress",function({playerId:c,progress:u,finishedAt:b}){s(v=>(v.forEach(C=>{C.id===c&&(C.progress=u,C.finishedAt=b)}),[...v])),k()}),m.on("ws-host-playerExitGame",function(c){s(u=>u.filter(b=>b.id!=c.id)),i(u=>u.filter(b=>b.id!=c.id))}),m.on("ws-host-playerJoinGame",function(c){s(u=>[...u,{id:c.id,name:c.name,finishedAt:null,progress:l.map(b=>({id:b.id,passed:!1}))}]),i(u=>(u.push({id:c.id,name:c.name,problems:l.map(b=>({id:b.id,title:b.title,code:b.boilerplate.replace(/\n\s+/g,`
`)}))}),[...u]))}),m.on("ws-host-playerUpdateCode",function(c){i(u=>{const b=u.findIndex(v=>v.id===c.id);if(b!==-1){const v=u[b].problems.findIndex(C=>C.id===c.problemId);v!==-1&&(u[b].problems[v].code=c.code,u[b].lastModifyedProblem=v)}return[...u]})})}return()=>{m.off("ws-host-updateProgress"),m.off("ws-host-playerJoinGame"),m.off("ws-host-playerExitGame"),m.off("ws-host-playerUpdateCode")}},[l,m]),e.jsx(e.Fragment,{children:e.jsxs(O.div,{className:"flex relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${o?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>p(!0),children:e.jsx(M,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8 shrink-0 bg-dark-layer-1 mt-[8px] h-[calc(100vh-64px)] rounded-lg transition-all duration-450
        ${o?"translate-x-0 w-[300px] ml-[8px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:"h-[64px] flex items-center border-b-[1px] border-dark-fill-2 px-3 relative",children:[e.jsxs("h1",{className:"text-xl",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("div",{className:`ml-1 transform transition-all duration-500 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[14px]
             right-[8px]`,onClick:()=>p(!1),children:e.jsx(M,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-128px)] overflow-y-auto overflow-hidden rounded-b-lg",children:a.map((g,N)=>{const c=g.progress.length,u=g.progress.reduce((b,v)=>v.passed?b+1:b,0);return e.jsxs("div",{className:`h-[72px] border-b-[1px] border-dark-fill-2 flex items-center  px-3 cursor-pointer 
                          hover:bg-dark-fill-3 ${h===g.id?"bg-dark-fill-3":"bg-dark-layer-1"}`,onClick:()=>{h===g.id?x(void 0):x(g.id)},children:[e.jsx("div",{className:"text-xl font-semibold text-dark-yellow",children:N+1}),e.jsx("div",{className:"h-11 w-11 shrink-0 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${A}&seed=${g.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:"text-lg ml-3 truncate",children:g.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[u,"/",c]})]},N)})})]}),!h&&e.jsx("div",{className:"shrink text-gray-50 mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-[12px] px-[14px]",id:"players code",children:n.map((g,N)=>{const c=g.problems[g.lastModifyedProblem||0];return e.jsxs("div",{className:"h-[300px] w-[calc(50%-10px)] relative rounded-lg bg-dark-layer-1 overflow-hidden cursor-pointer",onClick:()=>x(g.id),children:[e.jsx("div",{className:" absolute bottom-0",children:e.jsx(Q,{userCode:c.code,readOnly:!0})}),e.jsxs("div",{className:"absolute top-2 left-3 flex bg-sky-900 items-center rounded-lg px-2 py-1",children:[e.jsx("img",{src:`${A}&seed=${g.name}`,alt:"avatar",className:" h-[26px] mr-1"}),e.jsx("div",{className:"truncate max-w-[160px]",children:g.name})]}),e.jsx("div",{className:" absolute top-2 right-3 truncate max-w-[200px] bg-emerald-900 items-center rounded-lg px-2 py-1",children:c.title})]},`player ${N}`)})})}),h&&e.jsx(gt,{gameId:t,playersCode:n,focusedPlayerId:h,playersProgress:a,setFocusedPlayerId:x})]})})},ue=({timeLeft:t,setTimeLeft:a})=>{const s=l=>{const r=Math.floor(l/3600),n=Math.floor(l%3600/60),i=l%60;return`${r<10?"0"+r:r}:${n<10?"0"+n:n}:${i<10?"0"+i:i}`};return d.useEffect(()=>{const l=setInterval(()=>{a(r=>r&&(r<=0?0:r-1))},1e3);return()=>clearInterval(l)},[a]),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center p-1 h-8 cursor-default",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})}),e.jsx("div",{children:s(t)})]})})},yt=({gameId:t,currentState:a,setCurrentState:s})=>{const l=T(),[r,n]=d.useState();d.useEffect(()=>{if(a==="GameWatching"&&t){const m=()=>{fetch(de,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(x=>x.json()).then(x=>{const f=x.endedAt-new Date().getTime();n(Math.floor(f/1e3))})};m();const h=setInterval(()=>{m()},6e4);return()=>clearInterval(h)}},[a,t]);const i=()=>{const m=localStorage.getItem("userData");if(m&&t){const h=JSON.parse(m).access_token;fetch(Ze,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({gameId:t})}).then(x=>{x.status===200?(j("🔥 Game Started !"),s("GameWatching")):j.error("Start Game failed")})}},o=()=>{const m=localStorage.getItem("userData");if(m&&t){const h=JSON.parse(m).access_token;fetch(Xe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({gameId:t})}).then(x=>{x.status===200?l("/"):j.error("Shot down failed")})}},p=()=>{const m=localStorage.getItem("userData");if(m&&t){const h=JSON.parse(m).access_token;fetch(tt,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify({gameId:t})}).then(x=>{x.status===200?s("GameResult"):l("/")})}};return d.useEffect(()=>{a==="GameWatching"&&r&&r<=0&&s("GameResult")},[r,a]),e.jsx(O.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(z,{to:"/",className:" block w-[100px]","aria-label":"letscode",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"relative h-11 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:"./gameHost.png",alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:"HOST"})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GameWatching"&&r&&e.jsx(ue,{timeLeft:r,setTimeLeft:n}),a==="PlayersJoining"&&e.jsxs("div",{"aria-label":"start game",className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-green-s font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:i,children:[e.jsx("div",{className:"mr-2",children:"Start Game"}),e.jsx(Z,{})]}),a==="GameWatching"&&e.jsxs("button",{"aria-label":"close game",className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-yellow font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:p,children:[e.jsx("div",{className:"mr-2",children:"Close Game"}),e.jsx(Z,{})]}),a==="PlayersJoining"&&e.jsxs("button",{"aria-label":"shut down",className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:o,children:[e.jsx("div",{className:"mr-2",children:"Shut Down"}),e.jsx(ee,{})]}),a==="GameResult"&&e.jsxs("button",{"aria-label":"leave",className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:o,children:[e.jsx("div",{className:"mr-2",children:"Leave"}),e.jsx(ee,{})]})]})]})})},H=({name:t,place:a})=>e.jsxs("div",{className:"",children:[e.jsx("img",{src:`${A}&seed=${t}`,alt:"avatar",className:"w-24 mx-auto"}),e.jsx("div",{className:`rounded-lg text-center py-[3px] px-[3px] text-dark-layer-1 font-semibold truncate max-w-[120px] ${a===1?"bg-amber-200":a===2?"bg-slate-200":" bg-orange-200"}`,children:t})]}),pe=({gameId:t})=>{const[a,s]=d.useState([]),[l,r]=d.useState([]),[n,i]=E(B);d.useEffect(()=>{i(!0),fetch(ot,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(p=>p.json()).then(p=>{s(p.players),r(p.problems),i(!1)})},[]);const o=p=>{const m=Math.floor(p/3600),h=Math.floor(p%3600/60),x=p%60;return`${m<10?"0"+m:m}:${h<10?"0"+h:h}:${x<10?"0"+x:x}`};return e.jsx("div",{className:"",children:!n&&e.jsxs(O.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"pb-14",children:[e.jsxs("div",{className:"flex justify-center relative h-[400px] w-[600px] mx-auto ",children:[e.jsx(ze,{numberOfPieces:70,width:600,height:400}),a[0]&&e.jsx("div",{className:" absolute top-[75px]",children:e.jsx(H,{name:a[0].name,place:1})}),a[1]&&e.jsx("div",{className:" absolute top-[126px] left-[124px]",children:e.jsx(H,{name:a[1].name,place:2})}),a[2]&&e.jsx("div",{className:" absolute top-[149px] left-[380px]",children:e.jsx(H,{name:a[2].name,place:3})}),e.jsx("img",{src:"podium.png",alt:"",className:" h-[200px] mt-auto",color:"orange"})]}),e.jsxs("table",{className:`${l.length>3?"w-[960px]":"w-[740px]"}  mx-auto mt-8`,children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Place"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Name"}),l.map((p,m)=>e.jsxs("th",{className:"px-3 py-3 w-[12%] font-semibold text-sm",children:[m+1,"-",p.title]},m)),e.jsx("th",{className:"px-3 py-3 w-[12%] font-semibold",children:"Time"})]})}),e.jsx("tbody",{className:"text-white",children:a.map((p,m)=>e.jsxs("tr",{className:`${m%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-8 py-4 text-dark-yellow font-bold",children:m+1}),e.jsx("td",{className:"pl-3 py-4 font-bold",children:p.name}),p.progress.map((h,x)=>e.jsx("td",{className:"pl-3 py-4 text-center",children:h?e.jsx("span",{className:"text-dark-green-s",children:e.jsx(re,{})}):e.jsx("div",{className:"text-dark-pink w-fit",children:e.jsx(Ge,{})})},x)),e.jsx("td",{className:"px-3 py-4 text-dark-gray-7",children:p.timeUsed?o(p.timeUsed):"-"})]},m))})]})]})})},bt=()=>{const t=T(),[a,s]=d.useState(),[l,r]=d.useState("Loading");return d.useEffect(()=>{const n=localStorage.getItem("userData");if(!n)t("/"),j.error("Sign In Time Out");else{const i=JSON.parse(n).access_token;fetch(qe,{method:"GET",headers:{"content-type":"application/json",Authorization:`Bearer ${i}`}}).then(o=>o.json()).then(o=>{o.founded?(s(o.contestId),r(()=>o.state==="created"?"PlayersJoining":o.state==="started"?"GameWatching":o.state==="closed"?"GameResult":"GameCreating")):r("GameCreating")}).catch(o=>{console.log(o)})}},[]),e.jsxs(e.Fragment,{children:[l==="GameCreating"||l==="Loading"?e.jsx(D,{}):e.jsx(yt,{gameId:a,currentState:l,setCurrentState:r}),e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[l==="GameCreating"&&e.jsx(pt,{setGameId:s,setCurrentState:r}),l==="PlayersJoining"&&a&&e.jsx(ft,{gameId:a}),l==="GameWatching"&&a&&e.jsx(jt,{gameId:a}),l==="GameResult"&&a&&e.jsx(pe,{gameId:a})]})]})};function fe(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function U(t){return/\s/g.test(t)}const Nt=({setCurrentState:t,setPlayer:a})=>{const[s,l]=d.useState(""),[r,n]=d.useState(""),[i,o]=d.useState(!1);F(q)(!0);const m=h=>{if(h.preventDefault(),s==="")return j.error("Name can not be empty");if(U(s))return j.error("Name can not have whitespace");if(s.length>20)return j.error("Name can not exceed 20 characters");if(!Number(r)||Number(r)>1e5||Number(r)<0)return j.error("Invalid game id");o(!0),fetch(rt,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:r,playerName:s})}).then(async x=>x.status!==200?x.json().then(f=>{throw f}):x.json()).then(x=>{const f={id:x.playerId,gameId:Number(r),name:s};a(f),localStorage.setItem("playerData",JSON.stringify(f)),x.gameState==="created"?t("GameWaiting"):x.gameState==="started"?(j("🔥 Game is started !"),t("GamePlaying")):j.error("Game is ended")}).catch(x=>{console.error(x),j.error(x.errors||"Join game failed")}).finally(()=>{o(!1)})};return e.jsxs(O.div,{className:"flex flex-col items-center justify-center mx-auto py-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Join Game"}),e.jsxs("form",{onSubmit:m,className:"flex flex-col items-center justify-center ",children:[e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-lg",children:"Game Id"}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:r,onChange:h=>n(h.target.value)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg",children:"Name "}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:s,onChange:h=>l(h.target.value)})]}),e.jsx("button",{disabled:i,className:"mt-8 bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Join Game"})]})]})},vt=({player:t,setCurrentState:a,gameId:s})=>{const l=d.useRef(_(R)).current,[r,n]=d.useState([]),i=T();return d.useEffect(()=>{if(t)return fetch(oe,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{n(o.players)}),fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{o.problems.forEach(p=>{localStorage.removeItem(`code?problem_id=${p==null?void 0:p.id}&gameMode`)})}),l.emit("ws-player-joinGame",{gameId:t.gameId}),l.on("ws-host-playerJoinGame",function(o){n(p=>[...p,{id:o.id,name:o.name,gameId:t.gameId}])}),l.on("ws-host-playerExitGame",function(o){n(p=>p.filter(m=>m.id!=o.id))}),l.on("ws-player-hostTerminateGame",function(){j.info("Host terminated game"),localStorage.removeItem("playerData"),i("/")}),l.on("ws-player-hostStartGame",function(){j("🔥 Game Started !"),a("GamePlaying")}),()=>{l.off("ws-host-playerExitGame"),l.off("ws-host-playerJoinGame"),l.off("ws-player-hostTerminateGame"),l.off("ws-player-hostStartGame")}},[l]),e.jsx(O.div,{className:"mx-auto text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"py-12",children:[e.jsxs("h1",{className:"blink text-xl text-center text-dark-gray-7",children:["Game ",e.jsx("strong",{className:" text-dark-pink mx-1",children:s})," is about to start..."]}),e.jsx("div",{className:"mt-2",children:e.jsx(he,{players:r})})]})})},wt=({player:t,currentState:a,setCurrentState:s})=>{const[l,r]=d.useState(),[n,i]=E(q),o=T(),p=()=>{(a==="GamePlaying"||a==="GameWaiting")&&t&&fetch(nt,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId,playerId:t.id})}).then(m=>{m.status===200?localStorage.removeItem("playerData"):j.error("Failed to exit game")}),o("/")};return d.useEffect(()=>{if(a==="GamePlaying"&&t){const m=()=>{fetch(de,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(x=>x.json()).then(x=>{const f=x.endedAt-new Date().getTime();r(Math.floor(f/1e3))})};m();const h=setInterval(()=>{m()},6e4);return()=>clearInterval(h)}},[a,t]),d.useEffect(()=>{a==="GamePlaying"&&l&&l<=0&&s("GameResult")},[l,a]),e.jsx("nav",{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(z,{to:"/",className:" block w-[100px]","aria-label":"letscode",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-10 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:`${A}&seed=${t.name}`,alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GamePlaying"&&e.jsxs("button",{"aria-label":"toggle bullet screen",className:"text-xl relative cursor-pointer flex h-9 w-9  justify-center items-center",title:`${n?"Turn off bullets":"Turn on bullets"}`,onClick:()=>{i(m=>!m)},children:[e.jsx("div",{className:`absolute text-dark-gray-6 text-3xl top-1/2 -translate-x-1/2 left-1/2 -translate-y-1/2
                            ${n?"opacity-0":"opacity-100"} transition-all`,children:e.jsx(Oe,{})}),e.jsx(Ee,{})]}),a==="GamePlaying"&&l&&e.jsx(ue,{timeLeft:l,setTimeLeft:r}),e.jsxs("button",{"aria-label":"exit game",className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink hover:bg-dark-fill-2 transition-all",onClick:p,children:[e.jsx("div",{className:"mr-2",children:"Exit"}),e.jsx(se,{})]})]})]})]})})},kt=({player:t})=>{const a=d.useRef(_(R)).current,[s,l]=d.useState([]),r=["bg-sky-500","bg-pink-500","bg-yellow-500","bg-slate-500","bg-green-500","bg-purple-500"];d.useEffect(()=>(a.emit("ws-player-joinGame",{gameId:t.gameId}),a.on("ws-player-sendMessageToPlayer",function(i){(i.id===-1||i.id===t.id)&&(console.log(new Date().toLocaleString()),console.log("Host message",i.message),n(i.message))}),()=>{a.off("ws-player-sendMessageToPlayer")}),[a]);const n=i=>{const o=0+Math.random()*400,p=ne.uniqueId(),m=15+Math.floor(Math.random()*8),h=r[Math.floor(Math.random()*r.length)];l(x=>[...x,{message:i,height:o,id:p,duration:m,colorName:h}]),setTimeout(()=>{l(x=>x.filter(f=>f.id!==p))},m*1e3)};return e.jsx("div",{className:"bg-transparent h-[calc(100vh-48px)] w-full absolute overflow-hidden top-0 z-40 pointer-events-none",children:s.map(i=>e.jsxs("div",{className:"bullet",style:{top:i.height,animationDuration:`${i.duration}s`},children:[e.jsxs("div",{className:`bg-opacity-50 ${i.colorName} flex shrink-0 items-center py-0.5 pl-3 pr-2 rounded-l-3xl rounded-r-lg truncate max-w-[800px]`,children:[e.jsx("img",{src:"./gameHost.png",alt:"GameHost",className:"h-7 mr-2"}),i.message]}),e.jsx("img",{src:"fire.gif",className:" rotate-90 h-8 opacity-90"})]},i.id))})},St=({player:t,setCurrentState:a})=>{const[s,l]=d.useState([]),[r,n]=d.useState(0),[i,o]=d.useState(),[p,m]=d.useState([]),h=d.useRef(_(R)).current,x=le(q),[f,y]=d.useState(!0),w=()=>{m(N=>(N.sort((c,u)=>{const b=c.progress.reduce((C,L)=>L.passed?C+1:C,0),v=u.progress.reduce((C,L)=>L.passed?C+1:C,0);return b>v?-1:b<v?1:c.finishedAt&&u.finishedAt?new Date(c.finishedAt).getTime()-new Date(u.finishedAt).getTime():0}),[...N]))};d.useEffect(()=>(fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(N=>N.json()).then(N=>{l(N.problems)}),h.emit("ws-player-joinGame",{gameId:t.gameId}),h.on("ws-player-hostCloseGame",function(){a("GameResult"),j.info("Host terminated game")}),h.on("ws-host-playerJoinGame",function(N){m(c=>[...c,{id:N.id,name:N.name,finishedAt:null,progress:s.map(u=>({id:u.id,passed:!1}))}])}),h.on("ws-host-updateProgress",function({playerId:N,progress:c,finishedAt:u}){m(b=>(b.forEach(v=>{v.id===N&&(v.progress=c,v.finishedAt=u)}),[...b])),w()}),()=>{h.off("ws-player-hostCloseGame"),h.off("ws-host-playerJoinGame"),h.off("ws-host-updateProgress")}),[h]),d.useEffect(()=>{s.length>0&&t&&fetch(ce,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(N=>N.json()).then(N=>{m([]),N.progress.forEach(c=>{c.id===t.id&&o({id:c.id,name:c.name,finishedAt:c.finishedAt,progress:c.progress?JSON.parse(c.progress):s.map(u=>({id:u.id,passed:!1}))}),m(u=>[...u,{id:c.id,name:c.name,finishedAt:c.finishedAt,progress:c.progress?JSON.parse(c.progress):s.map(b=>({id:b.id,passed:!1}))}])}),w()})},[s]);const k=(N,c,u,b,v,C)=>{h.emit("ws-player-updateCode",{gameId:N,playerId:c,playerName:u,problemId:b,problemTitle:v,code:C})},g=d.useCallback(ne.debounce(k,500),[]);return e.jsxs(O.div,{className:"relative flex w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[x&&e.jsx(kt,{player:t}),e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${f?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>y(!0),children:e.jsx(M,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0 bg-dark-layer-2 transition-all duration-500
        ${f?"translate-x-0 w-[260px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:" h-[40px] flex items-end border-dark-fill-2 px-3 relative",children:[e.jsx("h1",{className:"text-xl",children:"Rank"}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[8px]
             right-[8px]`,onClick:()=>y(!1),children:e.jsx(M,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-96px)] overflow-y-auto overflow-hidden rounded-b-lg",children:p.map((N,c)=>{const u=N.progress.length,b=N.progress.reduce((v,C)=>C.passed?v+1:v,0);return e.jsxs("div",{className:"w-full h-[56px] flex items-center px-[12px] mt-[8px]",children:[e.jsx("div",{className:`text-xl font-semibold ${N.id===t.id?"text-dark-pink":"text-dark-yellow"}`,children:c+1}),e.jsx("div",{className:"h-10 w-10 shrink-0 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-[10px]",children:e.jsx("img",{src:`${A}&seed=${N.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:`text-md ml-3 truncate ${N.id===t.id?"font-semibold":"font-normal"}`,children:N.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[b,"/",u]})]},c)})})]}),e.jsx("div",{className:"w-full",children:s.length>0&&i&&e.jsxs(V,{minSize:0,snapOffset:100,className:"split",children:[e.jsxs("div",{className:"bg-dark-layer-1",children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-auto no-scrollbar",children:s.map((N,c)=>e.jsxs("div",{className:`flex items-center rounded-t-[5px] px-4 py-[7px] text-sm cursor-pointer ${c===r?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>n(c),children:[i&&i.progress.map((u,b)=>e.jsx("span",{className:`text-dark-green-s mr-1 ml-[-8px] ${u.id===N.id&&u.passed?"block":"hidden"}`,children:e.jsx(ae,{})},b)),e.jsxs("span",{className:"  whitespace-nowrap",children:["Prob ",c+1]})]},c))}),e.jsx(xe,{problem:s[r]})]}),e.jsx(me,{problem:s[r],gameMode:!0,gameData:{player:t,myProgress:i,setMyProgress:o,updateCode:g}})]})})]})},Ct=()=>{const[t,a]=d.useState("Loading"),[s,l]=d.useState();return d.useEffect(()=>{const r=localStorage.getItem("playerData");if(!r)a("GameJoining");else{const n=JSON.parse(r);fetch(lt,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({playerId:n.id,gameId:n.gameId})}).then(i=>i.json()).then(i=>{l(n),i.founded?a(()=>i.state==="created"?"GameWaiting":i.state==="started"?"GamePlaying":i.state==="closed"?"GameResult":"GameJoining"):(localStorage.removeItem("playerData"),a("GameJoining"))})}},[]),e.jsxs(e.Fragment,{children:[t==="GameJoining"||t==="Loading"?e.jsx(D,{}):e.jsx(wt,{player:s,currentState:t,setCurrentState:a}),e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[t==="GameJoining"&&e.jsx(Nt,{setCurrentState:a,setPlayer:l}),t==="GameWaiting"&&s&&e.jsx(vt,{setCurrentState:a,player:s,gameId:s.gameId}),t==="GamePlaying"&&s&&e.jsx(St,{setCurrentState:a,player:s}),t==="GameResult"&&s&&e.jsx(pe,{gameId:s.gameId})]})]})},Pt=()=>{const[t,a]=E(B),[s,l]=d.useState(0),r=6,[n,i]=d.useState({isOpen:!1,videoId:""}),[o,p]=d.useState([]),[m,h]=d.useState(JSON.parse(localStorage.getItem("problemStatus")||"{}"));d.useEffect(()=>{a(!0),fetch(ie,{method:"GET"}).then(y=>y.json()).then(y=>{p(y),a(!1)})},[]);const x=()=>{const y=Math.floor(o.length/r),w=[];for(let k=0;k<=y;k++)console.log(s,k),w.push(e.jsx("div",{onClick:()=>{l(k)},className:`${s===k?"bg-dark-fill-2":"bg-dark-layer-1"}  h-[32px] w-[32px] flex items-center justify-center cursor-pointer rounded text-white hover:bg-dark-fill-2 transition-all mx-1`,children:k}));return w},f=()=>{i({isOpen:!1,videoId:""})};return e.jsx(e.Fragment,{children:!t&&e.jsxs(O.div,{className:"relative overflow-x-auto mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[o.length>0&&e.jsxs("table",{className:"w-full mx-auto",id:"problem-table",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Status"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Solution"})]})}),e.jsx("tbody",{className:"text-white",children:o!==void 0&&o.slice(s*r,(s+1)*r).map((y,w)=>{const k=y.difficulty==="Easy"?"text-dark-green-s":y.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${w%2===1?"bg-dark-layer-1":" bg-dark-layer-2"}`,children:[e.jsx("td",{className:"pl-4 py-4 whitespace-nowrap text-dark-green-s",children:e.jsx("div",{className:" cursor-pointer h-6",onClick:()=>{h(g=>(g[y.id]=!g[y.id],localStorage.setItem("problemStatus",JSON.stringify(g)),{...g}))},children:m[y.id]&&e.jsx(re,{width:"18"})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx(z,{className:"hover:text-blue-600","aria-label":y.title,to:`/problem?id=${y.id}`,children:y.title})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:y.tags.map(g=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:g.title},g.id))})}),e.jsx("td",{className:`px-3 py-4 ${k}`,children:y.difficulty}),e.jsx("td",{className:"px-3 py-4",children:y.solutionVideo?e.jsx(Te,{fontSize:"28",className:"cursor-pointer hover:text-red-600","aria-label":`${y.title} solution`,onClick:()=>i({isOpen:!0,videoId:y.solutionVideo})}):e.jsx("p",{className:"text-gray-400",children:"Coming soon"})})]},w)})}),n.isOpen&&e.jsxs("tfoot",{className:"fixed top-0 left-0 h-screen w-screen flex items-center justify-center",children:[e.jsx("div",{className:"bg-black z-10 opacity-70 top-0 left-0 w-screen h-screen absolute",onClick:f}),e.jsx("div",{className:"w-full z-50 h-full px-6 relative max-w-4xl",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center relative",children:e.jsxs("div",{className:"w-full relative",children:[e.jsx(W,{fontSize:"35",className:"cursor-pointer absolute -top-16 right-0 text-dark-gray-8",onClick:f}),e.jsx(De,{videoId:n.videoId,loading:"lazy",iframeClassName:"w-full min-h-[500px]"})]})})})]})]}),e.jsxs("div",{className:" flex items-center justify-center mt-8",children:[e.jsx("button",{disabled:s===0,onClick:()=>l(y=>y-1),className:`bg-dark-layer-1 h-[32px] w-[40px] flex items-center justify-center cursor-pointer rounded 
                         text-dark-gray-8 font-bold hover:bg-dark-fill-2 transition-all mx-1 disabled:opacity-50`,children:e.jsx(Ie,{})}),x(),e.jsx("button",{disabled:s>=Math.floor(o.length/r),onClick:()=>l(y=>y+1),className:`bg-dark-layer-1 h-[32px] w-[40px] flex items-center justify-center cursor-pointer rounded 
                         text-dark-gray-8 font-bold hover:bg-dark-fill-2 transition-all mx-1 disabled:opacity-50`,children:e.jsx($e,{})})]})]})})},Gt=()=>e.jsx("div",{className:"h-14 text-dark-gray-6 flex justify-center items-center text-sm",children:"Code together. Code For Fun."}),Ot=()=>{const t=le($),a=T(),s=()=>{t.isLogin?a("/gameHost"):j.error("Please Sign In")},l=()=>{a("/gamePlayer")};return e.jsxs("div",{children:[e.jsx(D,{}),e.jsx(O.div,{className:"block pb-10 min-h-[calc(100vh-104px)]",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"w-11/12 md:w-9/12 mx-auto pt-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1",children:"Let's Code!"}),e.jsxs("div",{className:" flex mt-5",children:[e.jsx("button",{onClick:s,"aria-label":"create game",children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105 flex items-end justify-center",children:[e.jsx("img",{src:"createGame.svg",className:"h-24 object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Create Game"})]})}),e.jsx("button",{onClick:l,className:"ml-8","aria-label":"join game",children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105",children:[e.jsx("img",{src:"joinGame.svg",className:"h-full w-full object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Join Game"})]})})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1 mt-5",children:"Problems"}),e.jsx(Pt,{})]})]})}),e.jsx(Gt,{})]})},Et=()=>{const[t,a]=E($),[s,l]=d.useState(""),[r,n]=d.useState(""),[i,o]=d.useState(!1);d.useEffect(()=>{t.isOpen&&p()},[t]);const p=()=>{l(""),n("")},m=h=>{if(!i){if(h.preventDefault(),s==="")return j.error("Email can not be empty");if(!fe(s))return j.error("Please enter a valid email");if(r==="")return j.error("Password can not be empty");if(s.length>40)return j.error("Email can not exceed 40 characters");if(r.length>30)return j.error("Password can not exceed 30 characters");o(!0),fetch(Ve,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"native",email:s,password:r})}).then(x=>x.json()).then(x=>{x.errors?j.error(x.errors):(j.success("Sign In Successfully"),localStorage.setItem("userData",JSON.stringify(x.data)),p(),a(f=>({...f,isOpen:!1,isLogin:!0})))}).catch(x=>{console.error(x)}).finally(()=>{o(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign In"}),e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:s,name:"email",onChange:h=>{l(h.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:r,name:"password",onChange:h=>{n(h.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{"aria-label":"submit",disabled:i,className:"w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s mt-6 disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-5",children:["Not Registered?",e.jsx("button",{"aria-label":"to create account",onClick:()=>{a(h=>({...h,type:"register"}))},className:"text-blue-400 hover:underline ml-3",children:"Create Account"})]})]})},Tt=()=>{const[t,a]=E($),[s,l]=d.useState(""),[r,n]=d.useState(""),[i,o]=d.useState(""),[p,m]=d.useState(""),[h,x]=d.useState(!1);d.useEffect(()=>{t.isOpen&&f()},[t]);const f=()=>{l(""),n(""),o(""),m("")},y=w=>{if(!h){if(w.preventDefault(),U(s))return j.error("Name should not contain spaces");if(s==="")return j.error("Name can not be empty");if(s.length>30)return j.error("UserName should not exceed 30 characters");if(r==="")return j.error("Email can not be empty");if(!fe(r))return j.error("Please enter a valid email");if(r.length>40)return j.error("Email should not exceed 40 characters");if(i==="")return j.error("Password can not be empty");if(U(i))return j.error("Password should not contain spaces");if(i.length>30)return j.error("Password shoule not exceed 30 characters");if(p!==i)return j.error("Passwords are not matched");x(!0),fetch(Ke,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,email:r,password:i})}).then(k=>k.json()).then(k=>{k.errors?j.error(k.errors):(j.success("Sign Up Successfully"),localStorage.setItem("userData",JSON.stringify(k.data)),f(),a(g=>({...g,isOpen:!1,isLogin:!0})))}).catch(k=>{j.error(k.errors)}).finally(()=>{x(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign Up"}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Name"}),e.jsx("input",{type:"name",name:"name",value:s,onChange:w=>l(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",name:"email",value:r,onChange:w=>n(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",name:"password",value:i,onChange:w=>o(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Confirm Password"}),e.jsx("input",{type:"password",name:"confirmPassword",value:p,onChange:w=>m(w.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{"aria-label":"submit",disabled:h,className:" mt-5 w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-3",children:["Already have an account",e.jsx("button",{"aria-label":"to sign in",className:"text-blue-300 hover:underline ml-3",onClick:()=>{a(w=>({...w,type:"login"}))},children:"Sign In"})]})]})},It=()=>{const[t,a]=d.useState(""),[s,l]=E($),[r,n]=d.useState(),i=T(),o=m=>{l(h=>({...h,isOpen:!1})),i(`/problem?id=${m}`)},p=()=>{const m=localStorage.getItem("userData");if(!m){j.error("Login timeout"),l(f=>({...f,isOpen:!1,isLogin:!1}));return}const x=JSON.parse(m).access_token;fetch(at,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`}}).then(f=>{console.log(f),f.status===200&&n([])})};return d.useEffect(()=>{if(s.isOpen){const m=localStorage.getItem("userData");if(!m){j.error("Login timeout"),l(f=>({...f,isOpen:!1,isLogin:!1}));return}const h=JSON.parse(m);a(h.user.name);const x=h.access_token;fetch(st,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`}}).then(f=>f.json()).then(f=>{n(f)})}},[s]),e.jsxs("div",{className:" w-[800px] h-[560px] bg-dark-layer-1 px-10",children:[e.jsxs("div",{className:" h-[100px] mt-[20px] px-3 text-white font-semibold text-2xl flex items-center tracking-wide",children:[e.jsxs("span",{className:" text-dark-yellow mr-[10px]",children:[t,"'s"]}),"Host History",e.jsx("button",{onClick:p,className:"ml-auto mr-3 py-1 px-3 cursor-pointer rounded bg-dark-fill-3 hover:bg-dark-fill-2 transition-all font-medium text-base text-dark-pink",children:"Clear"})]}),e.jsxs("div",{className:"h-[420px] overflow-y-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-dark-gray-8 text-left border-b-[1px] h-[60px]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-2 w-[10%]",children:"GameId"}),e.jsx("th",{className:"py-3 px-2 w-[25%]",children:"Problems"}),e.jsx("th",{className:"py-3 px-2 w-[30%]",children:"Players"}),e.jsx("th",{className:"py-3 px-2 w-[15%] text-center",children:"Time"})]})}),e.jsx("tbody",{className:"text-dark-gray-8 ",children:r&&r.length>0&&r.map((m,h)=>e.jsxs("tr",{className:`${h%2===1?"bg-dark-fill-3":""}`,children:[e.jsx("td",{className:"py-3 px-3",children:m.contestId}),e.jsx("td",{className:"py-3 px-2",children:m.problems.map((x,f)=>e.jsx("div",{className:"font-semibold leading-7 hover:text-blue-500 transition-all cursor-pointer",onClick:()=>o(x.id),children:x.title},f))}),e.jsx("td",{className:"py-4 px-2 flex flex-wrap",children:m.players.map((x,f)=>e.jsxs("div",{className:"mr-[12px] mb-1 flex items-center",children:[e.jsx("img",{src:`${A}&seed=${x.name}`,className:"h-[25px] mr-[4px]"}),x.name]},f))}),e.jsxs("td",{className:"py-3 text-center text-dark-gray-7",children:[e.jsx("div",{children:new Date(m.startedAt).toLocaleDateString()}),e.jsx("div",{children:new Date(m.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},h))})]}),r&&r.length===0&&e.jsx("div",{className:"h-[300px] w-full items-center justify-center flex text-xl tracking-wide text-dark-gray-7",children:"You have no host history"})]})]})},$t=()=>{const[t,a]=E($),s=()=>{a(l=>({...l,isOpen:!1}))};return e.jsxs("div",{children:[e.jsx("div",{className:`z-40 absolute top-0 w-full h-full flex items-center justify-center bg-black transition-all duration-500 ${t.isOpen?" opacity-50 ":"pointer-events-none opacity-0"}`,onClick:s}),e.jsxs("div",{className:`w-fit absolute left-[50%] translate-y-[-50%] translate-x-[-50%] flex justify-center z-50 rounded-lg overflow-hidden
        transition-all duration-500 ${t.isOpen?"top-[40%] opacity-100":"top-[-60%] opacity-0"} `,children:[e.jsx("button",{className:"absolute bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center text-white right-[5px] top-[5px]",children:e.jsx(W,{className:"h-6 w-6",onClick:s})}),t.type==="register"&&e.jsx(Tt,{}),t.type==="login"&&e.jsx(Et,{}),t.type==="profile"&&e.jsx(It,{})]})]})};function At(){return e.jsx(Ne,{children:e.jsxs("div",{className:"bg-dark-layer-2 min-h-screen relative",children:[e.jsx(Le,{position:"top-center",autoClose:2500,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),e.jsx($t,{}),e.jsxs(Be,{children:[e.jsx(J,{path:"/",element:e.jsx(Ot,{})}),e.jsx(J,{path:"problem",element:e.jsx(ut,{})}),e.jsx(J,{path:"gameHost",element:e.jsx(bt,{})}),e.jsx(J,{path:"gamePlayer",element:e.jsx(Ct,{})}),e.jsx(J,{path:"*",element:e.jsx(Fe,{to:"/",replace:!0})})]})]})})}ye.createRoot(document.getElementById("root")).render(e.jsx(Ae,{children:e.jsx(At,{})}));
