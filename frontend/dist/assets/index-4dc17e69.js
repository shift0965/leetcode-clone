import{r as c,j as e}from"./react-bb1a8b08.js";import{c as ge}from"./react-dom-b05b0288.js";import{L as _,u as je,B as ye}from"./react-router-dom-bd488c8a.js";import{F as Ne,a as be,b as ee,B as L,I as ve,A as we,c as ke,C as Se,d as te,e as D,f as Q,g as X,h as se,i as Ce,j as Pe,G as Ge,k as Oe}from"./react-icons-ef56d0db.js";import{R as U,a as I,b as ae,c as W,d as Ee}from"./recoil-c3334d42.js";import{Q as N,k as Te}from"./react-toastify-ca6d5611.js";import{m as P}from"./framer-motion-ca35d016.js";import{S as Y}from"./react-split-394c0406.js";import{G as Ie,E as $e}from"./@codemirror-4e45e905.js";import{R as Ae,v as Je}from"./@uiw-0006cca6.js";import{a as $,d as Le,e as B}from"./react-router-c4336f7a.js";import{l as M}from"./socket.io-client-5e3fa801.js";import{C as _e}from"./react-confetti-4487dd03.js";import{l as re}from"./lodash-8f34d9d6.js";import{Y as Me}from"./react-youtube-4df3b629.js";import"./fast-deep-equal-ca765bc5.js";import"./scheduler-765c72db.js";import"./@remix-run-e5357272.js";import"./clsx-1229b3e0.js";import"./prop-types-e0d21109.js";import"./split.js-822f4990.js";import"./@lezer-b3acbd76.js";import"./crelt-7bb88e1d.js";import"./style-mod-ae491175.js";import"./w3c-keyname-9fb136d3.js";import"./@babel-df62547b.js";import"./engine.io-client-b8dcd8ee.js";import"./engine.io-parser-a5b7cb40.js";import"./@socket.io-3e1df240.js";import"./socket.io-parser-44417fca.js";import"./youtube-player-63f3f564.js";import"./sister-57707ffb.js";import"./load-script-d550e3b0.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const w="",Re=":3001",ne=`${w}/api/1.0/problems/`,Be=`${w}/api/1.0/problems/details`,ze=`${w}/api/1.0/workspace/run`,Fe=`${w}/api/1.0/workspace/submit`,He=`${w}/api/1.0/user/signin`,De=`${w}/api/1.0/user/signup`,Ue=`${w}/api/1.0/contest/hostCheckGame`,We=`${w}/api/1.0/contest/hostCreateGame`,Ye=`${w}/api/1.0/contest/hostTerminateGame`,Ke=`${w}/api/1.0/contest/hostStartGame`,Ve=`${w}/api/1.0/contest/hostGetPlayersCode`,Z=`${w}/api/1.0/contest/hostSendMessage`,qe=`${w}/api/1.0/contest/hostCloseGame`,Qe=`${w}/api/1.0/contest/hostGetHistory`,Xe=`${w}/api/1.0/contest/playerJoinGame`,Ze=`${w}/api/1.0/contest/playerCheckGame`,T="https://api.dicebear.com/6.x/avataaars/svg?size=64",et=`${w}/api/1.0/contest/playerExitGame`,tt=`${w}/api/1.0/contest/playerSubmit`,le=`${w}/api/1.0/contest/getPlayers`,K=`${w}/api/1.0/contest/getProblems`,ie=`${w}/api/1.0/contest/getPlayersProgress`,oe=`${w}/api/1.0/contest/getTimeLimit`,st=`${w}/api/1.0/contest/getGameResult`,R=Re,at=()=>{const[t,a]=c.useState(!1),[s,n]=c.useState(0),r=i=>{const l=Math.floor(i/3600),o=Math.floor(i%3600/60),m=i%60;return`${l<10?"0"+l:l}:${o<10?"0"+o:o}:${m<10?"0"+m:m}`};return c.useEffect(()=>{let i;return t&&(i=setInterval(()=>{n(l=>l+1)},1e3)),()=>clearInterval(i)},[t]),e.jsx("div",{children:t?e.jsxs("div",{className:"flex items-center space-x-2 bg-dark-fill-3 p-1.5 cursor-pointer rounded hover:bg-dark-fill-2",children:[e.jsx("div",{children:r(s)}),e.jsx(Ne,{onClick:()=>{a(!1),n(0)}})]}):e.jsx("div",{className:"flex items-center p-1 h-8 hover:bg-dark-fill-3 rounded cursor-pointer",onClick:()=>a(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})})})})},A=U({key:"authModalState",default:{isOpen:!1,type:"login",isLogin:!1}}),ce=U({key:"bulletSwitchState",default:!0}),z=U({key:"loadingState",default:!0}),F=({isWorkspace:t=!1})=>{const a=()=>{localStorage.removeItem("userData"),n(i=>({...i,isLogin:!1})),N.success("Sign Out Successfully ")},[s,n]=I(A),r=()=>{n(i=>({...i,isOpen:!0,type:"login"}))};return c.useEffect(()=>{const i=localStorage.getItem("userData");i?JSON.parse(i).access_expired>new Date().getTime()/1e3?n(o=>({...o,isLogin:!0})):(localStorage.removeItem("userData"),n(o=>({...o,isLogin:!1}))):n(l=>({...l,isLogin:!1}))},[]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:`flex w-full items-center justify-between ${t?"":"max-w-[1200px] mx-auto"}`,children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[t&&e.jsx(at,{}),s.isLogin?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" relative flex items-center text-2xl py-1 cursor-pointer",onClick:()=>n(i=>({...i,isOpen:!0,type:"profile"})),children:e.jsx(be,{})}),e.jsx("button",{className:"bg-dark-fill-3 py-1.5 px-3 cursor-pointer rounded text-brand-orange hover:bg-dark-fill-2 transition-all",onClick:a,children:e.jsx(ee,{})})]}):e.jsx("button",{className:" bg-dark-fill-3 py-1 px-2 cursor-pointer rounded",onClick:r,children:"Sign In"})]})]})})},rt=({handleRun:t,handleSubmit:a,splitRatio:s,pending:n,setSplitRatio:r})=>e.jsx("div",{className:"flex bg-dark-layer-1 absolute bottom-0 z-10 w-full",children:e.jsxs("div",{className:"mx-5 my-[10px] flex justify-between w-full",children:[e.jsx("div",{className:"mr-2 flex flex-1 flex-nowrap items-center space-x-4",children:n?e.jsx("div",{className:"px-3 py-1.5 font-medium text-dark-label-2 items-center transition-all inline-flex text-sm",children:"Pending..."}):e.jsxs("button",{className:"px-3 py-1.5 font-medium items-center transition-all inline-flex bg-dark-fill-3 text-sm hover:bg-dark-fill-2 text-dark-label-2 rounded-lg pl-3 pr-2",onClick:()=>{r(i=>i>90?50:100)},children:["Console",e.jsx("div",{className:`ml-1 transform transition duration-200 ease-in-out flex items-center ${s>90?"rotate-0":"rotate-180"}`,children:e.jsx(L,{className:"fill-gray-6 mx-1 fill-dark-gray-6"})})]})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx("button",{className:`px-3 py-1.5 text-sm font-medium items-center whitespace-nowrap transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 text-dark-label-2 rounded-lg 
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:t,disabled:n,children:"Run"}),e.jsx("button",{className:`px-3 py-1.5 font-medium items-center transition-all focus:outline-none inline-flex text-sm text-white bg-dark-green-s hover:bg-green-3 rounded-lg
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:a,disabled:n,children:"Submit"})]})]})}),E=({value:t,label:a})=>{const s=t===void 0?"undefined":typeof t=="string"?t:JSON.stringify(t);return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-4 text-white",children:[a," ="]}),e.jsx("div",{className:"w-full cursor-text rounded-lg border px-3 py-[8px] bg-dark-fill-3 border-transparent text-white mt-2",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:s})})]})},nt=({problem:t,showTestcases:a})=>{const[s,n]=c.useState(0);return e.jsxs("div",{className:`${a?"block":"hidden"} py-3`,children:[e.jsx("div",{className:"flex",children:t.exampleCases.map((r,i)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>n(i),children:e.jsx("div",{className:"flex flex-wrap items-center",children:e.jsxs("div",{className:`items-center text-sm font-semibold transition-all focus:outline-none inline-flex  hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${s===i?"text-white bg-dark-fill-3":"text-gray-400"}
                `,children:["Case ",i+1]})})},i))}),e.jsx("div",{className:"mt-4",children:t.exampleCases.map((r,i)=>e.jsx("div",{className:`${i===s?"block":"hidden"}`,children:e.jsx("div",{className:"mt-4",children:t.inputKeys.map((l,o)=>{var m;return e.jsx(E,{label:l,value:(m=t.exampleCases[s])==null?void 0:m.input[o]},o)})})},i))})]})},lt=({problem:t,pending:a,showTestcases:s,runResults:n,execError:r,submitResult:i})=>{var x;const[l,o]=c.useState(0),[m,d]=c.useState(!0);return c.useEffect(()=>{d(!0),n==null||n.forEach(u=>{u.passed||d(!1)})},[n]),e.jsxs("div",{className:`${s?"hidden":"block"} py-4`,children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-dark-pink font-semibold text-xl ml-1",children:r.name}),e.jsx("div",{className:"w-full cursor-text rounded-lg border px-3 py-[8px] bg-dark-fill-3 border-transparent text-dark-pink bg-dark-pink bg-opacity-[15%] mt-3",children:e.jsxs("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:[r.line&&`Line ${r.line}
`,r.message]})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:m?e.jsx("span",{className:"text-dark-green-s",children:"Accepted"}):e.jsx("span",{className:"text-dark-pink",children:"Wrong Answer"})}),e.jsx("div",{className:"flex mt-1",children:t.exampleCases.map((u,f)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>o(f),children:e.jsx("div",{className:"flex flex-wrap items-center gap-y-4",children:e.jsxs("div",{className:`items-center transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${l===f?"text-white":"text-gray-500"}
                `,children:[e.jsx("div",{className:`w-1 h-1 rounded-full mr-2 ${n[f].passed?" bg-dark-green-s":"bg-dark-pink"}`}),"Case ",f+1]})})},f))}),t.exampleCases.map((u,f)=>e.jsxs("div",{className:`${f===l?"block":"hidden"}`,children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Stdin",value:u.input.map(p=>JSON.stringify(p)).join(", ")})}),e.jsx("div",{className:`mt-4 ${n[l].stdout.length>0?"block":"hidden"}`,children:e.jsx(E,{label:"Stdout",value:n[l].stdout.map(p=>typeof p=="string"?p:JSON.stringify(p)).join(`
`)})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:n[l].output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:n[l].expected})})]},f))]}),i&&i.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-green-s",children:"Passed"})}),e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:"All the test cases are passed"})]}),i&&!i.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-pink",children:"Failed"})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Input",value:(x=i.input)==null?void 0:x.map(u=>JSON.stringify(u)).join(", ")})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:i.output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:i.expected})})]})]}),!(n||r||i)&&e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:a?"Pending...":"You need to run you code first"})]})},V=({userCode:t,onChangeCode:a,readOnly:s=!1,textLarge:n=!1})=>e.jsx("div",{className:"w-full overflow-y-auto h-full flex flex-col",children:e.jsx(Ae,{className:`codeMirror ${n?"text-[16px]":"text-[14px]"}`,value:t,onChange:r=>a&&a(r),theme:Je,extensions:[Ie(),$e.lineWrapping],basicSetup:{autocompletion:!1,highlightActiveLine:!s,foldGutter:!s,highlightActiveLineGutter:!s},editable:!s,readOnly:s})}),de=({problem:t,gameMode:a=!1,gameData:s=void 0})=>{const[n,r]=c.useState(!1),[i,l]=c.useState(""),[o,m]=c.useState(!0),[d,x]=c.useState(),[u,f]=c.useState(),[p,h]=c.useState(),[g,b]=c.useState(50),[j,y]=c.useState(!1),v=()=>{n?(document.exitFullscreen(),r(!1)):(document.documentElement.requestFullscreen(),r(!0))},S=()=>{y(!0),h(void 0),x(void 0),f(void 0)},C=()=>{m(!1),y(!1)},O=()=>{S(),fetch(ze,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:t.id||0,language:"js",code:i})}).then(k=>k.json()).then(k=>{if(k.errors)throw new Error(k.errors);k.type==="error"?h(k.data):x(k.data)}).catch(k=>{N.error(k.message||"run failed")}).finally(()=>{C()})},J=()=>{S(),fetch(a?tt:Fe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a?{problemId:t.id||0,language:"js",code:i,playerId:s==null?void 0:s.player.id,gameId:s==null?void 0:s.player.gameId,progress:s==null?void 0:s.myProgress.progress,finishedAt:s==null?void 0:s.myProgress.finishedAt}:{problemId:t.id||0,language:"js",code:i})}).then(G=>G.json()).then(G=>{if(G.errors)throw new Error(G.errors);if(G.type==="error")h(G.data);else if(f(G.data),G.data.passed){N.success("Passed !");const q=JSON.parse(localStorage.getItem("problemStatus")||"{}");q[t.id]=!0,localStorage.setItem("problemStatus",JSON.stringify(q)),a&&(s==null||s.setMyProgress({id:s.myProgress.id,name:s.myProgress.name,progress:G.progress,finishedAt:G.finishedAt}))}}).catch(G=>{N.error(G.message||"run failed")}).finally(()=>{C()})},ue=k=>{t&&(localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,k),a&&(s==null||s.updateCode(s.player.gameId,s.player.id,s.player.name,t.id,t.title,k))),l(k)},fe=()=>{if(t){const k=t.boilerplate.replace(/\n\s+/g,`
`);l(k),localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,k)}};return c.useEffect(()=>{if(t){const k=localStorage.getItem(`code?problem_id=${t.id}&${a&&"gameMode"}`);l(k!==null?k:t.boilerplate.replace(/\n\s+/g,`
`))}},[t]),e.jsx("div",{className:"w-full overflow-auto flex flex-col",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-layer-2 h-10 w-full",children:[e.jsx("div",{className:"flex items-center text-white",children:e.jsx("button",{className:"flex cursor-pointer items-center rounded-lg bg-dark-fill-3 text-dark-label-2 px-2 py-1 hover:bg-dark-fill-2",children:"JavaScript"})}),e.jsxs("div",{className:"flex items-center m-2",children:[e.jsx("button",{className:"editor-nav-btn group",onClick:fe,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:e.jsx(ve,{})})}),e.jsx("button",{className:"editor-nav-btn group",onClick:v,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:n?e.jsx(ke,{}):e.jsx(we,{})})})]})]}),e.jsxs("div",{className:" bg-dark-layer-1 h-full relative",children:[e.jsx("div",{className:"flex flex-col h-[calc(100vh-140px)]",children:e.jsxs(Y,{direction:"vertical",minSize:0,snapOffset:60,sizes:[g,100-g],className:"h-full",onDragEnd:k=>{b(k[0])},children:[e.jsx(V,{userCode:i,onChangeCode:ue}),e.jsxs("div",{className:"w-full px-5 overflow-auto relative",children:[e.jsxs("div",{className:"flex h-11 sticky top-0 bg-dark-layer-1 z-10",children:[e.jsx("div",{className:`flex h-full items-center text-white mx-2 border-b-2 cursor-pointer ${o?"border-white":"border-transparent"}`,onClick:()=>m(!0),children:"Testcases"}),e.jsx("div",{className:`flex h-full  items-center text-white mx-2 border-b-2 cursor-pointer ${o?"border-transparent":"border-white"}`,onClick:()=>m(!1),children:"Result"})]}),e.jsx(nt,{problem:t,showTestcases:o}),e.jsx(lt,{problem:t,pending:j,runResults:d,showTestcases:o,execError:p,submitResult:u})]})]})}),e.jsx(rt,{handleRun:O,handleSubmit:J,splitRatio:g,setSplitRatio:b,pending:j})]})]})})},me=({problem:t})=>e.jsx("div",{className:"flex px-0 py-4 h-[calc(100vh-88px)] overflow-y-auto",children:e.jsx("div",{className:"px-5",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsxs("div",{className:"flex-1 mr-2 text-lg font-semibold text-white",children:[t.id,". ",t.title]})}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsx("div",{className:`${t.difficulty==="Hard"?"bg-dark-pink text-dark-pink":t.difficulty==="Medium"?"bg-dark-yellow text-dark-yellow":"bg-dark-green-s text-dark-green-s"} inline-block rounded-[21px] bg-opacity-[.20] px-2.5 py-1 text-xs font-semibold`,children:t.difficulty})}),e.jsx("div",{className:"text-white text-md description mt-5",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6",children:t.exampleCases.map((a,s)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Example ",s+1,": "]}),e.jsxs("div",{className:"example-card",children:[a.image&&e.jsx("img",{src:`problemsImgs/${a.image}`,className:"mt-2 w-full max-w-[450px]"}),e.jsxs("pre",{className:"text-sm",children:[e.jsx("strong",{className:"text-white",children:"Input: "}),t.inputKeys.map((n,r)=>e.jsxs("span",{className:"mr-4",children:[n," = ",JSON.stringify(a.input[r])]},r)),e.jsx("br",{}),e.jsx("strong",{children:"Output: "}),JSON.stringify(a.output)," ",e.jsx("br",{}),a.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Explanation: "}),a.explanation]})]})]})]},s))}),e.jsxs("div",{className:"my-8 pb-4",children:[e.jsx("div",{className:"text-white text-md font-semibold",children:"Constraints:"}),t.constraints.map((a,s)=>e.jsx("ul",{className:"text-white ml-5 list-disc mt-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},s))]})]})})}),it=({problem:t})=>e.jsx("div",{className:"bg-dark-layer-1",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-hidden",children:e.jsx("div",{className:"bg-dark-layer-1 rounded-t-[5px] px-5 py-[7px] text-sm cursor-pointer",children:"Description"})}),e.jsx(me,{problem:t})]})}),ot=()=>{const t=$(),[a]=je(),[s,n]=c.useState(),[r,i]=I(z),l=a.get("id")||0;return c.useEffect(()=>{i(!0),fetch(`${Be}?id=${l}`).then(o=>(o.status!==200&&o.json().then(m=>{N.error(m.errors),t("/")}),o.json())).then(o=>{n(o),i(!1)})},[l]),e.jsxs(e.Fragment,{children:[e.jsx(F,{isWorkspace:!0}),!r&&s&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsx(it,{problem:s}),e.jsx(de,{problem:s})]})})]})},ct=({setGameId:t,setCurrentState:a})=>{const[s,n]=c.useState([]),[r,i]=c.useState([]),[l,o]=c.useState(60);c.useEffect(()=>{fetch(ne,{method:"GET"}).then(f=>f.json()).then(f=>{n(f)})},[]);const m=()=>{i(f=>[...f,0])},d=(f,p)=>{i(h=>{const g=[...h];return g[p]=f,g})},x=f=>{i(p=>{const h=[...p];return h.splice(f,1),h})},u=()=>{if(r.length===0)return N.error("No question is selected");if(new Set(r).size!==r.length)return N.error("Questions should not repeat");const f=localStorage.getItem("userData");if(!f)return N.error("Please Log In");const p=JSON.parse(f).access_token;fetch(`${We}`,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({timeLimit:l,problemList:r.map(h=>s[h].id)})}).then(h=>{h.status===401||h.status===403?(N.error("Login timeout"),localStorage.removeItem("userData"),a("GameCreating")):h.json().then(g=>{t(g.gameId),a("PlayersJoining")})})};return e.jsxs(P.div,{className:"w-11/12 md:w-9/12 mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Create Game"}),e.jsx("h1",{className:"text-xl mt-6 ml-1",children:"Questions"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Id"}),e.jsx("th",{className:"px-3 py-3 w-[35%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%]"})]})}),e.jsx("tbody",{children:r.map((f,p)=>{const h=s[f],g=h.difficulty==="Easy"?"text-dark-green-s":h.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${p%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("div",{className:"mr-2",children:p+1})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("select",{className:" bg-dark-fill-2 outline-none py-1.5 px-2 rounded-lg text-dark-gray-8 font-medium",onChange:b=>{d(Number(b.target.value),p)},children:s.map((b,j)=>e.jsx("option",{value:j,children:b.title},j))})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:h.tags.map(b=>e.jsxs("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:[b.title," "]},b.id))})}),e.jsx("td",{className:`px-3 py-4 ${g}`,children:h.difficulty}),e.jsx("td",{children:e.jsx("button",{className:"mx-auto flex items-center text-3xl cursor-pointer rounded hover:text-dark-pink transition-all",onClick:()=>x(p),children:e.jsx(Se,{})})})]},p)})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"mt-5 py-1 px-3 cursor-pointer rounded  font-medium bg-dark-gray-8 hover:bg-dark-gray-7 transition-all text-dark-layer-2",onClick:m,children:"Add Question"})})]}),e.jsxs("div",{className:" mt-5",children:[e.jsx("h1",{className:"text-xl mt-10 ml-1",children:"Time Limits"}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsx("input",{type:"text",value:l,onChange:f=>o(Number(f.target.value)),className:" bg-dark-fill-2 px-3 py-1.5 w-16 outline-none rounded-lg"}),e.jsx("div",{className:"ml-2 text-lg",children:"Minutes"})]})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("button",{onClick:u,className:"bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Create Game"})})]})},xe=({players:t})=>{const a=[4,3,5,10,1,2,11,8,0,9,6,7];return e.jsx("div",{className:"flex flex-wrap w-[760px] mx-auto justify-left",children:a.map((s,n)=>{var i;const r=t[s];return e.jsx("div",{className:` -mb-[28px] h-[120px] w-[120px] mx-[32px] bg-dark-fill-3 rotate-45 flex justify-center items-center rounded-md
              ${(n===0||n===7)&&" ml-[124px]"}
              ${n===10&&" ml-[215px]"}
              ${r&&"bg-green-200 bg-opacity-40"}
               transition-all duration-300`,children:e.jsx("div",{className:`-rotate-45 ${!r&&"opacity-0"} transition-all duration-300`,children:r&&e.jsxs(e.Fragment,{children:[e.jsx("img",{alt:"image",src:`${T}&seed=${(i=t[s])==null?void 0:i.name}`,className:"h-20 mb-[34px]"}),e.jsx("div",{className:`absolute left-[50%] -translate-x-[50%] bottom-[3px] text-white w-20 break-all text-center max-h-8 overflow-hidden leading-4
             ${r.name.length>10?"text-sm":"font-medium text-md"}`,children:r.name})]})})},n)})})},dt=({gameId:t})=>{const a=c.useRef(M(R)).current,[s,n]=c.useState([]);return c.useEffect(()=>{if(t)return fetch(le,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(r=>r.json()).then(r=>{n(r.players)}),a.emit("ws-host-joinGame",{gameId:t}),a.on("ws-host-playerJoinGame",function(r){n(i=>[...i,{id:r.id,name:r.name,gameId:t}])}),a.on("ws-host-playerExitGame",function(r){n(i=>i.filter(l=>l.id!=r.id))}),()=>{a.off("ws-host-playerExitGame"),a.off("ws-host-playerJoinGame")}},[t]),e.jsxs(P.div,{className:"text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"mt-14",children:[e.jsxs("h1",{className:"text-4xl text-center",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7 mt-6",children:"Waiting For Players To Join..."})]}),e.jsx("div",{className:" mt-16",children:e.jsx(xe,{players:s})})]})},mt=({gameId:t,playersCode:a,focusedPlayerId:s,playersProgress:n,setFocusedPlayerId:r})=>{var p;const[i,l]=c.useState(""),o=a.find(h=>h.id===s),[m,d]=c.useState((o==null?void 0:o.lastModifyedProblem)||0),x=(p=n.find(h=>h.id===(o==null?void 0:o.id)))==null?void 0:p.progress,u=()=>{o&&fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:o.id,message:i})}),l("")},f=()=>{fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:-1,message:i})}),l("")};return e.jsx("div",{className:"text-gray-50 flex gap-[12px] px-[10px] mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto relative",children:o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full  shrink rounded-lg overflow-hidden bg-dark-layer-1",children:e.jsx(V,{userCode:o.problems[m].code,readOnly:!0,textLarge:!0})}),e.jsxs("div",{className:"flex flex-col w-[300px] shrink-0 text-white bg-dark-layer-2",children:[e.jsxs("div",{className:"w-full overflow-auto flex flex-col",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-b-[1px] border-dark-fill-2",children:"Problems"}),e.jsx("div",{className:"overflow-y-auto",children:o.problems.map((h,g)=>e.jsxs("div",{className:`flex items-center px-4 py-[7px] text-sm  cursor-pointer w-full h-14 hover:bg-dark-fill-3 ${g===m?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>d(g),children:[e.jsxs("span",{children:[g+1,". ",h.title]}),x&&x.map((b,j)=>e.jsx("span",{className:`text-dark-green-s ml-auto text-[18px] ${b.id===h.id&&b.passed?"block":"hidden"}`,children:e.jsx(te,{})},j))]},g))})]}),e.jsxs("div",{className:"mt-auto h-40",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-t-[1px] border-dark-fill-2",children:"Send Message"}),e.jsx("div",{className:"px-2",children:e.jsx("input",{value:i,onChange:h=>l(h.target.value),onKeyDownCapture:h=>{h.key==="Enter"&&u()},className:" w-full bg-dark-fill-2 rounded-lg outline-none text-lg px-3 py-2 resize-none"})}),e.jsxs("div",{className:"flex px-3 mt-3",children:[e.jsx("button",{className:" px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-gray-6 hover:bg-opacity-80 rounded-lg",onClick:f,children:"Send Group"}),e.jsx("button",{className:"ml-auto px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-green-s hover:bg-opacity-80 rounded-lg",onClick:u,children:"Send"})]})]})]}),e.jsx("div",{className:" absolute text-[24px] rounded-full border-[1.5px] border-white p-1 left-1/2 -translate-x-1/2 top-[30px] opacity-30 hover:opacity-90 transition-all cursor-pointer",onClick:()=>r(void 0),children:e.jsx(D,{})})]})})},xt=({gameId:t})=>{const[a,s]=c.useState([]),[n,r]=c.useState([]),[i,l]=c.useState([]),[o,m]=c.useState(!0),d=c.useRef(M(R)).current,[x,u]=c.useState(void 0),f=()=>{s(p=>(p.sort((h,g)=>{const b=h.progress.reduce((y,v)=>v.passed?y+1:y,0),j=g.progress.reduce((y,v)=>v.passed?y+1:y,0);return b>j?-1:b<j?1:h.finishedAt&&g.finishedAt?new Date(h.finishedAt).getTime()-new Date(g.finishedAt).getTime():0}),[...p]))};return c.useEffect(()=>{fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(p=>p.json()).then(p=>{r(p.problems)}),d.emit("ws-host-joinGame",{gameId:t})},[]),c.useEffect(()=>(n.length>0&&(fetch(ie,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(p=>p.json()).then(p=>{s(p.progress.map(h=>({id:h.id,name:h.name,finishedAt:h.finishedAt,progress:h.progress?JSON.parse(h.progress):n.map(g=>({id:g.id,passed:!1}))}))),f()}),fetch(Ve,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(p=>p.json()).then(p=>{l(p.playersCode.map(h=>({id:h.id,name:h.name,problems:n.map(g=>{const b=h.problems.findIndex(j=>j.id===g.id);return b===-1?{id:g.id,title:g.title,code:g.boilerplate.replace(/\n\s+/g,`
`)}:{...h.problems[b]}})})))}),d.on("ws-host-updateProgress",function({playerId:p,progress:h,finishedAt:g}){s(b=>(b.forEach(j=>{j.id===p&&(j.progress=h,j.finishedAt=g)}),[...b])),f()}),d.on("ws-host-playerExitGame",function(p){s(h=>h.filter(g=>g.id!=p.id)),l(h=>h.filter(g=>g.id!=p.id))}),d.on("ws-host-playerJoinGame",function(p){s(h=>[...h,{id:p.id,name:p.name,finishedAt:null,progress:n.map(g=>({id:g.id,passed:!1}))}]),l(h=>(h.push({id:p.id,name:p.name,problems:n.map(g=>({id:g.id,title:g.title,code:g.boilerplate.replace(/\n\s+/g,`
`)}))}),[...h]))}),d.on("ws-host-playerUpdateCode",function(p){l(h=>{const g=h.findIndex(b=>b.id===p.id);if(g!==-1){const b=h[g].problems.findIndex(j=>j.id===p.problemId);b!==-1&&(h[g].problems[b].code=p.code,h[g].lastModifyedProblem=b)}return[...h]})})),()=>{d.off("ws-host-updateProgress"),d.off("ws-host-playerJoinGame"),d.off("ws-host-playerExitGame"),d.off("ws-host-playerUpdateCode")}),[n]),e.jsxs(P.div,{className:"flex relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${o?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>m(!0),children:e.jsx(L,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0  bg-dark-layer-1 mt-[8px] h-[calc(100vh-64px)] rounded-lg transition-all duration-500
        ${o?"translate-x-0 w-[300px] ml-[8px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:"h-[64px] flex items-center border-b-[1px] border-dark-fill-2 px-3 relative",children:[e.jsxs("h1",{className:"text-xl",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[14px]
             right-[8px]`,onClick:()=>m(!1),children:e.jsx(L,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-128px)] overflow-y-auto overflow-hidden rounded-b-lg",children:a.map((p,h)=>{const g=p.progress.length,b=p.progress.reduce((j,y)=>y.passed?j+1:j,0);return e.jsxs("div",{className:`h-[72px] border-b-[1px] border-dark-fill-2 flex items-center  px-3 cursor-pointer 
                          hover:bg-dark-fill-3 ${x===p.id?"bg-dark-fill-3":"bg-dark-layer-1"}`,onClick:()=>{x===p.id?u(void 0):u(p.id)},children:[e.jsx("div",{className:"text-xl font-semibold text-dark-yellow",children:h+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${p.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:"text-lg ml-3",children:p.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[b,"/",g]})]},h)})})]}),!x&&e.jsx("div",{className:"shrink text-gray-50 mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-[12px] px-[14px]",children:i.map((p,h)=>{const g=p.problems[p.lastModifyedProblem||0];return e.jsxs("div",{className:"h-[300px] w-[calc(50%-10px)] relative rounded-lg bg-dark-layer-1 overflow-hidden cursor-pointer",onClick:()=>u(p.id),children:[e.jsx("div",{className:" absolute bottom-0",children:e.jsx(V,{userCode:g.code,readOnly:!0})}),e.jsxs("div",{className:" absolute top-2 left-3 inline-flex bg-sky-900 items-center rounded-lg px-2 py-1",children:[e.jsx("img",{src:`${T}&seed=${p.name}`,alt:"avatar",className:" h-[26px] mr-1"}),p.name]}),e.jsx("div",{className:" absolute top-2 right-3 inline-flex bg-emerald-900  items-center rounded-lg px-2 py-1",children:g.title})]},h)})})}),x&&e.jsx(mt,{gameId:t,playersCode:i,focusedPlayerId:x,playersProgress:a,setFocusedPlayerId:u})]})},he=({timeLeft:t,setTimeLeft:a})=>{const s=n=>{const r=Math.floor(n/3600),i=Math.floor(n%3600/60),l=n%60;return`${r<10?"0"+r:r}:${i<10?"0"+i:i}:${l<10?"0"+l:l}`};return c.useEffect(()=>{const n=setInterval(()=>{a(r=>r&&(r<=0?0:r-1))},1e3);return()=>clearInterval(n)},[a]),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center p-1 h-8 cursor-default",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})}),e.jsx("div",{children:s(t)})]})})},ht=({gameId:t,currentState:a,setCurrentState:s})=>{const n=$(),[r,i]=c.useState();c.useEffect(()=>{if(a==="GameWatching"&&t){const d=()=>{fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(u=>u.json()).then(u=>{const f=u.endedAt-new Date().getTime();i(Math.floor(f/1e3))})};d();const x=setInterval(()=>{d()},6e4);return()=>clearInterval(x)}},[a,t]);const l=()=>{const d=localStorage.getItem("userData");if(d&&t){const x=JSON.parse(d).access_token;fetch(Ke,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({gameId:t})}).then(u=>{u.status===200?(N("🔥 Game Started !"),s("GameWatching")):N.error("Start Game failed")})}},o=()=>{const d=localStorage.getItem("userData");if(d&&t){const x=JSON.parse(d).access_token;fetch(Ye,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({gameId:t})}).then(u=>{u.status===200?n("/"):N.error("Shot down failed")})}},m=()=>{const d=localStorage.getItem("userData");if(d&&t){const x=JSON.parse(d).access_token;fetch(qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({gameId:t})}).then(u=>{u.status===200?s("GameResult"):n("/")})}};return c.useEffect(()=>{a==="GameWatching"&&r&&r<=0&&s("GameResult")},[r,a]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"relative h-11 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:"./gameHost.png",alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:"HOST"})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GameWatching"&&r&&e.jsx(he,{timeLeft:r,setTimeLeft:i}),a==="PlayersJoining"&&e.jsxs("div",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-green-s font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:l,children:[e.jsx("div",{className:"mr-2",children:"Start Game"}),e.jsx(Q,{})]}),a==="GameWatching"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-yellow font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:m,children:[e.jsx("div",{className:"mr-2",children:"Close Game"}),e.jsx(Q,{})]}),a==="PlayersJoining"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:o,children:[e.jsx("div",{className:"mr-2",children:"Shut Down"}),e.jsx(X,{})]}),a==="GameResult"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:o,children:[e.jsx("div",{className:"mr-2",children:"Leave"}),e.jsx(X,{})]})]})]})})},H=({name:t,place:a})=>e.jsxs("div",{className:"",children:[e.jsx("img",{src:`${T}&seed=${t}`,alt:"avatar",className:"w-24"}),e.jsx("div",{className:`rounded-lg text-center py-[3px] text-dark-layer-1 font-semibold  ${a===1?"bg-amber-200":a===2?"bg-slate-200":" bg-orange-200"}`,children:t})]}),pe=({gameId:t})=>{const[a,s]=c.useState([]),[n,r]=c.useState([]),[i,l]=I(z);c.useEffect(()=>{l(!0),fetch(st,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(m=>m.json()).then(m=>{s(m.players),r(m.problems),l(!1)})},[]);const o=m=>{const d=Math.floor(m/3600),x=Math.floor(m%3600/60),u=m%60;return`${d<10?"0"+d:d}:${x<10?"0"+x:x}:${u<10?"0"+u:u}`};return e.jsx("div",{className:" w-[700px] mx-auto",children:!i&&e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-center relative h-[400px] w-[600px] mx-auto ",children:[e.jsx(_e,{numberOfPieces:70,width:600,height:400}),a[0]&&e.jsx("div",{className:" absolute top-[75px]",children:e.jsx(H,{name:a[0].name,place:1})}),a[1]&&e.jsx("div",{className:" absolute top-[126px] left-[124px]",children:e.jsx(H,{name:a[1].name,place:2})}),a[2]&&e.jsx("div",{className:" absolute top-[149px] left-[380px]",children:e.jsx(H,{name:a[2].name,place:3})}),e.jsx("img",{src:"podium.png",alt:"",className:" h-[200px] mt-auto",color:"orange"})]}),e.jsx("div",{children:e.jsxs("table",{className:"w-full mx-auto mt-8",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Place"}),e.jsx("th",{className:"px-3 py-3 w-[20%] font-semibold",children:"Name"}),n.map((m,d)=>e.jsxs("th",{className:"px-3 py-3 w-[20%] font-semibold text-sm",children:[d+1,"-",m.title]},d)),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Time"})]})}),e.jsx("tbody",{className:"text-white",children:a.map((m,d)=>e.jsxs("tr",{className:`${d%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-8 py-4 text-dark-yellow font-bold",children:d+1}),e.jsx("td",{className:"pl-3 py-4 font-bold",children:m.name}),m.progress.map((x,u)=>e.jsx("td",{className:"pl-3 py-4 text-center",children:x?e.jsx("span",{className:"text-dark-green-s",children:e.jsx(se,{})}):e.jsx("div",{className:"text-dark-pink w-fit",children:e.jsx(Ce,{})})},u)),e.jsx("td",{className:"px-3 py-4 text-dark-gray-7",children:m.timeUsed?o(m.timeUsed):"-"})]},d))})]})})]})})},pt=()=>{const t=$(),[a,s]=c.useState(),[n,r]=c.useState("Loading");return c.useEffect(()=>{const i=localStorage.getItem("userData");if(!i)t("/"),N.error("Sign In Time Out");else{const l=JSON.parse(i).access_token;fetch(Ue,{method:"GET",headers:{"content-type":"application/json",Authorization:`Bearer ${l}`}}).then(o=>o.json()).then(o=>{o.founded?(s(o.contestId),r(()=>o.state==="created"?"PlayersJoining":o.state==="started"?"GameWatching":o.state==="closed"?"GameResult":"GameCreating")):r("GameCreating")})}},[]),e.jsxs(e.Fragment,{children:[n==="GameCreating"||n==="Loading"?e.jsx(F,{}):e.jsx(ht,{gameId:a,currentState:n,setCurrentState:r}),n==="GameCreating"&&e.jsx(ct,{setGameId:s,setCurrentState:r}),n==="PlayersJoining"&&a&&e.jsx(dt,{gameId:a}),n==="GameWatching"&&a&&e.jsx(xt,{gameId:a}),n==="GameResult"&&a&&e.jsx(pe,{gameId:a})]})},ut=({setCurrentState:t,setPlayer:a})=>{const[s,n]=c.useState(""),[r,i]=c.useState(""),l=()=>{if(s==="")return N.error("Name can not be empty");if(s.length>20)return N.error("Name too long");if(r==="")return N.error("Game id can not be empty");if(Number(r)>1e5||Number(r)<0)return N.error("Invalid game id");fetch(Xe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:r,playerName:s})}).then(o=>o.status!==200?o.json().then(m=>{throw m}):o.json()).then(o=>{const m={id:o.playerId,gameId:Number(r),name:s};a(m),localStorage.setItem("playerData",JSON.stringify(m)),o.gameState==="created"?t("GameWaiting"):o.gameState==="started"?(N("🔥 Game is started !"),t("GamePlaying")):N.error("Game is ended")}).catch(o=>{N.error(o.errors)})};return e.jsxs(P.div,{className:"flex flex-col items-center justify-center mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Join Game"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-lg",children:"Game Id"}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:r,onChange:o=>i(o.target.value)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg",children:"Name "}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:s,onChange:o=>n(o.target.value),onKeyDownCapture:o=>{o.key==="Enter"&&l()}})]}),e.jsx("button",{onClick:l,className:"mt-8 bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Join Game"})]})},ft=({player:t,setCurrentState:a})=>{const s=c.useRef(M(R)).current,[n,r]=c.useState([]),i=$();return c.useEffect(()=>{if(t)return fetch(le,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(l=>l.json()).then(l=>{r(l.players)}),fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(l=>l.json()).then(l=>{l.problems.forEach(o=>{localStorage.removeItem(`code?problem_id=${o==null?void 0:o.id}&gameMode`)})}),s.emit("ws-player-joinGame",{gameId:t.gameId}),s.on("ws-host-playerJoinGame",function(l){r(o=>[...o,{id:l.id,name:l.name,gameId:t.gameId}])}),s.on("ws-host-playerExitGame",function(l){r(o=>o.filter(m=>m.id!=l.id))}),s.on("ws-player-hostTerminateGame",function(){N.info("Host terminated game"),localStorage.removeItem("playerData"),i("/")}),s.on("ws-player-hostStartGame",function(){N("🔥 Game Started !"),a("GamePlaying")}),()=>{s.off("ws-host-playerExitGame"),s.off("ws-host-playerJoinGame"),s.off("ws-player-hostTerminateGame"),s.off("ws-player-hostStartGame")}},[]),e.jsx(P.div,{className:"w-11/12 md:w-9/12 mx-auto text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"mt-10",children:[e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7",children:"Game is about to start..."}),e.jsx("div",{className:"mt-16",children:e.jsx(xe,{players:n})})]})})},gt=({player:t,currentState:a,setCurrentState:s})=>{const[n,r]=c.useState(),[i,l]=I(ce),o=$(),m=()=>{(a==="GamePlaying"||a==="GameWaiting")&&t&&(fetch(et,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId,playerId:t.id})}),localStorage.removeItem("playerData")),localStorage.removeItem("playerData"),o("/")};return c.useEffect(()=>{if(a==="GamePlaying"&&t){const d=()=>{fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(u=>u.json()).then(u=>{const f=u.endedAt-new Date().getTime();r(Math.floor(f/1e3))})};d();const x=setInterval(()=>{d()},6e4);return()=>clearInterval(x)}},[a,t]),c.useEffect(()=>{a==="GamePlaying"&&n&&n<=0&&s("GameResult")},[n,a]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-10 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:`${T}&seed=${t.name}`,alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GamePlaying"&&e.jsxs("div",{className:"text-xl relative cursor-pointer flex h-9 w-9  justify-center items-center",title:`${i?"Turn off bullets":"Turn on bullets"}`,onClick:()=>{l(d=>!d)},children:[e.jsx("div",{className:`absolute text-dark-gray-6 text-3xl top-1/2 -translate-x-1/2 left-1/2 -translate-y-1/2
                            ${i?"opacity-0":"opacity-100"} transition-all`,children:e.jsx(Pe,{})}),e.jsx(Ge,{})]}),a==="GamePlaying"&&n&&e.jsx(he,{timeLeft:n,setTimeLeft:r}),e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink hover:bg-dark-fill-2 transition-all",onClick:m,children:[e.jsx("div",{className:"mr-2",children:"Exit"}),e.jsx(ee,{})]})]})]})]})})},jt=({player:t})=>{const a=c.useRef(M(R)).current,[s,n]=c.useState([]),r=["bg-sky-500","bg-pink-500","bg-yellow-500","bg-slate-500","bg-green-500","bg-purple-500"];c.useEffect(()=>(a.emit("ws-player-joinGame",{gameId:t.gameId}),a.on("ws-player-sendMessageToPlayer",function(l){(l.id===-1||l.id===t.id)&&(console.log("Host message",l.message),i(l.message))}),()=>{a.off("ws-player-sendMessageToPlayer")}),[]);const i=l=>{const o=0+Math.random()*400,m=re.uniqueId(),d=16+Math.floor(Math.random()*8),x=r[Math.floor(Math.random()*r.length)];n(u=>[...u,{message:l,height:o,id:m,duration:d,colorName:x}]),setTimeout(()=>{n(u=>u.filter(f=>f.id!==m))},d*1e3)};return e.jsx("div",{className:"bg-transparent h-[calc(100vh-48px)] w-full absolute overflow-hidden top-0 z-40 pointer-events-none",children:s.map(l=>e.jsxs("div",{className:"bullet",style:{top:l.height,animationDuration:`${l.duration}s`},children:[e.jsxs("div",{className:`bg-opacity-50 ${l.colorName} flex shrink-0 items-center py-0.5 pl-3 pr-2 rounded-l-3xl rounded-r-lg`,children:[e.jsx("img",{src:"./gameHost.png",alt:"GameHost",className:"h-7 mr-2"}),l.message]}),e.jsx("img",{src:"fire.gif",className:" rotate-90 h-8 opacity-90"})]},l.id))})},yt=({player:t,setCurrentState:a})=>{const[s,n]=c.useState([]),[r,i]=c.useState(0),[l,o]=c.useState(),[m,d]=c.useState([]),x=c.useRef(M(R)).current,u=ae(ce),[f,p]=c.useState(!0),h=()=>{d(j=>(j.sort((y,v)=>{const S=y.progress.reduce((O,J)=>J.passed?O+1:O,0),C=v.progress.reduce((O,J)=>J.passed?O+1:O,0);return S>C?-1:S<C?1:y.finishedAt&&v.finishedAt?new Date(y.finishedAt).getTime()-new Date(v.finishedAt).getTime():0}),[...j]))};c.useEffect(()=>(fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{n(j.problems)}),x.emit("ws-player-joinGame",{gameId:t.gameId}),x.on("ws-player-hostCloseGame",function(){a("GameResult")}),x.on("ws-host-playerJoinGame",function(j){d(y=>[...y,{id:j.id,name:j.name,finishedAt:null,progress:s.map(v=>({id:v.id,passed:!1}))}])}),x.on("ws-host-updateProgress",function({playerId:j,progress:y,finishedAt:v}){d(S=>(S.forEach(C=>{C.id===j&&(C.progress=y,C.finishedAt=v)}),[...S])),h()}),()=>{x.off("ws-player-hostCloseGame"),x.off("ws-host-playerJoinGame"),x.off("ws-host-updateProgress")}),[]),c.useEffect(()=>{s.length>0&&t&&fetch(ie,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{d([]),j.progress.forEach(y=>{y.id===t.id&&o({id:y.id,name:y.name,finishedAt:y.finishedAt,progress:y.progress?JSON.parse(y.progress):s.map(v=>({id:v.id,passed:!1}))}),d(v=>[...v,{id:y.id,name:y.name,finishedAt:y.finishedAt,progress:y.progress?JSON.parse(y.progress):s.map(S=>({id:S.id,passed:!1}))}])}),h()})},[s]);const g=(j,y,v,S,C,O)=>{x.emit("ws-player-updateCode",{gameId:j,playerId:y,playerName:v,problemId:S,problemTitle:C,code:O})},b=c.useCallback(re.debounce(g,500),[]);return e.jsxs(P.div,{className:"relative flex w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[u&&e.jsx(jt,{player:t}),e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${f?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>p(!0),children:e.jsx(L,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0 bg-dark-layer-2 h-[calc(100vh-48px)] transition-all duration-500
        ${f?"translate-x-0 w-[260px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:" h-[40px] flex items-end border-dark-fill-2 px-3 relative",children:[e.jsx("h1",{className:"text-xl",children:"Rank"}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[8px]
             right-[8px]`,onClick:()=>p(!1),children:e.jsx(L,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-96px)] overflow-y-auto overflow-hidden rounded-b-lg",children:m.map((j,y)=>{const v=j.progress.length,S=j.progress.reduce((C,O)=>O.passed?C+1:C,0);return e.jsxs("div",{className:"w-full h-[56px] flex items-center px-[12px] mt-[8px]",children:[e.jsx("div",{className:`text-xl font-semibold ${j.id===t.id?"text-dark-pink":"text-dark-yellow"}`,children:y+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${j.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:`text-lg ml-3 ${j.id===t.id?"font-semibold":"font-normal"}`,children:j.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[S,"/",v]})]},y)})})]}),e.jsx("div",{className:"w-full",children:s.length>0&&l&&e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsxs("div",{className:"bg-dark-layer-1",children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-hidden",children:s.map((j,y)=>e.jsxs("div",{className:`flex items-center rounded-t-[5px] px-4 py-[7px] text-sm cursor-pointer ${y===r?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>i(y),children:[l&&l.progress.map((v,S)=>e.jsx("span",{className:`text-dark-green-s mr-1 ml-[-8px] ${v.id===j.id&&v.passed?"block":"hidden"}`,children:e.jsx(te,{})},S)),e.jsxs("span",{children:["Prob ",y+1]})]},y))}),e.jsx(me,{problem:s[r]})]}),e.jsx(de,{problem:s[r],gameMode:!0,gameData:{player:t,myProgress:l,setMyProgress:o,updateCode:b}})]})})]})},Nt=()=>{const[t,a]=I(z),[s,n]=c.useState("GameJoining"),[r,i]=c.useState();return c.useEffect(()=>{a(!0);const l=localStorage.getItem("playerData");if(!l)n("GameJoining"),a(!1);else{const o=JSON.parse(l);fetch(Ze,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({playerId:o.id,contestId:o.gameId})}).then(m=>m.json()).then(m=>{i(o),a(!1),m.founded?n(()=>m.state==="created"?"GameWaiting":m.state==="started"?"GamePlaying":m.state==="closed"?"GameResult":"GameJoining"):(localStorage.removeItem("playerData"),n("GameJoining"))})}},[]),e.jsxs(e.Fragment,{children:[s==="GameJoining"?e.jsx(F,{}):e.jsx(gt,{player:r,currentState:s,setCurrentState:n}),e.jsxs(P.div,{className:`text-dark-gray-8 ${t&&"opacity-0"} transition-all`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[s==="GameJoining"&&e.jsx(ut,{setCurrentState:n,setPlayer:i}),s==="GameWaiting"&&r&&e.jsx(ft,{setCurrentState:n,player:r}),s==="GamePlaying"&&r&&e.jsx(yt,{setCurrentState:n,player:r}),s==="GameResult"&&r&&e.jsx(pe,{gameId:r.gameId})]})]})},bt=()=>{const[t,a]=I(z),[s,n]=c.useState({isOpen:!1,videoId:""}),[r,i]=c.useState([]),[l,o]=c.useState(JSON.parse(localStorage.getItem("problemStatus")||"{}"));c.useEffect(()=>{a(!0),fetch(ne,{method:"GET"}).then(d=>d.json()).then(d=>{i(d),a(!1)})},[]);const m=()=>{n({isOpen:!1,videoId:""})};return e.jsx(e.Fragment,{children:!t&&e.jsx(P.div,{className:"relative overflow-x-auto mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:r.length>0&&e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Status"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Solution"})]})}),e.jsx("tbody",{className:"text-white",children:r!==void 0&&r.map((d,x)=>{const u=d.difficulty==="Easy"?"text-dark-green-s":d.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${x%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-4 py-4 whitespace-nowrap text-dark-green-s",children:e.jsx("div",{className:" cursor-pointer h-6",onClick:()=>{o(f=>(f[d.id]=!f[d.id],localStorage.setItem("problemStatus",JSON.stringify(f)),{...f}))},children:l[d.id]&&e.jsx(se,{width:"18"})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx(_,{className:"hover:text-blue-600",to:`/problem?id=${d.id}`,children:d.title})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:d.tags.map(f=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:f.title},f.id))})}),e.jsx("td",{className:`px-3 py-4 ${u}`,children:d.difficulty}),e.jsx("td",{className:"px-3 py-4",children:d.solutionVideo?e.jsx(Oe,{fontSize:"28",className:"cursor-pointer hover:text-red-600",onClick:()=>n({isOpen:!0,videoId:d.solutionVideo})}):e.jsx("p",{className:"text-gray-400",children:"Coming soon"})})]},x)})}),s.isOpen&&e.jsxs("tfoot",{className:"fixed top-0 left-0 h-screen w-screen flex items-center justify-center",children:[e.jsx("div",{className:"bg-black z-10 opacity-70 top-0 left-0 w-screen h-screen absolute",onClick:m}),e.jsx("div",{className:"w-full z-50 h-full px-6 relative max-w-4xl",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center relative",children:e.jsxs("div",{className:"w-full relative",children:[e.jsx(D,{fontSize:"35",className:"cursor-pointer absolute -top-16 right-0 text-dark-gray-8",onClick:m}),e.jsx(Me,{videoId:s.videoId,loading:"lazy",iframeClassName:"w-full min-h-[500px]"})]})})})]})]})})})},vt=()=>{const t=ae(A),a=$(),s=()=>{t.isLogin?a("/gameHost"):N.error("Please Sign In")};return e.jsxs("div",{children:[e.jsx(F,{}),e.jsx(P.div,{className:"block h-[calc(100vh-48px)] overflow-y-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"w-11/12 md:w-9/12 mx-auto pt-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1",children:"Let's Code!"}),e.jsxs("div",{className:" flex mt-5",children:[e.jsx("button",{onClick:s,children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105 flex items-end justify-center",children:[e.jsx("img",{src:"createGame.svg",className:"h-24 object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Create Game"})]})}),e.jsx(_,{to:"gamePlayer",className:" ml-8",children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105",children:[e.jsx("img",{src:"joinGame.svg",className:"h-full w-full object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Join Game"})]})})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1 mt-5",children:"Problems"}),e.jsx(bt,{})]})]})})]})},wt=()=>{const t=W(A),[a,s]=c.useState(""),[n,r]=c.useState(""),i=()=>{if(a==="")return N.error("Email can not be empty");if(n==="")return N.error("Password can not be empty");fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"native",email:a,password:n})}).then(l=>l.status!==200?l.json().then(o=>{throw o}):l.json()).then(l=>{N.success("Sign In Successfully"),localStorage.setItem("userData",JSON.stringify(l.data)),t(o=>({...o,isOpen:!1,isLogin:!0}))}).catch(l=>{N.error(l.errors)})};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign In"}),e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:a,onChange:l=>{s(l.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:n,onChange:l=>{r(l.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{className:"w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s mt-6",onClick:i,children:"Submit"}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-5",children:["Not Registered?",e.jsx("button",{onClick:()=>{t(l=>({...l,type:"register"}))},className:"text-blue-400 hover:underline ml-3",children:"Create Account"})]})]})},kt=()=>{const t=W(A),[a,s]=c.useState(""),[n,r]=c.useState(""),[i,l]=c.useState(""),[o,m]=c.useState(""),d=()=>{if(a==="")return N.error("Name can not be empty");if(n==="")return N.error("Email can not be empty");if(i==="")return N.error("Password can not be empty");if(o!==i)return N.error("Passwords are not matched");fetch(De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:n,password:i})}).then(x=>x.status!==200?x.json().then(u=>{throw u}):x.json()).then(x=>{N.success("Sign Up Successfully"),localStorage.setItem("userData",JSON.stringify(x.data)),t(u=>({...u,isOpen:!1,isLogin:!0}))}).catch(x=>{N.error(x.errors)})};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign Up"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Name"}),e.jsx("input",{type:"name",value:a,onChange:x=>s(x.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:n,onChange:x=>r(x.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:i,onChange:x=>l(x.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Confirm Password"}),e.jsx("input",{type:"password",value:o,onChange:x=>m(x.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{className:" mt-5 w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s",onClick:d,children:"Submit"}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-3",children:["Already have an account",e.jsx("button",{className:"text-blue-300 hover:underline ml-3",onClick:()=>{t(x=>({...x,type:"login"}))},children:"Sign In"})]})]})},St=()=>{const[t,a]=c.useState(""),s=W(A),[n,r]=c.useState(),i=$(),l=o=>{s(m=>({...m,isOpen:!1})),i(`/problem?id=${o}`)};return c.useEffect(()=>{const o=localStorage.getItem("userData");if(o){const m=JSON.parse(o);a(m.user.name);const d=m.access_token;fetch(Qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${d}`}}).then(x=>x.json()).then(x=>{console.log(x),r(x)})}else N.error("Login timeout"),s(m=>({...m,isOpen:!1,isLogin:!1}))},[]),e.jsxs("div",{className:" w-[800px] h-[560px] bg-dark-layer-1 px-10",children:[e.jsxs("div",{className:" h-[100px] mt-[20px] px-3 text-white font-semibold text-2xl flex items-center tracking-wide",children:[e.jsxs("span",{className:" text-dark-yellow mr-[10px]",children:[t,"'s"]}),"Host History"]}),e.jsxs("div",{className:"h-[420px] overflow-y-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-dark-gray-8 text-left border-b-[1px] h-[60px]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-2 w-[10%]",children:"GameId"}),e.jsx("th",{className:"py-3 px-2 w-[25%]",children:"Problems"}),e.jsx("th",{className:"py-3 px-2 w-[30%]",children:"Players"}),e.jsx("th",{className:"py-3 px-2 w-[15%] text-center",children:"Time"})]})}),e.jsx("tbody",{className:"text-dark-gray-8 ",children:n&&n.length>0&&n.map((o,m)=>e.jsxs("tr",{className:`${m%2===1?"bg-dark-fill-3":""}`,children:[e.jsx("td",{className:"py-3 px-3",children:o.contestId}),e.jsx("td",{className:"py-3 px-2",children:o.problems.map((d,x)=>e.jsx("div",{className:"font-semibold leading-7 hover:text-blue-500 transition-all cursor-pointer",onClick:()=>l(d.id),children:d.title},x))}),e.jsx("td",{className:"py-4 px-2 flex flex-wrap",children:o.players.map((d,x)=>e.jsxs("div",{className:"mr-[12px] mb-1 flex items-center",children:[e.jsx("img",{src:`${T}&seed=${d.name}`,className:"h-[25px] mr-[4px]"}),d.name]},x))}),e.jsxs("td",{className:"py-3 text-center text-dark-gray-7",children:[e.jsx("div",{children:new Date(o.startedAt).toLocaleDateString()}),e.jsx("div",{children:new Date(o.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},m))})]}),n&&n.length===0&&e.jsx("div",{className:"h-[300px] w-full items-center justify-center flex text-xl tracking-wide text-dark-gray-7",children:"You have no host history"})]})]})},Ct=()=>{const[t,a]=I(A),s=()=>{a(n=>({...n,isOpen:!1}))};return e.jsxs("div",{children:[e.jsx("div",{className:`z-10 absolute top-0 w-full h-full flex items-center justify-center bg-black transition-all duration-500 ${t.isOpen?" opacity-50 ":"pointer-events-none opacity-0"}`,onClick:s}),e.jsxs("div",{className:`w-fit absolute left-[50%] translate-y-[-50%] translate-x-[-50%] flex justify-center z-50 rounded-lg overflow-hidden
        transition-all duration-500 ${t.isOpen?"top-[50%] opacity-100":"top-[-60%] opacity-0"} `,children:[e.jsx("button",{className:"absolute bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center text-white right-[5px] top-[5px]",children:e.jsx(D,{className:"h-6 w-6",onClick:s})}),t.type==="register"&&e.jsx(kt,{}),t.type==="login"&&e.jsx(wt,{}),t.type==="profile"&&e.jsx(St,{})]})]})};function Pt(){return e.jsx(ye,{children:e.jsxs("div",{className:"bg-dark-layer-2 min-h-screen relative",children:[e.jsx(Te,{position:"top-center",autoClose:2500,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),e.jsx(Ct,{}),e.jsxs(Le,{children:[e.jsx(B,{path:"/",element:e.jsx(vt,{})}),e.jsx(B,{path:"problem",element:e.jsx(ot,{})}),e.jsx(B,{path:"gameHost",element:e.jsx(pt,{})}),e.jsx(B,{path:"gamePlayer",element:e.jsx(Nt,{})})]})]})})}ge.createRoot(document.getElementById("root")).render(e.jsx(Ee,{children:e.jsx(Pt,{})}));
