import{r as m,j as e}from"./react-bb1a8b08.js";import{c as ge}from"./react-dom-b05b0288.js";import{L as _,u as je,B as ye}from"./react-router-dom-bd488c8a.js";import{F as Ne,a as be,b as ee,B as L,I as ve,A as we,c as ke,C as Se,d as te,e as D,f as Q,g as X,h as se,i as Ce,j as Pe,G as Ge,k as Oe}from"./react-icons-ef56d0db.js";import{R as U,a as I,b as ae,c as W,d as Ee}from"./recoil-c3334d42.js";import{Q as N,k as Te}from"./react-toastify-ca6d5611.js";import{m as P}from"./framer-motion-ca35d016.js";import{S as Y}from"./react-split-394c0406.js";import{G as Ie,E as $e}from"./@codemirror-4e45e905.js";import{R as Ae,v as Je}from"./@uiw-0006cca6.js";import{a as $,d as Le,e as B}from"./react-router-c4336f7a.js";import{l as M}from"./socket.io-client-5e3fa801.js";import{C as _e}from"./react-confetti-4487dd03.js";import{l as re}from"./lodash-8f34d9d6.js";import{Y as Me}from"./react-youtube-4df3b629.js";import"./fast-deep-equal-ca765bc5.js";import"./scheduler-765c72db.js";import"./@remix-run-e5357272.js";import"./clsx-1229b3e0.js";import"./prop-types-e0d21109.js";import"./split.js-822f4990.js";import"./@lezer-b3acbd76.js";import"./crelt-7bb88e1d.js";import"./style-mod-ae491175.js";import"./w3c-keyname-9fb136d3.js";import"./@babel-df62547b.js";import"./engine.io-client-b8dcd8ee.js";import"./engine.io-parser-a5b7cb40.js";import"./@socket.io-3e1df240.js";import"./socket.io-parser-44417fca.js";import"./youtube-player-63f3f564.js";import"./sister-57707ffb.js";import"./load-script-d550e3b0.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))l(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const w="",Re=":3001",le=`${w}/api/1.0/problems/`,Be=`${w}/api/1.0/problems/details`,ze=`${w}/api/1.0/workspace/run`,Fe=`${w}/api/1.0/workspace/submit`,He=`${w}/api/1.0/user/signin`,De=`${w}/api/1.0/user/signup`,Ue=`${w}/api/1.0/contest/hostCheckGame`,We=`${w}/api/1.0/contest/hostCreateGame`,Ye=`${w}/api/1.0/contest/hostTerminateGame`,Ke=`${w}/api/1.0/contest/hostStartGame`,Ve=`${w}/api/1.0/contest/hostGetPlayersCode`,Z=`${w}/api/1.0/contest/hostSendMessage`,qe=`${w}/api/1.0/contest/hostCloseGame`,Qe=`${w}/api/1.0/contest/hostGetHistory`,Xe=`${w}/api/1.0/contest/playerJoinGame`,Ze=`${w}/api/1.0/contest/playerCheckGame`,T="https://api.dicebear.com/6.x/avataaars/svg?size=64",et=`${w}/api/1.0/contest/playerExitGame`,tt=`${w}/api/1.0/contest/playerSubmit`,ne=`${w}/api/1.0/contest/getPlayers`,K=`${w}/api/1.0/contest/getProblems`,ie=`${w}/api/1.0/contest/getPlayersProgress`,oe=`${w}/api/1.0/contest/getTimeLimit`,st=`${w}/api/1.0/contest/getGameResult`,R=Re,at=()=>{const[t,r]=m.useState(!1),[s,l]=m.useState(0),a=n=>{const o=Math.floor(n/3600),i=Math.floor(n%3600/60),d=n%60;return`${o<10?"0"+o:o}:${i<10?"0"+i:i}:${d<10?"0"+d:d}`};return m.useEffect(()=>{let n;return t&&(n=setInterval(()=>{l(o=>o+1)},1e3)),()=>clearInterval(n)},[t]),e.jsx("div",{children:t?e.jsxs("div",{className:"flex items-center space-x-2 bg-dark-fill-3 p-1.5 cursor-pointer rounded hover:bg-dark-fill-2",children:[e.jsx("div",{children:a(s)}),e.jsx(Ne,{onClick:()=>{r(!1),l(0)}})]}):e.jsx("div",{className:"flex items-center p-1 h-8 hover:bg-dark-fill-3 rounded cursor-pointer",onClick:()=>r(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})})})})},A=U({key:"authModalState",default:{isOpen:!1,type:"login",isLogin:!1}}),ce=U({key:"bulletSwitchState",default:!0}),z=U({key:"loadingState",default:!0}),F=({isWorkspace:t=!1})=>{const r=()=>{localStorage.removeItem("userData"),l(n=>({...n,isLogin:!1})),N.success("Sign Out Successfully ")},[s,l]=I(A),a=()=>{l(n=>({...n,isOpen:!0,type:"login"}))};return m.useEffect(()=>{const n=localStorage.getItem("userData");n?JSON.parse(n).access_expired>new Date().getTime()/1e3?l(i=>({...i,isLogin:!0})):(localStorage.removeItem("userData"),l(i=>({...i,isLogin:!1}))):l(o=>({...o,isLogin:!1}))},[]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:`flex w-full items-center justify-between ${t?"":"max-w-[1200px] mx-auto"}`,children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[t&&e.jsx(at,{}),s.isLogin?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" relative flex items-center text-2xl py-1 cursor-pointer",onClick:()=>l(n=>({...n,isOpen:!0,type:"profile"})),children:e.jsx(be,{})}),e.jsx("button",{className:"bg-dark-fill-3 py-1.5 px-3 cursor-pointer rounded text-brand-orange hover:bg-dark-fill-2 transition-all",onClick:r,children:e.jsx(ee,{})})]}):e.jsx("button",{className:" bg-dark-fill-3 py-1 px-2 cursor-pointer rounded",onClick:a,children:"Sign In"})]})]})})},rt=({handleRun:t,handleSubmit:r,splitRatio:s,pending:l,setSplitRatio:a})=>e.jsx("div",{className:"flex bg-dark-layer-1 absolute bottom-0 z-10 w-full",children:e.jsxs("div",{className:"mx-5 my-[10px] flex justify-between w-full",children:[e.jsx("div",{className:"mr-2 flex flex-1 flex-nowrap items-center space-x-4",children:l?e.jsx("div",{className:"px-3 py-1.5 font-medium text-dark-label-2 items-center transition-all inline-flex text-sm",children:"Pending..."}):e.jsxs("button",{className:"px-3 py-1.5 font-medium items-center transition-all inline-flex bg-dark-fill-3 text-sm hover:bg-dark-fill-2 text-dark-label-2 rounded-lg pl-3 pr-2",onClick:()=>{a(n=>n>90?50:100)},children:["Console",e.jsx("div",{className:`ml-1 transform transition duration-200 ease-in-out flex items-center ${s>90?"rotate-0":"rotate-180"}`,children:e.jsx(L,{className:"fill-gray-6 mx-1 fill-dark-gray-6"})})]})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx("button",{className:`px-3 py-1.5 text-sm font-medium items-center whitespace-nowrap transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 text-dark-label-2 rounded-lg 
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:t,disabled:l,children:"Run"}),e.jsx("button",{className:`px-3 py-1.5 font-medium items-center transition-all focus:outline-none inline-flex text-sm text-white bg-dark-green-s hover:bg-green-3 rounded-lg
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:r,disabled:l,children:"Submit"})]})]})}),E=({value:t,label:r})=>{const s=t===void 0?"undefined":typeof t=="string"?t:JSON.stringify(t);return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-4 text-white",children:[r," ="]}),e.jsx("div",{className:"w-full cursor-text rounded-lg px-3 py-[8px] bg-dark-fill-3 text-white mt-2 min-h-[40px]",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:s})})]})},lt=({problem:t,showTestcases:r})=>{const[s,l]=m.useState(0);return e.jsxs("div",{className:`${r?"block":"hidden"} py-3`,children:[e.jsx("div",{className:"flex",children:t.exampleCases.map((a,n)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>l(n),children:e.jsx("div",{className:"flex flex-wrap items-center",children:e.jsxs("div",{className:`items-center text-sm font-semibold transition-all focus:outline-none inline-flex  hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${s===n?"text-white bg-dark-fill-3":"text-gray-400"}
                `,children:["Case ",n+1]})})},n))}),e.jsx("div",{className:"mt-4",children:t.exampleCases.map((a,n)=>e.jsx("div",{className:`${n===s?"block":"hidden"}`,children:e.jsx("div",{className:"mt-4",children:t.inputKeys.map((o,i)=>{var d;return e.jsx(E,{label:o,value:(d=t.exampleCases[s])==null?void 0:d.input[i]},i)})})},n))})]})},nt=({problem:t,pending:r,showTestcases:s,runResults:l,execError:a,submitResult:n})=>{var u;const[o,i]=m.useState(0),[d,c]=m.useState(!0);return m.useEffect(()=>{c(!0),l==null||l.forEach(g=>{g.passed||c(!1)})},[l]),e.jsxs("div",{className:`${s?"hidden":"block"} py-4`,children:[a&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-dark-pink font-semibold text-xl ml-1",children:a.name}),e.jsx("div",{className:"w-full cursor-text rounded-lg border px-3 py-[8px] bg-dark-fill-3 border-transparent text-dark-pink bg-dark-pink bg-opacity-[15%] mt-3",children:e.jsxs("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:[a.line&&`Line ${a.line}
`,a.message]})})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:d?e.jsx("span",{className:"text-dark-green-s",children:"Accepted"}):e.jsx("span",{className:"text-dark-pink",children:"Wrong Answer"})}),e.jsx("div",{className:"flex mt-1",children:t.exampleCases.map((g,p)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>i(p),children:e.jsx("div",{className:"flex flex-wrap items-center gap-y-4",children:e.jsxs("div",{className:`items-center transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${o===p?"text-white":"text-gray-500"}
                `,children:[e.jsx("div",{className:`w-1 h-1 rounded-full mr-2 ${l[p].passed?" bg-dark-green-s":"bg-dark-pink"}`}),"Case ",p+1]})})},p))}),t.exampleCases.map((g,p)=>e.jsxs("div",{className:`${p===o?"block":"hidden"}`,children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Stdin",value:g.input.map(x=>JSON.stringify(x)).join(", ")})}),e.jsx("div",{className:`mt-4 ${l[o].stdout.length>0?"block":"hidden"}`,children:e.jsx(E,{label:"Stdout",value:l[o].stdout.map(x=>typeof x=="string"?x:JSON.stringify(x)).join(`
`)})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:l[o].output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:l[o].expected})})]},p))]}),n&&n.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-green-s",children:"Passed"})}),e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:"All the test cases are passed"})]}),n&&!n.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-pink",children:"Failed"})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Input",value:(u=n.input)==null?void 0:u.map(g=>JSON.stringify(g)).join(", ")})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:n.output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:n.expected})})]})]}),!(l||a||n)&&e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:r?"Pending...":"You need to run you code first"})]})},V=({userCode:t,onChangeCode:r,readOnly:s=!1,textLarge:l=!1})=>e.jsx("div",{className:"w-full overflow-y-auto h-full flex flex-col",children:e.jsx(Ae,{className:`codeMirror ${l?"text-[16px]":"text-[14px]"}`,value:t,onChange:a=>r&&r(a),theme:Je,extensions:[Ie(),$e.lineWrapping],basicSetup:{autocompletion:!1,highlightActiveLine:!s,foldGutter:!s,highlightActiveLineGutter:!s},editable:!s,readOnly:s})}),de=({problem:t,gameMode:r=!1,gameData:s=void 0})=>{const[l,a]=m.useState(!1),[n,o]=m.useState(""),[i,d]=m.useState(!0),[c,u]=m.useState(),[g,p]=m.useState(),[x,h]=m.useState(),[f,b]=m.useState(50),[j,y]=m.useState(!1),v=()=>{l?(document.exitFullscreen(),a(!1)):(document.documentElement.requestFullscreen(),a(!0))},S=()=>{y(!0),h(void 0),u(void 0),p(void 0)},C=()=>{d(!1),y(!1)},O=()=>{S(),fetch(ze,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:t.id||0,language:"js",code:n})}).then(k=>k.json()).then(k=>{if(k.errors)throw new Error(k.errors);k.type==="error"?h(k.data):u(k.data)}).catch(k=>{N.error(k.message||"run failed")}).finally(()=>{C()})},J=()=>{S(),fetch(r?tt:Fe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r?{problemId:t.id||0,language:"js",code:n,playerId:s==null?void 0:s.player.id,gameId:s==null?void 0:s.player.gameId,progress:s==null?void 0:s.myProgress.progress,finishedAt:s==null?void 0:s.myProgress.finishedAt}:{problemId:t.id||0,language:"js",code:n})}).then(G=>G.json()).then(G=>{if(G.errors)throw new Error(G.errors);if(G.type==="error")h(G.data);else if(p(G.data),G.data.passed){N.success("Passed !");const q=JSON.parse(localStorage.getItem("problemStatus")||"{}");q[t.id]=!0,localStorage.setItem("problemStatus",JSON.stringify(q)),r&&(s==null||s.setMyProgress({id:s.myProgress.id,name:s.myProgress.name,progress:G.progress,finishedAt:G.finishedAt}))}}).catch(G=>{N.error(G.message||"run failed")}).finally(()=>{C()})},ue=k=>{t&&(localStorage.setItem(`code?problem_id=${t.id}&${r&&"gameMode"}`,k),r&&(s==null||s.updateCode(s.player.gameId,s.player.id,s.player.name,t.id,t.title,k))),o(k)},fe=()=>{if(t){const k=t.boilerplate.replace(/\n\s+/g,`
`);o(k),localStorage.setItem(`code?problem_id=${t.id}&${r&&"gameMode"}`,k)}};return m.useEffect(()=>{if(t){const k=localStorage.getItem(`code?problem_id=${t.id}&${r&&"gameMode"}`);o(k!==null?k:t.boilerplate.replace(/\n\s+/g,`
`))}},[t]),e.jsx("div",{className:"w-full overflow-auto flex flex-col",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-layer-2 h-10 w-full",children:[e.jsx("div",{className:"flex items-center text-white",children:e.jsx("button",{className:"flex cursor-pointer items-center rounded-lg bg-dark-fill-3 text-dark-label-2 px-2 py-1 hover:bg-dark-fill-2",children:"JavaScript"})}),e.jsxs("div",{className:"flex items-center m-2",children:[e.jsx("button",{className:"editor-nav-btn group",onClick:fe,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:e.jsx(ve,{})})}),e.jsx("button",{className:"editor-nav-btn group",onClick:v,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:l?e.jsx(ke,{}):e.jsx(we,{})})})]})]}),e.jsxs("div",{className:" bg-dark-layer-1 h-full relative",children:[e.jsx("div",{className:"flex flex-col h-[calc(100vh-140px)]",children:e.jsxs(Y,{direction:"vertical",minSize:0,snapOffset:60,sizes:[f,100-f],className:"h-full",onDragEnd:k=>{b(k[0])},children:[e.jsx(V,{userCode:n,onChangeCode:ue}),e.jsxs("div",{className:"w-full px-5 overflow-auto relative",children:[e.jsxs("div",{className:"flex h-11 sticky top-0 bg-dark-layer-1 z-10",children:[e.jsx("div",{className:`flex h-full items-center text-white mx-2 border-b-2 cursor-pointer ${i?"border-white":"border-transparent"}`,onClick:()=>d(!0),children:"Testcases"}),e.jsx("div",{className:`flex h-full  items-center text-white mx-2 border-b-2 cursor-pointer ${i?"border-transparent":"border-white"}`,onClick:()=>d(!1),children:"Result"})]}),e.jsx(lt,{problem:t,showTestcases:i}),e.jsx(nt,{problem:t,pending:j,runResults:c,showTestcases:i,execError:x,submitResult:g})]})]})}),e.jsx(rt,{handleRun:O,handleSubmit:J,splitRatio:f,setSplitRatio:b,pending:j})]})]})})},me=({problem:t})=>e.jsx("div",{className:"flex px-0 py-4 h-[calc(100vh-88px)] overflow-y-auto",children:e.jsx("div",{className:"px-5",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsxs("div",{className:"flex-1 mr-2 text-lg font-semibold text-white",children:[t.id,". ",t.title]})}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsx("div",{className:`${t.difficulty==="Hard"?"bg-dark-pink text-dark-pink":t.difficulty==="Medium"?"bg-dark-yellow text-dark-yellow":"bg-dark-green-s text-dark-green-s"} inline-block rounded-[21px] bg-opacity-[.20] px-2.5 py-1 text-xs font-semibold`,children:t.difficulty})}),e.jsx("div",{className:"text-white text-md description mt-5",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6",children:t.exampleCases.map((r,s)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Example ",s+1,": "]}),e.jsxs("div",{className:"example-card",children:[r.image&&e.jsx("img",{src:`problemsImgs/${r.image}`,className:"mt-2 w-full max-w-[450px]"}),e.jsxs("pre",{className:"text-sm",children:[e.jsx("strong",{className:"text-white",children:"Input: "}),t.inputKeys.map((l,a)=>e.jsxs("span",{className:"mr-4",children:[l," = ",JSON.stringify(r.input[a])]},a)),e.jsx("br",{}),e.jsx("strong",{children:"Output: "}),JSON.stringify(r.output)," ",e.jsx("br",{}),r.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Explanation: "}),r.explanation]})]})]})]},s))}),e.jsxs("div",{className:"my-8 pb-4",children:[e.jsx("div",{className:"text-white text-md font-semibold",children:"Constraints:"}),t.constraints.map((r,s)=>e.jsx("ul",{className:"text-white ml-5 list-disc mt-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r}})},s))]})]})})}),it=({problem:t})=>e.jsx("div",{className:"bg-dark-layer-1",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-hidden",children:e.jsx("div",{className:"bg-dark-layer-1 rounded-t-[5px] px-5 py-[7px] text-sm cursor-pointer",children:"Description"})}),e.jsx(me,{problem:t})]})}),ot=()=>{const t=$(),[r]=je(),[s,l]=m.useState(),[a,n]=I(z),o=r.get("id")||0;return m.useEffect(()=>{n(!0),fetch(`${Be}?id=${o}`).then(i=>(i.status!==200&&i.json().then(d=>{N.error(d.errors),t("/")}),i.json())).then(i=>{l(i),n(!1)})},[o]),e.jsxs(e.Fragment,{children:[e.jsx(F,{isWorkspace:!0}),!a&&s&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsx(it,{problem:s}),e.jsx(de,{problem:s})]})})]})},ct=({setGameId:t,setCurrentState:r})=>{const[s,l]=m.useState([]),[a,n]=m.useState([]),[o,i]=m.useState(60);m.useEffect(()=>{fetch(le,{method:"GET"}).then(p=>p.json()).then(p=>{l(p)})},[]);const d=()=>{a.length>=5?N.error("At most 5 questions!"):n(p=>[...p,0])},c=(p,x)=>{n(h=>{const f=[...h];return f[x]=p,f})},u=p=>{n(x=>{const h=[...x];return h.splice(p,1),h})},g=()=>{if(a.length===0)return N.error("No question is selected");if(new Set(a).size!==a.length)return N.error("Questions should not repeat");const p=localStorage.getItem("userData");if(!p)return N.error("Please Log In");const x=JSON.parse(p).access_token;fetch(`${We}`,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({timeLimit:o,problemList:a.map(h=>s[h].id)})}).then(h=>{h.status===401||h.status===403?(N.error("Login timeout"),localStorage.removeItem("userData"),r("GameCreating")):h.json().then(f=>{t(f.gameId),r("PlayersJoining")})})};return e.jsxs(P.div,{className:"w-11/12 md:w-9/12 mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Create Game"}),e.jsx("h1",{className:"text-xl mt-6 ml-1",children:"Questions"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Id"}),e.jsx("th",{className:"px-3 py-3 w-[35%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%]"})]})}),e.jsx("tbody",{children:a.map((p,x)=>{const h=s[p],f=h.difficulty==="Easy"?"text-dark-green-s":h.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${x%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("div",{className:"mr-2",children:x+1})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("select",{className:" bg-dark-fill-2 outline-none py-1.5 px-2 rounded-lg text-dark-gray-8 font-medium",onChange:b=>{c(Number(b.target.value),x)},children:s.map((b,j)=>e.jsx("option",{value:j,children:b.title},j))})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:h.tags.map(b=>e.jsxs("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:[b.title," "]},b.id))})}),e.jsx("td",{className:`px-3 py-4 ${f}`,children:h.difficulty}),e.jsx("td",{children:e.jsx("button",{className:"mx-auto flex items-center text-3xl cursor-pointer rounded hover:text-dark-pink transition-all",onClick:()=>u(x),children:e.jsx(Se,{})})})]},x)})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"mt-5 py-1 px-3 cursor-pointer rounded  font-medium bg-dark-gray-8 hover:bg-dark-gray-7 transition-all text-dark-layer-2",onClick:d,children:"Add Question"})})]}),e.jsxs("div",{className:" mt-5",children:[e.jsx("h1",{className:"text-xl mt-10 ml-1",children:"Time Limits"}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsx("input",{type:"text",value:o,onChange:p=>i(Number(p.target.value)),className:" bg-dark-fill-2 px-3 py-1.5 w-16 outline-none rounded-lg"}),e.jsx("div",{className:"ml-2 text-lg",children:"Minutes"})]})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("button",{onClick:g,className:"bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Create Game"})})]})},xe=({players:t})=>{const r=[4,3,5,10,1,2,11,8,0,9,6,7];return e.jsx("div",{className:"flex flex-wrap w-[760px] mx-auto justify-left",children:r.map((s,l)=>{var n;const a=t[s];return e.jsx("div",{className:` -mb-[28px] h-[120px] w-[120px] mx-[32px] bg-dark-fill-3 rotate-45 flex justify-center items-center rounded-md
              ${(l===0||l===7)&&" ml-[124px]"}
              ${l===10&&" ml-[215px]"}
              ${a&&"bg-green-200 bg-opacity-40"}
               transition-all duration-300`,children:e.jsx("div",{className:`-rotate-45 ${!a&&"opacity-0"} transition-all duration-300`,children:a&&e.jsxs(e.Fragment,{children:[e.jsx("img",{alt:"image",src:`${T}&seed=${(n=t[s])==null?void 0:n.name}`,className:"h-20 mb-[34px]"}),e.jsx("div",{className:`absolute left-[50%] -translate-x-[50%] bottom-[3px] text-white w-20 break-all text-center max-h-8 overflow-hidden leading-4
             ${a.name.length>10?"text-sm":"font-medium text-md"}`,children:a.name})]})})},l)})})},dt=({gameId:t})=>{const r=m.useRef(M(R)).current,[s,l]=m.useState([]);return m.useEffect(()=>{if(t)return fetch(ne,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(a=>a.json()).then(a=>{l(a.players)}),r.emit("ws-host-joinGame",{gameId:t}),r.on("ws-host-playerJoinGame",function(a){l(n=>[...n,{id:a.id,name:a.name,gameId:t}])}),r.on("ws-host-playerExitGame",function(a){l(n=>n.filter(o=>o.id!=a.id))}),()=>{r.off("ws-host-playerExitGame"),r.off("ws-host-playerJoinGame")}},[t,r]),e.jsxs(P.div,{className:"text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"mt-14",children:[e.jsxs("h1",{className:"text-4xl text-center",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7 mt-6",children:"Waiting For Players To Join..."})]}),e.jsx("div",{className:" mt-16",children:e.jsx(xe,{players:s})})]})},mt=({gameId:t,playersCode:r,focusedPlayerId:s,playersProgress:l,setFocusedPlayerId:a})=>{var x;const[n,o]=m.useState(""),i=r.find(h=>h.id===s),[d,c]=m.useState((i==null?void 0:i.lastModifyedProblem)||0),u=(x=l.find(h=>h.id===(i==null?void 0:i.id)))==null?void 0:x.progress,g=()=>{i&&fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:i.id,message:n})}),o("")},p=()=>{fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:-1,message:n})}),o("")};return e.jsx("div",{className:"text-gray-50 flex gap-[12px] px-[10px] mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto relative",children:i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full  shrink rounded-lg overflow-hidden bg-dark-layer-1",children:e.jsx(V,{userCode:i.problems[d].code,readOnly:!0,textLarge:!0})}),e.jsxs("div",{className:"flex flex-col w-[300px] shrink-0 text-white bg-dark-layer-2",children:[e.jsxs("div",{className:"w-full overflow-auto flex flex-col",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-b-[1px] border-dark-fill-2",children:"Problems"}),e.jsx("div",{className:"overflow-y-auto",children:i.problems.map((h,f)=>e.jsxs("div",{className:`flex items-center px-4 py-[7px] text-sm  cursor-pointer w-full h-14 hover:bg-dark-fill-3 ${f===d?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>c(f),children:[e.jsxs("span",{children:[f+1,". ",h.title]}),u&&u.map((b,j)=>e.jsx("span",{className:`text-dark-green-s ml-auto text-[18px] ${b.id===h.id&&b.passed?"block":"hidden"}`,children:e.jsx(te,{})},j))]},f))})]}),e.jsxs("div",{className:"mt-auto h-40",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-t-[1px] border-dark-fill-2",children:"Send Message"}),e.jsx("div",{className:"px-2",children:e.jsx("input",{value:n,onChange:h=>o(h.target.value),onKeyDownCapture:h=>{h.key==="Enter"&&g()},className:" w-full bg-dark-fill-2 rounded-lg outline-none text-lg px-3 py-2 resize-none"})}),e.jsxs("div",{className:"flex px-3 mt-3",children:[e.jsx("button",{className:" px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-gray-6 hover:bg-opacity-80 rounded-lg",onClick:p,children:"Send Group"}),e.jsx("button",{className:"ml-auto px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-green-s hover:bg-opacity-80 rounded-lg",onClick:g,children:"Send"})]})]})]}),e.jsx("div",{className:" absolute text-[24px] rounded-full border-[1.5px] border-white p-1 left-1/2 -translate-x-1/2 top-[30px] opacity-30 hover:opacity-90 transition-all cursor-pointer",onClick:()=>a(void 0),children:e.jsx(D,{})})]})})},xt=({gameId:t})=>{const[r,s]=m.useState([]),[l,a]=m.useState([]),[n,o]=m.useState([]),[i,d]=m.useState(!0),c=m.useRef(M(R)).current,[u,g]=m.useState(void 0),p=()=>{s(x=>(x.sort((h,f)=>{const b=h.progress.reduce((y,v)=>v.passed?y+1:y,0),j=f.progress.reduce((y,v)=>v.passed?y+1:y,0);return b>j?-1:b<j?1:h.finishedAt&&f.finishedAt?new Date(h.finishedAt).getTime()-new Date(f.finishedAt).getTime():0}),[...x]))};return m.useEffect(()=>{fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(x=>x.json()).then(x=>{a(x.problems)}),c.emit("ws-host-joinGame",{gameId:t})},[c]),m.useEffect(()=>(l.length>0&&(fetch(ie,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(x=>x.json()).then(x=>{s(x.progress.map(h=>({id:h.id,name:h.name,finishedAt:h.finishedAt,progress:h.progress?JSON.parse(h.progress):l.map(f=>({id:f.id,passed:!1}))}))),p()}),fetch(Ve,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(x=>x.json()).then(x=>{o(x.playersCode.map(h=>({id:h.id,name:h.name,problems:l.map(f=>{const b=h.problems.findIndex(j=>j.id===f.id);return b===-1?{id:f.id,title:f.title,code:f.boilerplate.replace(/\n\s+/g,`
`)}:{...h.problems[b]}})})))}),c.on("ws-host-updateProgress",function({playerId:x,progress:h,finishedAt:f}){s(b=>(b.forEach(j=>{j.id===x&&(j.progress=h,j.finishedAt=f)}),[...b])),p()}),c.on("ws-host-playerExitGame",function(x){s(h=>h.filter(f=>f.id!=x.id)),o(h=>h.filter(f=>f.id!=x.id))}),c.on("ws-host-playerJoinGame",function(x){s(h=>[...h,{id:x.id,name:x.name,finishedAt:null,progress:l.map(f=>({id:f.id,passed:!1}))}]),o(h=>(h.push({id:x.id,name:x.name,problems:l.map(f=>({id:f.id,title:f.title,code:f.boilerplate.replace(/\n\s+/g,`
`)}))}),[...h]))}),c.on("ws-host-playerUpdateCode",function(x){o(h=>{const f=h.findIndex(b=>b.id===x.id);if(f!==-1){const b=h[f].problems.findIndex(j=>j.id===x.problemId);b!==-1&&(h[f].problems[b].code=x.code,h[f].lastModifyedProblem=b)}return[...h]})})),()=>{c.off("ws-host-updateProgress"),c.off("ws-host-playerJoinGame"),c.off("ws-host-playerExitGame"),c.off("ws-host-playerUpdateCode")}),[l,c]),e.jsxs(P.div,{className:"flex relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${i?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>d(!0),children:e.jsx(L,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0  bg-dark-layer-1 mt-[8px] h-[calc(100vh-64px)] rounded-lg transition-all duration-500
        ${i?"translate-x-0 w-[300px] ml-[8px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:"h-[64px] flex items-center border-b-[1px] border-dark-fill-2 px-3 relative",children:[e.jsxs("h1",{className:"text-xl",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[14px]
             right-[8px]`,onClick:()=>d(!1),children:e.jsx(L,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-128px)] overflow-y-auto overflow-hidden rounded-b-lg",children:r.map((x,h)=>{const f=x.progress.length,b=x.progress.reduce((j,y)=>y.passed?j+1:j,0);return e.jsxs("div",{className:`h-[72px] border-b-[1px] border-dark-fill-2 flex items-center  px-3 cursor-pointer 
                          hover:bg-dark-fill-3 ${u===x.id?"bg-dark-fill-3":"bg-dark-layer-1"}`,onClick:()=>{u===x.id?g(void 0):g(x.id)},children:[e.jsx("div",{className:"text-xl font-semibold text-dark-yellow",children:h+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${x.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:"text-lg ml-3",children:x.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[b,"/",f]})]},h)})})]}),!u&&e.jsx("div",{className:"shrink text-gray-50 mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-[12px] px-[14px]",children:n.map((x,h)=>{const f=x.problems[x.lastModifyedProblem||0];return e.jsxs("div",{className:"h-[300px] w-[calc(50%-10px)] relative rounded-lg bg-dark-layer-1 overflow-hidden cursor-pointer",onClick:()=>g(x.id),children:[e.jsx("div",{className:" absolute bottom-0",children:e.jsx(V,{userCode:f.code,readOnly:!0})}),e.jsxs("div",{className:" absolute top-2 left-3 inline-flex bg-sky-900 items-center rounded-lg px-2 py-1",children:[e.jsx("img",{src:`${T}&seed=${x.name}`,alt:"avatar",className:" h-[26px] mr-1"}),x.name]}),e.jsx("div",{className:" absolute top-2 right-3 inline-flex bg-emerald-900  items-center rounded-lg px-2 py-1",children:f.title})]},h)})})}),u&&e.jsx(mt,{gameId:t,playersCode:n,focusedPlayerId:u,playersProgress:r,setFocusedPlayerId:g})]})},he=({timeLeft:t,setTimeLeft:r})=>{const s=l=>{const a=Math.floor(l/3600),n=Math.floor(l%3600/60),o=l%60;return`${a<10?"0"+a:a}:${n<10?"0"+n:n}:${o<10?"0"+o:o}`};return m.useEffect(()=>{const l=setInterval(()=>{r(a=>a&&(a<=0?0:a-1))},1e3);return()=>clearInterval(l)},[r]),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center p-1 h-8 cursor-default",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})}),e.jsx("div",{children:s(t)})]})})},ht=({gameId:t,currentState:r,setCurrentState:s})=>{const l=$(),[a,n]=m.useState();m.useEffect(()=>{if(r==="GameWatching"&&t){const c=()=>{fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(g=>g.json()).then(g=>{const p=g.endedAt-new Date().getTime();n(Math.floor(p/1e3))})};c();const u=setInterval(()=>{c()},6e4);return()=>clearInterval(u)}},[r,t]);const o=()=>{const c=localStorage.getItem("userData");if(c&&t){const u=JSON.parse(c).access_token;fetch(Ke,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({gameId:t})}).then(g=>{g.status===200?(N("ðŸ”¥ Game Started !"),s("GameWatching")):N.error("Start Game failed")})}},i=()=>{const c=localStorage.getItem("userData");if(c&&t){const u=JSON.parse(c).access_token;fetch(Ye,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({gameId:t})}).then(g=>{g.status===200?l("/"):N.error("Shot down failed")})}},d=()=>{const c=localStorage.getItem("userData");if(c&&t){const u=JSON.parse(c).access_token;fetch(qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({gameId:t})}).then(g=>{g.status===200?s("GameResult"):l("/")})}};return m.useEffect(()=>{r==="GameWatching"&&a&&a<=0&&s("GameResult")},[a,r]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"relative h-11 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:"./gameHost.png",alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:"HOST"})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[r==="GameWatching"&&a&&e.jsx(he,{timeLeft:a,setTimeLeft:n}),r==="PlayersJoining"&&e.jsxs("div",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-green-s font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:o,children:[e.jsx("div",{className:"mr-2",children:"Start Game"}),e.jsx(Q,{})]}),r==="GameWatching"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-yellow font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:d,children:[e.jsx("div",{className:"mr-2",children:"Close Game"}),e.jsx(Q,{})]}),r==="PlayersJoining"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:i,children:[e.jsx("div",{className:"mr-2",children:"Shut Down"}),e.jsx(X,{})]}),r==="GameResult"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:i,children:[e.jsx("div",{className:"mr-2",children:"Leave"}),e.jsx(X,{})]})]})]})})},H=({name:t,place:r})=>e.jsxs("div",{className:"",children:[e.jsx("img",{src:`${T}&seed=${t}`,alt:"avatar",className:"w-24"}),e.jsx("div",{className:`rounded-lg text-center py-[3px] text-dark-layer-1 font-semibold  ${r===1?"bg-amber-200":r===2?"bg-slate-200":" bg-orange-200"}`,children:t})]}),pe=({gameId:t})=>{const[r,s]=m.useState([]),[l,a]=m.useState([]),[n,o]=I(z);m.useEffect(()=>{o(!0),fetch(st,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(d=>d.json()).then(d=>{s(d.players),a(d.problems),o(!1)})},[]);const i=d=>{const c=Math.floor(d/3600),u=Math.floor(d%3600/60),g=d%60;return`${c<10?"0"+c:c}:${u<10?"0"+u:u}:${g<10?"0"+g:g}`};return e.jsx("div",{className:"",children:!n&&e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-center relative h-[400px] w-[600px] mx-auto ",children:[e.jsx(_e,{numberOfPieces:70,width:600,height:400}),r[0]&&e.jsx("div",{className:" absolute top-[75px]",children:e.jsx(H,{name:r[0].name,place:1})}),r[1]&&e.jsx("div",{className:" absolute top-[126px] left-[124px]",children:e.jsx(H,{name:r[1].name,place:2})}),r[2]&&e.jsx("div",{className:" absolute top-[149px] left-[380px]",children:e.jsx(H,{name:r[2].name,place:3})}),e.jsx("img",{src:"podium.png",alt:"",className:" h-[200px] mt-auto",color:"orange"})]}),e.jsxs("table",{className:`${l.length>3?"w-[960px]":"w-[700px]"}  mx-auto mt-8`,children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Place"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Name"}),l.map((d,c)=>e.jsxs("th",{className:"px-3 py-3 w-[12%] font-semibold text-sm",children:[c+1,"-",d.title]},c)),e.jsx("th",{className:"px-3 py-3 w-[12%] font-semibold",children:"Time"})]})}),e.jsx("tbody",{className:"text-white",children:r.map((d,c)=>e.jsxs("tr",{className:`${c%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-8 py-4 text-dark-yellow font-bold",children:c+1}),e.jsx("td",{className:"pl-3 py-4 font-bold",children:d.name}),d.progress.map((u,g)=>e.jsx("td",{className:"pl-3 py-4 text-center",children:u?e.jsx("span",{className:"text-dark-green-s",children:e.jsx(se,{})}):e.jsx("div",{className:"text-dark-pink w-fit",children:e.jsx(Ce,{})})},g)),e.jsx("td",{className:"px-3 py-4 text-dark-gray-7",children:d.timeUsed?i(d.timeUsed):"-"})]},c))})]})]})})},pt=()=>{const t=$(),[r,s]=m.useState(),[l,a]=m.useState("Loading");return m.useEffect(()=>{const n=localStorage.getItem("userData");if(!n)t("/"),N.error("Sign In Time Out");else{const o=JSON.parse(n).access_token;fetch(Ue,{method:"GET",headers:{"content-type":"application/json",Authorization:`Bearer ${o}`}}).then(i=>i.json()).then(i=>{i.founded?(s(i.contestId),a(()=>i.state==="created"?"PlayersJoining":i.state==="started"?"GameWatching":i.state==="closed"?"GameResult":"GameCreating")):a("GameCreating")})}},[]),e.jsxs(e.Fragment,{children:[l==="GameCreating"||l==="Loading"?e.jsx(F,{}):e.jsx(ht,{gameId:r,currentState:l,setCurrentState:a}),e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[l==="GameCreating"&&e.jsx(ct,{setGameId:s,setCurrentState:a}),l==="PlayersJoining"&&r&&e.jsx(dt,{gameId:r}),l==="GameWatching"&&r&&e.jsx(xt,{gameId:r}),l==="GameResult"&&r&&e.jsx(pe,{gameId:r})]})]})},ut=({setCurrentState:t,setPlayer:r})=>{const[s,l]=m.useState(""),[a,n]=m.useState(""),o=()=>{if(s==="")return N.error("Name can not be empty");if(s.length>20)return N.error("Name too long");if(a==="")return N.error("Game id can not be empty");if(Number(a)>1e5||Number(a)<0)return N.error("Invalid game id");fetch(Xe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:a,playerName:s})}).then(i=>i.status!==200?i.json().then(d=>{throw d}):i.json()).then(i=>{const d={id:i.playerId,gameId:Number(a),name:s};r(d),localStorage.setItem("playerData",JSON.stringify(d)),i.gameState==="created"?t("GameWaiting"):i.gameState==="started"?(N("ðŸ”¥ Game is started !"),t("GamePlaying")):N.error("Game is ended")}).catch(i=>{N.error(i.errors)})};return e.jsxs(P.div,{className:"flex flex-col items-center justify-center mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Join Game"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-lg",children:"Game Id"}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:a,onChange:i=>n(i.target.value)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg",children:"Name "}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:s,onChange:i=>l(i.target.value),onKeyDownCapture:i=>{i.key==="Enter"&&o()}})]}),e.jsx("button",{onClick:o,className:"mt-8 bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Join Game"})]})},ft=({player:t,setCurrentState:r})=>{const s=m.useRef(M(R)).current,[l,a]=m.useState([]),n=$();return m.useEffect(()=>{if(t)return fetch(ne,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{a(o.players)}),fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{o.problems.forEach(i=>{localStorage.removeItem(`code?problem_id=${i==null?void 0:i.id}&gameMode`)})}),s.emit("ws-player-joinGame",{gameId:t.gameId}),s.on("ws-host-playerJoinGame",function(o){a(i=>[...i,{id:o.id,name:o.name,gameId:t.gameId}])}),s.on("ws-host-playerExitGame",function(o){a(i=>i.filter(d=>d.id!=o.id))}),s.on("ws-player-hostTerminateGame",function(){N.info("Host terminated game"),localStorage.removeItem("playerData"),n("/")}),s.on("ws-player-hostStartGame",function(){N("ðŸ”¥ Game Started !"),r("GamePlaying")}),()=>{s.off("ws-host-playerExitGame"),s.off("ws-host-playerJoinGame"),s.off("ws-player-hostTerminateGame"),s.off("ws-player-hostStartGame")}},[s]),e.jsx(P.div,{className:"w-11/12 md:w-9/12 mx-auto text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"mt-10",children:[e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7",children:"Game is about to start..."}),e.jsx("div",{className:"mt-16",children:e.jsx(xe,{players:l})})]})})},gt=({player:t,currentState:r,setCurrentState:s})=>{const[l,a]=m.useState(),[n,o]=I(ce),i=$(),d=()=>{(r==="GamePlaying"||r==="GameWaiting")&&t&&(fetch(et,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId,playerId:t.id})}),localStorage.removeItem("playerData")),localStorage.removeItem("playerData"),i("/")};return m.useEffect(()=>{if(r==="GamePlaying"&&t){const c=()=>{fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(g=>g.json()).then(g=>{const p=g.endedAt-new Date().getTime();a(Math.floor(p/1e3))})};c();const u=setInterval(()=>{c()},6e4);return()=>clearInterval(u)}},[r,t]),m.useEffect(()=>{r==="GamePlaying"&&l&&l<=0&&s("GameResult")},[l,r]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(_,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-10 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:`${T}&seed=${t.name}`,alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[r==="GamePlaying"&&e.jsxs("div",{className:"text-xl relative cursor-pointer flex h-9 w-9  justify-center items-center",title:`${n?"Turn off bullets":"Turn on bullets"}`,onClick:()=>{o(c=>!c)},children:[e.jsx("div",{className:`absolute text-dark-gray-6 text-3xl top-1/2 -translate-x-1/2 left-1/2 -translate-y-1/2
                            ${n?"opacity-0":"opacity-100"} transition-all`,children:e.jsx(Pe,{})}),e.jsx(Ge,{})]}),r==="GamePlaying"&&l&&e.jsx(he,{timeLeft:l,setTimeLeft:a}),e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink hover:bg-dark-fill-2 transition-all",onClick:d,children:[e.jsx("div",{className:"mr-2",children:"Exit"}),e.jsx(ee,{})]})]})]})]})})},jt=({player:t})=>{const r=m.useRef(M(R)).current,[s,l]=m.useState([]),a=["bg-sky-500","bg-pink-500","bg-yellow-500","bg-slate-500","bg-green-500","bg-purple-500"];m.useEffect(()=>(r.emit("ws-player-joinGame",{gameId:t.gameId}),r.on("ws-player-sendMessageToPlayer",function(o){(o.id===-1||o.id===t.id)&&(console.log("Host message",o.message),n(o.message))}),()=>{r.off("ws-player-sendMessageToPlayer")}),[r]);const n=o=>{const i=0+Math.random()*400,d=re.uniqueId(),c=16+Math.floor(Math.random()*8),u=a[Math.floor(Math.random()*a.length)];l(g=>[...g,{message:o,height:i,id:d,duration:c,colorName:u}]),setTimeout(()=>{l(g=>g.filter(p=>p.id!==d))},c*1e3)};return e.jsx("div",{className:"bg-transparent h-[calc(100vh-48px)] w-full absolute overflow-hidden top-0 z-40 pointer-events-none",children:s.map(o=>e.jsxs("div",{className:"bullet",style:{top:o.height,animationDuration:`${o.duration}s`},children:[e.jsxs("div",{className:`bg-opacity-50 ${o.colorName} flex shrink-0 items-center py-0.5 pl-3 pr-2 rounded-l-3xl rounded-r-lg`,children:[e.jsx("img",{src:"./gameHost.png",alt:"GameHost",className:"h-7 mr-2"}),o.message]}),e.jsx("img",{src:"fire.gif",className:" rotate-90 h-8 opacity-90"})]},o.id))})},yt=({player:t,setCurrentState:r})=>{const[s,l]=m.useState([]),[a,n]=m.useState(0),[o,i]=m.useState(),[d,c]=m.useState([]),u=m.useRef(M(R)).current,g=ae(ce),[p,x]=m.useState(!0),h=()=>{c(j=>(j.sort((y,v)=>{const S=y.progress.reduce((O,J)=>J.passed?O+1:O,0),C=v.progress.reduce((O,J)=>J.passed?O+1:O,0);return S>C?-1:S<C?1:y.finishedAt&&v.finishedAt?new Date(y.finishedAt).getTime()-new Date(v.finishedAt).getTime():0}),[...j]))};m.useEffect(()=>(fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{l(j.problems)}),u.emit("ws-player-joinGame",{gameId:t.gameId}),u.on("ws-player-hostCloseGame",function(){r("GameResult"),N.info("Host terminated game")}),u.on("ws-host-playerJoinGame",function(j){c(y=>[...y,{id:j.id,name:j.name,finishedAt:null,progress:s.map(v=>({id:v.id,passed:!1}))}])}),u.on("ws-host-updateProgress",function({playerId:j,progress:y,finishedAt:v}){c(S=>(S.forEach(C=>{C.id===j&&(C.progress=y,C.finishedAt=v)}),[...S])),h()}),()=>{u.off("ws-player-hostCloseGame"),u.off("ws-host-playerJoinGame"),u.off("ws-host-updateProgress")}),[u]),m.useEffect(()=>{s.length>0&&t&&fetch(ie,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{c([]),j.progress.forEach(y=>{y.id===t.id&&i({id:y.id,name:y.name,finishedAt:y.finishedAt,progress:y.progress?JSON.parse(y.progress):s.map(v=>({id:v.id,passed:!1}))}),c(v=>[...v,{id:y.id,name:y.name,finishedAt:y.finishedAt,progress:y.progress?JSON.parse(y.progress):s.map(S=>({id:S.id,passed:!1}))}])}),h()})},[s]);const f=(j,y,v,S,C,O)=>{u.emit("ws-player-updateCode",{gameId:j,playerId:y,playerName:v,problemId:S,problemTitle:C,code:O})},b=m.useCallback(re.debounce(f,500),[]);return e.jsxs(P.div,{className:"relative flex w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[g&&e.jsx(jt,{player:t}),e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${p?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>x(!0),children:e.jsx(L,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0 bg-dark-layer-2 transition-all duration-500
        ${p?"translate-x-0 w-[260px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:" h-[40px] flex items-end border-dark-fill-2 px-3 relative",children:[e.jsx("h1",{className:"text-xl",children:"Rank"}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[8px]
             right-[8px]`,onClick:()=>x(!1),children:e.jsx(L,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-96px)] overflow-y-auto overflow-hidden rounded-b-lg",children:d.map((j,y)=>{const v=j.progress.length,S=j.progress.reduce((C,O)=>O.passed?C+1:C,0);return e.jsxs("div",{className:"w-full h-[56px] flex items-center px-[12px] mt-[8px]",children:[e.jsx("div",{className:`text-xl font-semibold ${j.id===t.id?"text-dark-pink":"text-dark-yellow"}`,children:y+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${j.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:`text-lg ml-3 ${j.id===t.id?"font-semibold":"font-normal"}`,children:j.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[S,"/",v]})]},y)})})]}),e.jsx("div",{className:"w-full",children:s.length>0&&o&&e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsxs("div",{className:"bg-dark-layer-1",children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-auto no-scrollbar",children:s.map((j,y)=>e.jsxs("div",{className:`flex items-center rounded-t-[5px] px-4 py-[7px] text-sm cursor-pointer ${y===a?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>n(y),children:[o&&o.progress.map((v,S)=>e.jsx("span",{className:`text-dark-green-s mr-1 ml-[-8px] ${v.id===j.id&&v.passed?"block":"hidden"}`,children:e.jsx(te,{})},S)),e.jsxs("span",{className:"  whitespace-nowrap",children:["Prob ",y+1]})]},y))}),e.jsx(me,{problem:s[a]})]}),e.jsx(de,{problem:s[a],gameMode:!0,gameData:{player:t,myProgress:o,setMyProgress:i,updateCode:b}})]})})]})},Nt=()=>{const[t,r]=I(z),[s,l]=m.useState("GameJoining"),[a,n]=m.useState();return m.useEffect(()=>{r(!0);const o=localStorage.getItem("playerData");if(!o)l("GameJoining"),r(!1);else{const i=JSON.parse(o);fetch(Ze,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({playerId:i.id,contestId:i.gameId})}).then(d=>d.json()).then(d=>{n(i),r(!1),d.founded?l(()=>d.state==="created"?"GameWaiting":d.state==="started"?"GamePlaying":d.state==="closed"?"GameResult":"GameJoining"):(localStorage.removeItem("playerData"),l("GameJoining"))})}},[]),e.jsxs(e.Fragment,{children:[s==="GameJoining"?e.jsx(F,{}):e.jsx(gt,{player:a,currentState:s,setCurrentState:l}),e.jsx(P.div,{className:`text-dark-gray-8 ${t&&"opacity-0"} h-[calc(100vh-48px)] overflow-y-auto transition-all`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[s==="GameJoining"&&e.jsx(ut,{setCurrentState:l,setPlayer:n}),s==="GameWaiting"&&a&&e.jsx(ft,{setCurrentState:l,player:a}),s==="GamePlaying"&&a&&e.jsx(yt,{setCurrentState:l,player:a}),s==="GameResult"&&a&&e.jsx(pe,{gameId:a.gameId})]})})]})},bt=()=>{const[t,r]=I(z),[s,l]=m.useState({isOpen:!1,videoId:""}),[a,n]=m.useState([]),[o,i]=m.useState(JSON.parse(localStorage.getItem("problemStatus")||"{}"));m.useEffect(()=>{r(!0),fetch(le,{method:"GET"}).then(c=>c.json()).then(c=>{n(c),r(!1)})},[]);const d=()=>{l({isOpen:!1,videoId:""})};return e.jsx(e.Fragment,{children:!t&&e.jsx(P.div,{className:"relative overflow-x-auto mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:a.length>0&&e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Status"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Solution"})]})}),e.jsx("tbody",{className:"text-white",children:a!==void 0&&a.map((c,u)=>{const g=c.difficulty==="Easy"?"text-dark-green-s":c.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${u%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-4 py-4 whitespace-nowrap text-dark-green-s",children:e.jsx("div",{className:" cursor-pointer h-6",onClick:()=>{i(p=>(p[c.id]=!p[c.id],localStorage.setItem("problemStatus",JSON.stringify(p)),{...p}))},children:o[c.id]&&e.jsx(se,{width:"18"})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx(_,{className:"hover:text-blue-600",to:`/problem?id=${c.id}`,children:c.title})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:c.tags.map(p=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:p.title},p.id))})}),e.jsx("td",{className:`px-3 py-4 ${g}`,children:c.difficulty}),e.jsx("td",{className:"px-3 py-4",children:c.solutionVideo?e.jsx(Oe,{fontSize:"28",className:"cursor-pointer hover:text-red-600",onClick:()=>l({isOpen:!0,videoId:c.solutionVideo})}):e.jsx("p",{className:"text-gray-400",children:"Coming soon"})})]},u)})}),s.isOpen&&e.jsxs("tfoot",{className:"fixed top-0 left-0 h-screen w-screen flex items-center justify-center",children:[e.jsx("div",{className:"bg-black z-10 opacity-70 top-0 left-0 w-screen h-screen absolute",onClick:d}),e.jsx("div",{className:"w-full z-50 h-full px-6 relative max-w-4xl",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center relative",children:e.jsxs("div",{className:"w-full relative",children:[e.jsx(D,{fontSize:"35",className:"cursor-pointer absolute -top-16 right-0 text-dark-gray-8",onClick:d}),e.jsx(Me,{videoId:s.videoId,loading:"lazy",iframeClassName:"w-full min-h-[500px]"})]})})})]})]})})})},vt=()=>{const t=ae(A),r=$(),s=()=>{t.isLogin?r("/gameHost"):N.error("Please Sign In")};return e.jsxs("div",{children:[e.jsx(F,{}),e.jsx(P.div,{className:"block h-[calc(100vh-48px)] overflow-y-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"w-11/12 md:w-9/12 mx-auto pt-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1",children:"Let's Code!"}),e.jsxs("div",{className:" flex mt-5",children:[e.jsx("button",{onClick:s,children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105 flex items-end justify-center",children:[e.jsx("img",{src:"createGame.svg",className:"h-24 object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Create Game"})]})}),e.jsx(_,{to:"gamePlayer",className:" ml-8",children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105",children:[e.jsx("img",{src:"joinGame.svg",className:"h-full w-full object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Join Game"})]})})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1 mt-5",children:"Problems"}),e.jsx(bt,{})]})]})})]})},wt=()=>{const t=W(A),[r,s]=m.useState(""),[l,a]=m.useState(""),[n,o]=m.useState(!1),i=d=>{if(!n){if(d.preventDefault(),r==="")return N.error("Email can not be empty");if(l==="")return N.error("Password can not be empty");o(!0),fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"native",email:r,password:l})}).then(c=>c.json()).then(c=>{c.errors?N.error(c.errors):(N.success("Sign In Successfully"),localStorage.setItem("userData",JSON.stringify(c.data)),s(""),a(""),t(u=>({...u,isOpen:!1,isLogin:!0})))}).catch(c=>{console.error(c)}).finally(()=>{o(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign In"}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:r,name:"email",onChange:d=>{s(d.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:l,name:"password",onChange:d=>{a(d.target.value)},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{disabled:n,className:"w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s mt-6 disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-5",children:["Not Registered?",e.jsx("button",{onClick:()=>{t(d=>({...d,type:"register"}))},className:"text-blue-400 hover:underline ml-3",children:"Create Account"})]})]})},kt=()=>{const t=W(A),[r,s]=m.useState(""),[l,a]=m.useState(""),[n,o]=m.useState(""),[i,d]=m.useState(""),[c,u]=m.useState(!1),g=p=>{if(!c){if(p.preventDefault(),r==="")return N.error("Name can not be empty");if(l==="")return N.error("Email can not be empty");if(n==="")return N.error("Password can not be empty");if(i!==n)return N.error("Passwords are not matched");u(!0),fetch(De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:l,password:n})}).then(x=>x.json()).then(x=>{x.errors?N.error(x.errors):(N.success("Sign Up Successfully"),localStorage.setItem("userData",JSON.stringify(x.data)),s(""),a(""),o(""),d(""),t(h=>({...h,isOpen:!1,isLogin:!0})))}).catch(x=>{N.error(x.errors)}).finally(()=>{u(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign Up"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Name"}),e.jsx("input",{type:"name",value:r,onChange:p=>s(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:l,onChange:p=>a(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:n,onChange:p=>o(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Confirm Password"}),e.jsx("input",{type:"password",value:i,onChange:p=>d(p.target.value),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{disabled:c,className:" mt-5 w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-3",children:["Already have an account",e.jsx("button",{className:"text-blue-300 hover:underline ml-3",onClick:()=>{t(p=>({...p,type:"login"}))},children:"Sign In"})]})]})},St=()=>{const[t,r]=m.useState(""),s=W(A),[l,a]=m.useState(),n=$(),o=i=>{s(d=>({...d,isOpen:!1})),n(`/problem?id=${i}`)};return m.useEffect(()=>{const i=localStorage.getItem("userData");if(i){const d=JSON.parse(i);r(d.user.name);const c=d.access_token;fetch(Qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${c}`}}).then(u=>u.json()).then(u=>{a(u)})}else N.error("Login timeout"),s(d=>({...d,isOpen:!1,isLogin:!1}))},[]),e.jsxs("div",{className:" w-[800px] h-[560px] bg-dark-layer-1 px-10",children:[e.jsxs("div",{className:" h-[100px] mt-[20px] px-3 text-white font-semibold text-2xl flex items-center tracking-wide",children:[e.jsxs("span",{className:" text-dark-yellow mr-[10px]",children:[t,"'s"]}),"Host History"]}),e.jsxs("div",{className:"h-[420px] overflow-y-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-dark-gray-8 text-left border-b-[1px] h-[60px]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-2 w-[10%]",children:"GameId"}),e.jsx("th",{className:"py-3 px-2 w-[25%]",children:"Problems"}),e.jsx("th",{className:"py-3 px-2 w-[30%]",children:"Players"}),e.jsx("th",{className:"py-3 px-2 w-[15%] text-center",children:"Time"})]})}),e.jsx("tbody",{className:"text-dark-gray-8 ",children:l&&l.length>0&&l.map((i,d)=>e.jsxs("tr",{className:`${d%2===1?"bg-dark-fill-3":""}`,children:[e.jsx("td",{className:"py-3 px-3",children:i.contestId}),e.jsx("td",{className:"py-3 px-2",children:i.problems.map((c,u)=>e.jsx("div",{className:"font-semibold leading-7 hover:text-blue-500 transition-all cursor-pointer",onClick:()=>o(c.id),children:c.title},u))}),e.jsx("td",{className:"py-4 px-2 flex flex-wrap",children:i.players.map((c,u)=>e.jsxs("div",{className:"mr-[12px] mb-1 flex items-center",children:[e.jsx("img",{src:`${T}&seed=${c.name}`,className:"h-[25px] mr-[4px]"}),c.name]},u))}),e.jsxs("td",{className:"py-3 text-center text-dark-gray-7",children:[e.jsx("div",{children:new Date(i.startedAt).toLocaleDateString()}),e.jsx("div",{children:new Date(i.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},d))})]}),l&&l.length===0&&e.jsx("div",{className:"h-[300px] w-full items-center justify-center flex text-xl tracking-wide text-dark-gray-7",children:"You have no host history"})]})]})},Ct=()=>{const[t,r]=I(A),s=()=>{r(l=>({...l,isOpen:!1}))};return e.jsxs("div",{children:[e.jsx("div",{className:`z-40 absolute top-0 w-full h-full flex items-center justify-center bg-black transition-all duration-500 ${t.isOpen?" opacity-50 ":"pointer-events-none opacity-0"}`,onClick:s}),e.jsxs("div",{className:`w-fit absolute left-[50%] translate-y-[-50%] translate-x-[-50%] flex justify-center z-50 rounded-lg overflow-hidden
        transition-all duration-500 ${t.isOpen?"top-[50%] opacity-100":"top-[-60%] opacity-0"} `,children:[e.jsx("button",{className:"absolute bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center text-white right-[5px] top-[5px]",children:e.jsx(D,{className:"h-6 w-6",onClick:s})}),t.type==="register"&&e.jsx(kt,{}),t.type==="login"&&e.jsx(wt,{}),t.type==="profile"&&e.jsx(St,{})]})]})};function Pt(){return e.jsx(ye,{children:e.jsxs("div",{className:"bg-dark-layer-2 min-h-screen relative",children:[e.jsx(Te,{position:"top-center",autoClose:2500,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),e.jsx(Ct,{}),e.jsxs(Le,{children:[e.jsx(B,{path:"/",element:e.jsx(vt,{})}),e.jsx(B,{path:"problem",element:e.jsx(ot,{})}),e.jsx(B,{path:"gameHost",element:e.jsx(pt,{})}),e.jsx(B,{path:"gamePlayer",element:e.jsx(Nt,{})})]})]})})}ge.createRoot(document.getElementById("root")).render(e.jsx(Ee,{children:e.jsx(Pt,{})}));
