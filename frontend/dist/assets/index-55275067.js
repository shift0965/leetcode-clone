import{r as x,j as e}from"./react-bb1a8b08.js";import{c as ye}from"./react-dom-b05b0288.js";import{L as M,u as Ne,B as be}from"./react-router-dom-bd488c8a.js";import{F as ve,a as we,b as te,B as _,I as ke,A as Se,c as Ce,C as Pe,d as se,e as D,f as Q,g as X,h as ae,i as Ge,j as Oe,G as Ee,k as Te}from"./react-icons-ef56d0db.js";import{R as U,a as I,b as re,c as W,d as Ie}from"./recoil-c3334d42.js";import{Q as y,k as $e}from"./react-toastify-ca6d5611.js";import{m as P}from"./framer-motion-ca35d016.js";import{S as Y}from"./react-split-394c0406.js";import{G as Ae,E as Le}from"./@codemirror-4e45e905.js";import{R as Je,v as _e}from"./@uiw-0006cca6.js";import{a as $,d as Me,e as J}from"./react-router-c4336f7a.js";import{l as R}from"./socket.io-client-5e3fa801.js";import{C as Re}from"./react-confetti-4487dd03.js";import{l as ne}from"./lodash-8f34d9d6.js";import{Y as ze}from"./react-youtube-4df3b629.js";import"./fast-deep-equal-ca765bc5.js";import"./scheduler-765c72db.js";import"./@remix-run-e5357272.js";import"./clsx-1229b3e0.js";import"./prop-types-e0d21109.js";import"./split.js-822f4990.js";import"./@lezer-b3acbd76.js";import"./crelt-7bb88e1d.js";import"./style-mod-ae491175.js";import"./w3c-keyname-9fb136d3.js";import"./@babel-df62547b.js";import"./engine.io-client-b8dcd8ee.js";import"./engine.io-parser-a5b7cb40.js";import"./@socket.io-3e1df240.js";import"./socket.io-parser-44417fca.js";import"./youtube-player-63f3f564.js";import"./sister-57707ffb.js";import"./load-script-d550e3b0.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}})();const w="",Be=":3001",le=`${w}/api/1.0/problems/`,Fe=`${w}/api/1.0/problems/details`,He=`${w}/api/1.0/workspace/run`,De=`${w}/api/1.0/workspace/submit`,Ue=`${w}/api/1.0/user/signin`,We=`${w}/api/1.0/user/signup`,Ye=`${w}/api/1.0/contest/hostCheckGame`,Ke=`${w}/api/1.0/contest/hostCreateGame`,Ve=`${w}/api/1.0/contest/hostTerminateGame`,qe=`${w}/api/1.0/contest/hostStartGame`,Qe=`${w}/api/1.0/contest/hostGetPlayersCode`,Z=`${w}/api/1.0/contest/hostSendMessage`,Xe=`${w}/api/1.0/contest/hostCloseGame`,Ze=`${w}/api/1.0/contest/hostGetHistory`,et=`${w}/api/1.0/contest/playerJoinGame`,tt=`${w}/api/1.0/contest/playerCheckGame`,T="https://api.dicebear.com/6.x/avataaars/svg?size=64",st=`${w}/api/1.0/contest/playerExitGame`,at=`${w}/api/1.0/contest/playerSubmit`,ie=`${w}/api/1.0/contest/getPlayers`,K=`${w}/api/1.0/contest/getProblems`,oe=`${w}/api/1.0/contest/getPlayersProgress`,ce=`${w}/api/1.0/contest/getTimeLimit`,rt=`${w}/api/1.0/contest/getGameResult`,z=Be,nt=()=>{const[t,a]=x.useState(!1),[s,n]=x.useState(0),r=l=>{const o=Math.floor(l/3600),i=Math.floor(l%3600/60),m=l%60;return`${o<10?"0"+o:o}:${i<10?"0"+i:i}:${m<10?"0"+m:m}`};return x.useEffect(()=>{let l;return t&&(l=setInterval(()=>{n(o=>o+1)},1e3)),()=>clearInterval(l)},[t]),e.jsx("div",{children:t?e.jsxs("div",{className:"flex items-center space-x-2 bg-dark-fill-3 p-1.5 cursor-pointer rounded hover:bg-dark-fill-2",children:[e.jsx("div",{children:r(s)}),e.jsx(ve,{onClick:()=>{a(!1),n(0)}})]}):e.jsx("div",{className:"flex items-center p-1 h-8 hover:bg-dark-fill-3 rounded cursor-pointer",onClick:()=>a(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})})})})},A=U({key:"authModalState",default:{isOpen:!1,type:"login",isLogin:!1}}),de=U({key:"bulletSwitchState",default:!0}),B=U({key:"loadingState",default:!0}),F=({isWorkspace:t=!1})=>{const a=()=>{localStorage.removeItem("userData"),n(l=>({...l,isLogin:!1})),y.success("Sign Out Successfully ")},[s,n]=I(A),r=()=>{n(l=>({...l,isOpen:!0,type:"login"}))};return x.useEffect(()=>{const l=localStorage.getItem("userData");l?JSON.parse(l).access_expired>new Date().getTime()/1e3?n(i=>({...i,isLogin:!0})):(localStorage.removeItem("userData"),n(i=>({...i,isLogin:!1}))):n(o=>({...o,isLogin:!1}))},[]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:`flex w-full items-center justify-between ${t?"":"max-w-[1200px] mx-auto"}`,children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(M,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[t&&e.jsx(nt,{}),s.isLogin?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:" relative flex items-center text-2xl py-1 cursor-pointer",onClick:()=>n(l=>({...l,isOpen:!0,type:"profile"})),children:e.jsx(we,{})}),e.jsx("button",{className:"bg-dark-fill-3 py-1.5 px-3 cursor-pointer rounded text-brand-orange hover:bg-dark-fill-2 transition-all",onClick:a,children:e.jsx(te,{})})]}):e.jsx("button",{className:" bg-dark-fill-3 py-1 px-2 cursor-pointer rounded",onClick:r,children:"Sign In"})]})]})})},lt=({handleRun:t,handleSubmit:a,splitRatio:s,pending:n,setSplitRatio:r})=>e.jsx("div",{className:"flex bg-dark-layer-1 absolute bottom-0 z-10 w-full",children:e.jsxs("div",{className:"mx-5 my-[10px] flex justify-between w-full",children:[e.jsx("div",{className:"mr-2 flex flex-1 flex-nowrap items-center space-x-4",children:n?e.jsx("div",{className:"px-3 py-1.5 font-medium text-dark-label-2 items-center transition-all inline-flex text-sm",children:"Pending..."}):e.jsxs("button",{className:"px-3 py-1.5 font-medium items-center transition-all inline-flex bg-dark-fill-3 text-sm hover:bg-dark-fill-2 text-dark-label-2 rounded-lg pl-3 pr-2",onClick:()=>{r(l=>l>90?50:100)},children:["Console",e.jsx("div",{className:`ml-1 transform transition duration-200 ease-in-out flex items-center ${s>90?"rotate-0":"rotate-180"}`,children:e.jsx(_,{className:"fill-gray-6 mx-1 fill-dark-gray-6"})})]})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx("button",{className:`px-3 py-1.5 text-sm font-medium items-center whitespace-nowrap transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 text-dark-label-2 rounded-lg 
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:t,disabled:n,children:"Run"}),e.jsx("button",{className:`px-3 py-1.5 font-medium items-center transition-all focus:outline-none inline-flex text-sm text-white bg-dark-green-s hover:bg-green-3 rounded-lg
                       disabled:opacity-50 disabled:cursor-not-allowed`,onClick:a,disabled:n,children:"Submit"})]})]})}),E=({value:t,label:a})=>{const s=t===void 0?"undefined":typeof t=="string"?t:JSON.stringify(t);return e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm mt-4 text-white",children:[a," ="]}),e.jsx("div",{className:"w-full cursor-text rounded-lg px-3 py-[8px] bg-dark-fill-3 text-white mt-2 min-h-[40px]",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:s})})]})},it=({problem:t,showTestcases:a})=>{const[s,n]=x.useState(0);return e.jsxs("div",{className:`${a?"block":"hidden"} py-3`,children:[e.jsx("div",{className:"flex",children:t.exampleCases.map((r,l)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>n(l),children:e.jsx("div",{className:"flex flex-wrap items-center",children:e.jsxs("div",{className:`items-center text-sm font-semibold transition-all focus:outline-none inline-flex  hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${s===l?"text-white bg-dark-fill-3":"text-gray-400"}
                `,children:["Case ",l+1]})})},l))}),e.jsx("div",{className:"mt-4",children:t.exampleCases.map((r,l)=>e.jsx("div",{className:`${l===s?"block":"hidden"}`,children:e.jsx("div",{className:"mt-4",children:t.inputKeys.map((o,i)=>{var m;return e.jsx(E,{label:o,value:(m=t.exampleCases[s])==null?void 0:m.input[i]},i)})})},l))})]})},ot=({problem:t,pending:a,showTestcases:s,runResults:n,execError:r,submitResult:l})=>{var u;const[o,i]=x.useState(0),[m,c]=x.useState(!0);return x.useEffect(()=>{c(!0),n==null||n.forEach(g=>{g.passed||c(!1)})},[n]),e.jsxs("div",{className:`${s?"hidden":"block"} py-4`,children:[r&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-dark-pink font-semibold text-xl ml-1",children:r.name}),e.jsx("div",{className:"w-full cursor-text rounded-lg border px-3 py-[8px] bg-dark-fill-3 border-transparent text-dark-pink bg-dark-pink bg-opacity-[15%] mt-3",children:e.jsxs("pre",{className:"whitespace-pre-wrap text-sm leading-6",children:[r.line&&`Line ${r.line}
`,r.message]})})]}),n&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:m?e.jsx("span",{className:"text-dark-green-s",children:"Accepted"}):e.jsx("span",{className:"text-dark-pink",children:"Wrong Answer"})}),e.jsx("div",{className:"flex mt-1",children:t.exampleCases.map((g,p)=>e.jsx("div",{className:"mr-2 items-start mt-2 ",onClick:()=>i(p),children:e.jsx("div",{className:"flex flex-wrap items-center gap-y-4",children:e.jsxs("div",{className:`items-center transition-all focus:outline-none inline-flex bg-dark-fill-3 hover:bg-dark-fill-2 relative rounded-lg px-4 py-1 cursor-pointer whitespace-nowrap
                  ${o===p?"text-white":"text-gray-500"}
                `,children:[e.jsx("div",{className:`w-1 h-1 rounded-full mr-2 ${n[p].passed?" bg-dark-green-s":"bg-dark-pink"}`}),"Case ",p+1]})})},p))}),t.exampleCases.map((g,p)=>e.jsxs("div",{className:`${p===o?"block":"hidden"}`,children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Stdin",value:g.input.map(d=>JSON.stringify(d)).join(", ")})}),e.jsx("div",{className:`mt-4 ${n[o].stdout.length>0?"block":"hidden"}`,children:e.jsx(E,{label:"Stdout",value:n[o].stdout.map(d=>typeof d=="string"?d:JSON.stringify(d)).join(`
`)})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:n[o].output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:n[o].expected})})]},p))]}),l&&l.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-green-s",children:"Passed"})}),e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:"All the test cases are passed"})]}),l&&!l.passed&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"font-semibold text-xl ml-1",children:e.jsx("span",{className:"text-dark-pink",children:"Failed"})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Input",value:(u=l.input)==null?void 0:u.map(g=>JSON.stringify(g)).join(", ")})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Output",value:l.output})}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{label:"Expected",value:l.expected})})]})]}),!(n||r||l)&&e.jsx("div",{className:" text-dark-gray-7 text-md tracking-wide flex h-24 justify-center items-center",children:a?"Pending...":"You need to run you code first"})]})},V=({userCode:t,onChangeCode:a,readOnly:s=!1,textLarge:n=!1})=>e.jsx("div",{className:"w-full overflow-y-auto h-full flex flex-col",children:e.jsx(Je,{className:`codeMirror ${n?"text-[16px]":"text-[14px]"}`,value:t,onChange:r=>a&&a(r),theme:_e,extensions:[Ae(),Le.lineWrapping],basicSetup:{autocompletion:!1,highlightActiveLine:!s,foldGutter:!s,highlightActiveLineGutter:!s},editable:!s,readOnly:s})}),me=({problem:t,gameMode:a=!1,gameData:s=void 0})=>{const[n,r]=x.useState(!1),[l,o]=x.useState(""),[i,m]=x.useState(!0),[c,u]=x.useState(),[g,p]=x.useState(),[d,h]=x.useState(),[f,b]=x.useState(50),[j,N]=x.useState(!1),v=()=>{n?(document.exitFullscreen(),r(!1)):(document.documentElement.requestFullscreen(),r(!0))},S=()=>{N(!0),h(void 0),u(void 0),p(void 0)},C=()=>{m(!1),N(!1)},O=()=>{S(),fetch(He,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({problemId:t.id||0,language:"js",code:l})}).then(k=>k.json()).then(k=>{if(k.errors)throw new Error(k.errors);k.type==="error"?h(k.data):u(k.data)}).catch(k=>{y.error(k.message||"run failed")}).finally(()=>{C()})},L=()=>{S(),fetch(a?at:De,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a?{problemId:t.id||0,language:"js",code:l,playerId:s==null?void 0:s.player.id,gameId:s==null?void 0:s.player.gameId,progress:s==null?void 0:s.myProgress.progress,finishedAt:s==null?void 0:s.myProgress.finishedAt}:{problemId:t.id||0,language:"js",code:l})}).then(G=>G.json()).then(G=>{if(G.errors)throw new Error(G.errors);if(G.type==="error")h(G.data);else if(p(G.data),G.data.passed){y.success("Passed !");const q=JSON.parse(localStorage.getItem("problemStatus")||"{}");q[t.id]=!0,localStorage.setItem("problemStatus",JSON.stringify(q)),a&&(s==null||s.setMyProgress({id:s.myProgress.id,name:s.myProgress.name,progress:G.progress,finishedAt:G.finishedAt}))}}).catch(G=>{y.error(G.message||"run failed")}).finally(()=>{C()})},ge=k=>{t&&(localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,k),a&&(s==null||s.updateCode(s.player.gameId,s.player.id,s.player.name,t.id,t.title,k))),o(k)},je=()=>{if(t){const k=t.boilerplate.replace(/\n\s+/g,`
`);o(k),localStorage.setItem(`code?problem_id=${t.id}&${a&&"gameMode"}`,k)}};return x.useEffect(()=>{if(t){const k=localStorage.getItem(`code?problem_id=${t.id}&${a&&"gameMode"}`);o(k!==null?k:t.boilerplate.replace(/\n\s+/g,`
`))}},[t]),e.jsx("div",{className:"w-full overflow-auto flex flex-col",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-layer-2 h-10 w-full",children:[e.jsx("div",{className:"flex items-center text-white",children:e.jsx("button",{className:"flex cursor-pointer items-center rounded-lg bg-dark-fill-3 text-dark-label-2 px-2 py-1 hover:bg-dark-fill-2",children:"JavaScript"})}),e.jsxs("div",{className:"flex items-center m-2",children:[e.jsx("button",{className:"editor-nav-btn group",onClick:je,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:e.jsx(ke,{})})}),e.jsx("button",{className:"editor-nav-btn group",onClick:v,children:e.jsx("div",{className:"text-dark-gray-6 font-bold text-lg",children:n?e.jsx(Ce,{}):e.jsx(Se,{})})})]})]}),e.jsxs("div",{className:" bg-dark-layer-1 h-full relative",children:[e.jsx("div",{className:"flex flex-col h-[calc(100vh-140px)]",children:e.jsxs(Y,{direction:"vertical",minSize:0,snapOffset:60,sizes:[f,100-f],className:"h-full",onDragEnd:k=>{b(k[0])},children:[e.jsx(V,{userCode:l,onChangeCode:ge}),e.jsxs("div",{className:"w-full px-5 overflow-auto relative",children:[e.jsxs("div",{className:"flex h-11 sticky top-0 bg-dark-layer-1 z-10",children:[e.jsx("div",{className:`flex h-full items-center text-white mx-2 border-b-2 cursor-pointer ${i?"border-white":"border-transparent"}`,onClick:()=>m(!0),children:"Testcases"}),e.jsx("div",{className:`flex h-full  items-center text-white mx-2 border-b-2 cursor-pointer ${i?"border-transparent":"border-white"}`,onClick:()=>m(!1),children:"Result"})]}),e.jsx(it,{problem:t,showTestcases:i}),e.jsx(ot,{problem:t,pending:j,runResults:c,showTestcases:i,execError:d,submitResult:g})]})]})}),e.jsx(lt,{handleRun:O,handleSubmit:L,splitRatio:f,setSplitRatio:b,pending:j})]})]})})},xe=({problem:t})=>e.jsx("div",{className:"flex px-0 py-4 h-[calc(100vh-88px)] overflow-y-auto",children:e.jsx("div",{className:"px-5",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex space-x-4",children:e.jsxs("div",{className:"flex-1 mr-2 text-lg font-semibold text-white",children:[t.id,". ",t.title]})}),e.jsx("div",{className:"flex items-center mt-4",children:e.jsx("div",{className:`${t.difficulty==="Hard"?"bg-dark-pink text-dark-pink":t.difficulty==="Medium"?"bg-dark-yellow text-dark-yellow":"bg-dark-green-s text-dark-green-s"} inline-block rounded-[21px] bg-opacity-[.20] px-2.5 py-1 text-xs font-semibold`,children:t.difficulty})}),e.jsx("div",{className:"text-white text-md description mt-5",dangerouslySetInnerHTML:{__html:t.description}}),e.jsx("div",{className:"mt-6",children:t.exampleCases.map((a,s)=>e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-white",children:["Example ",s+1,": "]}),e.jsxs("div",{className:"example-card",children:[a.image&&e.jsx("img",{src:`problemsImgs/${a.image}`,className:"mt-2 w-full max-w-[450px]"}),e.jsxs("pre",{className:"text-sm",children:[e.jsx("strong",{className:"text-white",children:"Input: "}),t.inputKeys.map((n,r)=>e.jsxs("span",{className:"mr-4",children:[n," = ",JSON.stringify(a.input[r])]},r)),e.jsx("br",{}),e.jsx("strong",{children:"Output: "}),JSON.stringify(a.output)," ",e.jsx("br",{}),a.explanation&&e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"Explanation: "}),a.explanation]})]})]})]},s))}),e.jsxs("div",{className:"my-8 pb-4",children:[e.jsx("div",{className:"text-white text-md font-semibold",children:"Constraints:"}),t.constraints.map((a,s)=>e.jsx("ul",{className:"text-white ml-5 list-disc mt-2",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:a}})},s))]})]})})}),ct=({problem:t})=>e.jsx("div",{className:"bg-dark-layer-1",children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-hidden",children:e.jsx("div",{className:"bg-dark-layer-1 rounded-t-[5px] px-5 py-[7px] text-sm cursor-pointer",children:"Description"})}),e.jsx(xe,{problem:t})]})}),dt=()=>{const t=$(),[a]=Ne(),[s,n]=x.useState(),[r,l]=I(B),o=a.get("id")||0;return x.useEffect(()=>{l(!0),fetch(`${Fe}?id=${o}`).then(i=>(i.status!==200&&i.json().then(m=>{y.error(m.errors),t("/")}),i.json())).then(i=>{n(i),l(!1)})},[o]),e.jsxs(e.Fragment,{children:[e.jsx(F,{isWorkspace:!0}),!r&&s&&e.jsx(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsx(ct,{problem:s}),e.jsx(me,{problem:s})]})})]})},mt=({setGameId:t,setCurrentState:a})=>{const[s,n]=x.useState([]),[r,l]=x.useState([]),[o,i]=x.useState(60);x.useEffect(()=>{fetch(le,{method:"GET"}).then(p=>p.json()).then(p=>{n(p)})},[]);const m=()=>{r.length>=5?y.error("At most 5 questions!"):l(p=>[...p,0])},c=(p,d)=>{l(h=>{const f=[...h];return f[d]=p,f})},u=p=>{l(d=>{const h=[...d];return h.splice(p,1),h})},g=()=>{if(r.length===0)return y.error("No question is selected");if(new Set(r).size!==r.length)return y.error("Questions should not repeat");const p=localStorage.getItem("userData");if(!p)return y.error("Please Log In");const d=JSON.parse(p).access_token;fetch(`${Ke}`,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({timeLimit:o,problemList:r.map(h=>s[h].id)})}).then(h=>{h.status===401||h.status===403?(y.error("Login timeout"),localStorage.removeItem("userData"),a("GameCreating")):h.json().then(f=>{t(f.gameId),a("PlayersJoining")})})};return e.jsxs(P.div,{className:"w-11/12 md:w-9/12 mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Create Game"}),e.jsx("h1",{className:"text-xl mt-6 ml-1",children:"Questions"}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Id"}),e.jsx("th",{className:"px-3 py-3 w-[35%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%]"})]})}),e.jsx("tbody",{children:r.map((p,d)=>{const h=s[p],f=h.difficulty==="Easy"?"text-dark-green-s":h.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${d%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsx("div",{className:"mr-2",children:d+1})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("select",{className:" bg-dark-fill-2 outline-none py-1.5 px-2 rounded-lg text-dark-gray-8 font-medium",onChange:b=>{c(Number(b.target.value),d)},children:s.map((b,j)=>e.jsx("option",{value:j,children:b.title},j))})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:h.tags.map(b=>e.jsxs("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:[b.title," "]},b.id))})}),e.jsx("td",{className:`px-3 py-4 ${f}`,children:h.difficulty}),e.jsx("td",{children:e.jsx("button",{className:"mx-auto flex items-center text-3xl cursor-pointer rounded hover:text-dark-pink transition-all",onClick:()=>u(d),children:e.jsx(Pe,{})})})]},d)})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{className:"mt-5 py-1 px-3 cursor-pointer rounded  font-medium bg-dark-gray-8 hover:bg-dark-gray-7 transition-all text-dark-layer-2",onClick:m,children:"Add Question"})})]}),e.jsxs("div",{className:" mt-5",children:[e.jsx("h1",{className:"text-xl mt-10 ml-1",children:"Time Limits"}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsx("input",{type:"text",value:o,onChange:p=>i(Number(p.target.value)),className:" bg-dark-fill-2 px-3 py-1.5 w-16 outline-none rounded-lg"}),e.jsx("div",{className:"ml-2 text-lg",children:"Minutes"})]})]}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("button",{onClick:g,className:"bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Create Game"})})]})},he=({players:t})=>{const a=[4,3,5,10,1,2,11,8,0,9,6,7];return e.jsx("div",{className:"flex flex-wrap w-[760px] mx-auto justify-left",children:a.map((s,n)=>{var l;const r=t[s];return e.jsx("div",{className:` -mb-[28px] h-[120px] w-[120px] mx-[32px] bg-dark-fill-3 rotate-45 flex justify-center items-center rounded-md
              ${(n===0||n===7)&&" ml-[124px]"}
              ${n===10&&" ml-[215px]"}
              ${r&&"bg-green-200 bg-opacity-40"}
               transition-all duration-300`,children:e.jsx("div",{className:`-rotate-45 ${!r&&"opacity-0"} transition-all duration-300`,children:r&&e.jsxs(e.Fragment,{children:[e.jsx("img",{alt:"image",src:`${T}&seed=${(l=t[s])==null?void 0:l.name}`,className:"h-20 mb-[34px]"}),e.jsx("div",{className:`absolute left-[50%] -translate-x-[50%] bottom-[3px] text-white w-20 break-all text-center max-h-8 overflow-hidden leading-4
             ${r.name.length>10?"text-sm":"font-medium text-md"}`,children:r.name})]})})},n)})})},xt=({gameId:t})=>{const a=x.useRef(R(z)).current,[s,n]=x.useState([]);return x.useEffect(()=>{if(t)return fetch(ie,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(r=>r.json()).then(r=>{n(r.players)}),a.emit("ws-host-joinGame",{gameId:t}),a.on("ws-host-playerJoinGame",function(r){n(l=>[...l,{id:r.id,name:r.name,gameId:t}])}),a.on("ws-host-playerExitGame",function(r){n(l=>l.filter(o=>o.id!=r.id))}),()=>{a.off("ws-host-playerExitGame"),a.off("ws-host-playerJoinGame")}},[t,a]),e.jsxs(P.div,{className:"text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"mt-14",children:[e.jsxs("h1",{className:"text-4xl text-center",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7 mt-6",children:"Waiting For Players To Join..."})]}),e.jsx("div",{className:" mt-16",children:e.jsx(he,{players:s})})]})},ht=({gameId:t,playersCode:a,focusedPlayerId:s,playersProgress:n,setFocusedPlayerId:r})=>{var p;const[l,o]=x.useState(""),i=a.find(d=>d.id===s),[m,c]=x.useState((i==null?void 0:i.lastModifyedProblem)||0),u=(p=n.find(d=>d.id===(i==null?void 0:i.id)))==null?void 0:p.progress,g=d=>{d.preventDefault(),l!==""&&(o(""),d.nativeEvent.submitter.name==="sendMessage"&&i?fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:i.id,message:l})}):d.nativeEvent.submitter.name==="sendGroupMessage"&&fetch(Z,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t,playerId:-1,message:l})}))};return e.jsx("div",{className:"text-gray-50 flex gap-[12px] px-[10px] mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto relative",children:i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full  shrink rounded-lg overflow-hidden bg-dark-layer-1",children:e.jsx(V,{userCode:i.problems[m].code,readOnly:!0,textLarge:!0})}),e.jsxs("div",{className:"flex flex-col w-[300px] shrink-0 text-white bg-dark-layer-2",children:[e.jsxs("div",{className:"w-full overflow-auto flex flex-col",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-b-[1px] border-dark-fill-2",children:"Problems"}),e.jsx("div",{className:"overflow-y-auto",children:i.problems.map((d,h)=>e.jsxs("div",{className:`flex items-center px-4 py-[7px] text-sm  cursor-pointer w-full h-14 hover:bg-dark-fill-3 ${h===m?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>c(h),children:[e.jsxs("span",{children:[h+1,". ",d.title]}),u&&u.map((f,b)=>e.jsx("span",{className:`text-dark-green-s ml-auto text-[18px] ${f.id===d.id&&f.passed?"block":"hidden"}`,children:e.jsx(se,{})},b))]},h))})]}),e.jsxs("div",{className:"mt-auto h-40",children:[e.jsx("div",{className:"h-14 flex items-center px-3 text-dark-gray-8 text-lg border-t-[1px] border-dark-fill-2",children:"Send Message"}),e.jsxs("form",{onSubmit:g,children:[e.jsx("div",{className:"px-2",children:e.jsx("input",{value:l,onChange:d=>o(d.target.value),className:" w-full bg-dark-fill-2 rounded-lg outline-none text-lg px-3 py-2 resize-none"})}),e.jsxs("div",{className:"flex px-3 mt-3",children:[e.jsx("button",{type:"submit",name:"sendMessage",className:" px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-green-s hover:bg-opacity-80 rounded-lg",children:"Send"}),e.jsx("button",{type:"submit",name:"sendGroupMessage",className:"ml-auto px-3 py-1.5 font-medium items-center transition-all flex text-sm text-white bg-dark-gray-6 hover:bg-opacity-80 rounded-lg",children:"Send Group"})]})]})]})]}),e.jsx("div",{className:" absolute text-[24px] rounded-full border-[1.5px] border-white p-1 left-1/2 -translate-x-1/2 top-[30px] opacity-30 hover:opacity-90 transition-all cursor-pointer",onClick:()=>r(void 0),children:e.jsx(D,{})})]})})},pt=({gameId:t})=>{const[a,s]=x.useState([]),[n,r]=x.useState([]),[l,o]=x.useState([]),[i,m]=x.useState(!0),c=x.useRef(R(z)).current,[u,g]=x.useState(void 0),p=()=>{s(d=>(d.sort((h,f)=>{const b=h.progress.reduce((N,v)=>v.passed?N+1:N,0),j=f.progress.reduce((N,v)=>v.passed?N+1:N,0);return b>j?-1:b<j?1:h.finishedAt&&f.finishedAt?new Date(h.finishedAt).getTime()-new Date(f.finishedAt).getTime():0}),[...d]))};return x.useEffect(()=>{fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(d=>d.json()).then(d=>{r(d.problems)}),c.emit("ws-host-joinGame",{gameId:t})},[c]),x.useEffect(()=>(n.length>0&&(fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(d=>d.json()).then(d=>{s(d.progress.map(h=>({id:h.id,name:h.name,finishedAt:h.finishedAt,progress:h.progress?JSON.parse(h.progress):n.map(f=>({id:f.id,passed:!1}))}))),p()}),fetch(Qe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(d=>d.json()).then(d=>{o(d.playersCode.map(h=>({id:h.id,name:h.name,problems:n.map(f=>{const b=h.problems.findIndex(j=>j.id===f.id);return b===-1?{id:f.id,title:f.title,code:f.boilerplate.replace(/\n\s+/g,`
`)}:{...h.problems[b]}})})))}),c.on("ws-host-updateProgress",function({playerId:d,progress:h,finishedAt:f}){s(b=>(b.forEach(j=>{j.id===d&&(j.progress=h,j.finishedAt=f)}),[...b])),p()}),c.on("ws-host-playerExitGame",function(d){s(h=>h.filter(f=>f.id!=d.id)),o(h=>h.filter(f=>f.id!=d.id))}),c.on("ws-host-playerJoinGame",function(d){s(h=>[...h,{id:d.id,name:d.name,finishedAt:null,progress:n.map(f=>({id:f.id,passed:!1}))}]),o(h=>(h.push({id:d.id,name:d.name,problems:n.map(f=>({id:f.id,title:f.title,code:f.boilerplate.replace(/\n\s+/g,`
`)}))}),[...h]))}),c.on("ws-host-playerUpdateCode",function(d){o(h=>{const f=h.findIndex(b=>b.id===d.id);if(f!==-1){const b=h[f].problems.findIndex(j=>j.id===d.problemId);b!==-1&&(h[f].problems[b].code=d.code,h[f].lastModifyedProblem=b)}return[...h]})})),()=>{c.off("ws-host-updateProgress"),c.off("ws-host-playerJoinGame"),c.off("ws-host-playerExitGame"),c.off("ws-host-playerUpdateCode")}),[n,c]),e.jsxs(P.div,{className:"flex relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${i?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>m(!0),children:e.jsx(_,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0  bg-dark-layer-1 mt-[8px] h-[calc(100vh-64px)] rounded-lg transition-all duration-500
        ${i?"translate-x-0 w-[300px] ml-[8px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:"h-[64px] flex items-center border-b-[1px] border-dark-fill-2 px-3 relative",children:[e.jsxs("h1",{className:"text-xl",children:["Game Id - ",e.jsx("strong",{className:" text-dark-pink",children:t})]}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[14px]
             right-[8px]`,onClick:()=>m(!1),children:e.jsx(_,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-128px)] overflow-y-auto overflow-hidden rounded-b-lg",children:a.map((d,h)=>{const f=d.progress.length,b=d.progress.reduce((j,N)=>N.passed?j+1:j,0);return e.jsxs("div",{className:`h-[72px] border-b-[1px] border-dark-fill-2 flex items-center  px-3 cursor-pointer 
                          hover:bg-dark-fill-3 ${u===d.id?"bg-dark-fill-3":"bg-dark-layer-1"}`,onClick:()=>{u===d.id?g(void 0):g(d.id)},children:[e.jsx("div",{className:"text-xl font-semibold text-dark-yellow",children:h+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${d.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:"text-lg ml-3",children:d.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[b,"/",f]})]},h)})})]}),!u&&e.jsx("div",{className:"shrink text-gray-50 mt-[8px] h-[calc(100vh-64px)] w-full overflow-y-auto",children:e.jsx("div",{className:"flex flex-wrap gap-[12px] px-[14px]",children:l.map((d,h)=>{const f=d.problems[d.lastModifyedProblem||0];return e.jsxs("div",{className:"h-[300px] w-[calc(50%-10px)] relative rounded-lg bg-dark-layer-1 overflow-hidden cursor-pointer",onClick:()=>g(d.id),children:[e.jsx("div",{className:" absolute bottom-0",children:e.jsx(V,{userCode:f.code,readOnly:!0})}),e.jsxs("div",{className:" absolute top-2 left-3 inline-flex bg-sky-900 items-center rounded-lg px-2 py-1",children:[e.jsx("img",{src:`${T}&seed=${d.name}`,alt:"avatar",className:" h-[26px] mr-1"}),d.name]}),e.jsx("div",{className:" absolute top-2 right-3 inline-flex bg-emerald-900  items-center rounded-lg px-2 py-1",children:f.title})]},h)})})}),u&&e.jsx(ht,{gameId:t,playersCode:l,focusedPlayerId:u,playersProgress:a,setFocusedPlayerId:g})]})},pe=({timeLeft:t,setTimeLeft:a})=>{const s=n=>{const r=Math.floor(n/3600),l=Math.floor(n%3600/60),o=n%60;return`${r<10?"0"+r:r}:${l<10?"0"+l:l}:${o<10?"0"+o:o}`};return x.useEffect(()=>{const n=setInterval(()=>{a(r=>r&&(r<=0?0:r-1))},1e3);return()=>clearInterval(n)},[a]),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center p-1 h-8 cursor-default",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",className:"h-6 w-6 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 4a9 9 0 110 18 9 9 0 010-18zm0 2a7 7 0 100 14 7 7 0 000-14zm0 1.634a1 1 0 01.993.883l.007.117-.001 3.774 2.111 1.162a1 1 0 01.445 1.253l-.05.105a1 1 0 01-1.254.445l-.105-.05-2.628-1.447a1 1 0 01-.51-.756L11 13V8.634a1 1 0 011-1zM16.235 2.4a1 1 0 011.296-.269l.105.07 4 3 .095.08a1 1 0 01-1.19 1.588l-.105-.069-4-3-.096-.081a1 1 0 01-.105-1.319zM7.8 2.4a1 1 0 01-.104 1.319L7.6 3.8l-4 3a1 1 0 01-1.296-1.518L2.4 5.2l4-3a1 1 0 011.4.2z",clipRule:"evenodd"})}),e.jsx("div",{children:s(t)})]})})},ut=({gameId:t,currentState:a,setCurrentState:s})=>{const n=$(),[r,l]=x.useState();x.useEffect(()=>{if(a==="GameWatching"&&t){const c=()=>{fetch(ce,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(g=>g.json()).then(g=>{const p=g.endedAt-new Date().getTime();l(Math.floor(p/1e3))})};c();const u=setInterval(()=>{c()},6e4);return()=>clearInterval(u)}},[a,t]);const o=()=>{const c=localStorage.getItem("userData");if(c&&t){const u=JSON.parse(c).access_token;fetch(qe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({gameId:t})}).then(g=>{g.status===200?(y("ðŸ”¥ Game Started !"),s("GameWatching")):y.error("Start Game failed")})}},i=()=>{const c=localStorage.getItem("userData");if(c&&t){const u=JSON.parse(c).access_token;fetch(Ve,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({gameId:t})}).then(g=>{g.status===200?n("/"):y.error("Shot down failed")})}},m=()=>{const c=localStorage.getItem("userData");if(c&&t){const u=JSON.parse(c).access_token;fetch(Xe,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify({gameId:t})}).then(g=>{g.status===200?s("GameResult"):n("/")})}};return x.useEffect(()=>{a==="GameWatching"&&r&&r<=0&&s("GameResult")},[r,a]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(M,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),e.jsxs("div",{className:"relative h-11 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:"./gameHost.png",alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:"HOST"})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GameWatching"&&r&&e.jsx(pe,{timeLeft:r,setTimeLeft:l}),a==="PlayersJoining"&&e.jsxs("div",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-green-s font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:o,children:[e.jsx("div",{className:"mr-2",children:"Start Game"}),e.jsx(Q,{})]}),a==="GameWatching"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-yellow font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:m,children:[e.jsx("div",{className:"mr-2",children:"Close Game"}),e.jsx(Q,{})]}),a==="PlayersJoining"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:i,children:[e.jsx("div",{className:"mr-2",children:"Shut Down"}),e.jsx(X,{})]}),a==="GameResult"&&e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink font-medium hover:bg-dark-fill-2 transition-all shrink-0 whitespace-nowrap",onClick:i,children:[e.jsx("div",{className:"mr-2",children:"Leave"}),e.jsx(X,{})]})]})]})})},H=({name:t,place:a})=>e.jsxs("div",{className:"",children:[e.jsx("img",{src:`${T}&seed=${t}`,alt:"avatar",className:"w-24"}),e.jsx("div",{className:`rounded-lg text-center py-[3px] text-dark-layer-1 font-semibold  ${a===1?"bg-amber-200":a===2?"bg-slate-200":" bg-orange-200"}`,children:t})]}),ue=({gameId:t})=>{const[a,s]=x.useState([]),[n,r]=x.useState([]),[l,o]=I(B);x.useEffect(()=>{o(!0),fetch(rt,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t})}).then(m=>m.json()).then(m=>{s(m.players),r(m.problems),o(!1)})},[]);const i=m=>{const c=Math.floor(m/3600),u=Math.floor(m%3600/60),g=m%60;return`${c<10?"0"+c:c}:${u<10?"0"+u:u}:${g<10?"0"+g:g}`};return e.jsx("div",{className:"",children:!l&&e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsxs("div",{className:"flex justify-center relative h-[400px] w-[600px] mx-auto ",children:[e.jsx(Re,{numberOfPieces:70,width:600,height:400}),a[0]&&e.jsx("div",{className:" absolute top-[75px]",children:e.jsx(H,{name:a[0].name,place:1})}),a[1]&&e.jsx("div",{className:" absolute top-[126px] left-[124px]",children:e.jsx(H,{name:a[1].name,place:2})}),a[2]&&e.jsx("div",{className:" absolute top-[149px] left-[380px]",children:e.jsx(H,{name:a[2].name,place:3})}),e.jsx("img",{src:"podium.png",alt:"",className:" h-[200px] mt-auto",color:"orange"})]}),e.jsxs("table",{className:`${n.length>3?"w-[960px]":"w-[700px]"}  mx-auto mt-8`,children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Place"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Name"}),n.map((m,c)=>e.jsxs("th",{className:"px-3 py-3 w-[12%] font-semibold text-sm",children:[c+1,"-",m.title]},c)),e.jsx("th",{className:"px-3 py-3 w-[12%] font-semibold",children:"Time"})]})}),e.jsx("tbody",{className:"text-white",children:a.map((m,c)=>e.jsxs("tr",{className:`${c%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-8 py-4 text-dark-yellow font-bold",children:c+1}),e.jsx("td",{className:"pl-3 py-4 font-bold",children:m.name}),m.progress.map((u,g)=>e.jsx("td",{className:"pl-3 py-4 text-center",children:u?e.jsx("span",{className:"text-dark-green-s",children:e.jsx(ae,{})}):e.jsx("div",{className:"text-dark-pink w-fit",children:e.jsx(Ge,{})})},g)),e.jsx("td",{className:"px-3 py-4 text-dark-gray-7",children:m.timeUsed?i(m.timeUsed):"-"})]},c))})]})]})})},ft=()=>{const t=$(),[a,s]=x.useState(),[n,r]=x.useState("Loading");return x.useEffect(()=>{const l=localStorage.getItem("userData");if(!l)t("/"),y.error("Sign In Time Out");else{const o=JSON.parse(l).access_token;fetch(Ye,{method:"GET",headers:{"content-type":"application/json",Authorization:`Bearer ${o}`}}).then(i=>i.json()).then(i=>{i.founded?(s(i.contestId),r(()=>i.state==="created"?"PlayersJoining":i.state==="started"?"GameWatching":i.state==="closed"?"GameResult":"GameCreating")):r("GameCreating")})}},[]),e.jsxs(e.Fragment,{children:[n==="GameCreating"||n==="Loading"?e.jsx(F,{}):e.jsx(ut,{gameId:a,currentState:n,setCurrentState:r}),e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[n==="GameCreating"&&e.jsx(mt,{setGameId:s,setCurrentState:r}),n==="PlayersJoining"&&a&&e.jsx(xt,{gameId:a}),n==="GameWatching"&&a&&e.jsx(pt,{gameId:a}),n==="GameResult"&&a&&e.jsx(ue,{gameId:a})]})]})},gt=({setCurrentState:t,setPlayer:a})=>{const[s,n]=x.useState(""),[r,l]=x.useState(""),o=()=>{if(s==="")return y.error("Name can not be empty");if(s.length>20)return y.error("Name too long");if(r==="")return y.error("Game id can not be empty");if(Number(r)>1e5||Number(r)<0)return y.error("Invalid game id");fetch(et,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:r,playerName:s})}).then(i=>i.status!==200?i.json().then(m=>{throw m}):i.json()).then(i=>{const m={id:i.playerId,gameId:Number(r),name:s};a(m),localStorage.setItem("playerData",JSON.stringify(m)),i.gameState==="created"?t("GameWaiting"):i.gameState==="started"?(y("ðŸ”¥ Game is started !"),t("GamePlaying")):y.error("Game is ended")}).catch(i=>{y.error(i.errors)})};return e.jsxs(P.div,{className:"flex flex-col items-center justify-center mx-auto mt-10 text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[e.jsx("h1",{className:"text-2xl text-center",children:"Join Game"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("div",{className:"text-lg",children:"Game Id"}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:r,onChange:i=>l(i.target.value.trim())})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg",children:"Name "}),e.jsx("input",{type:"text",className:"bg-dark-fill-2 py-1.5 px-2 rounded-lg outline-none mt-1 w-52 text-lg",value:s,onChange:i=>n(i.target.value.trim()),onKeyDownCapture:i=>{i.key==="Enter"&&o()}})]}),e.jsx("button",{onClick:o,className:"mt-8 bg-dark-green-s hover:bg-opacity-60 transition-all px-5 py-2 rounded-lg text-white font-semibold",children:"Join Game"})]})},jt=({player:t,setCurrentState:a})=>{const s=x.useRef(R(z)).current,[n,r]=x.useState([]),l=$();return x.useEffect(()=>{if(t)return fetch(ie,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{r(o.players)}),fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(o=>o.json()).then(o=>{o.problems.forEach(i=>{localStorage.removeItem(`code?problem_id=${i==null?void 0:i.id}&gameMode`)})}),s.emit("ws-player-joinGame",{gameId:t.gameId}),s.on("ws-host-playerJoinGame",function(o){r(i=>[...i,{id:o.id,name:o.name,gameId:t.gameId}])}),s.on("ws-host-playerExitGame",function(o){r(i=>i.filter(m=>m.id!=o.id))}),s.on("ws-player-hostTerminateGame",function(){y.info("Host terminated game"),localStorage.removeItem("playerData"),l("/")}),s.on("ws-player-hostStartGame",function(){y("ðŸ”¥ Game Started !"),a("GamePlaying")}),()=>{s.off("ws-host-playerExitGame"),s.off("ws-host-playerJoinGame"),s.off("ws-player-hostTerminateGame"),s.off("ws-player-hostStartGame")}},[s]),e.jsx(P.div,{className:"w-11/12 md:w-9/12 mx-auto text-dark-gray-8",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"mt-10",children:[e.jsx("h1",{className:"blink text-xl text-center text-dark-gray-7",children:"Game is about to start..."}),e.jsx("div",{className:"mt-16",children:e.jsx(he,{players:n})})]})})},yt=({player:t,currentState:a,setCurrentState:s})=>{const[n,r]=x.useState(),[l,o]=I(de),i=$(),m=()=>{(a==="GamePlaying"||a==="GameWaiting")&&t&&(fetch(st,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId,playerId:t.id})}),localStorage.removeItem("playerData")),localStorage.removeItem("playerData"),i("/")};return x.useEffect(()=>{if(a==="GamePlaying"&&t){const c=()=>{fetch(ce,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t.gameId})}).then(g=>g.json()).then(g=>{const p=g.endedAt-new Date().getTime();r(Math.floor(p/1e3))})};c();const u=setInterval(()=>{c()},6e4);return()=>clearInterval(u)}},[a,t]),x.useEffect(()=>{a==="GamePlaying"&&n&&n<=0&&s("GameResult")},[n,a]),e.jsx(P.nav,{className:"relative flex h-12 w-full shrink-0 items-center px-5 bg-dark-layer-1 text-dark-gray-7",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsx("div",{className:"flex-1 flex items-center text-white text-lg",children:e.jsx(M,{to:"/",className:" block w-[100px]",children:e.jsx("img",{src:"/logo-full.png",alt:"Logo",className:" w-full"})})}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative h-10 border-white flex-1 flex justify-center",children:[e.jsx("img",{src:`${T}&seed=${t.name}`,alt:"user",className:" h-full"}),e.jsx("div",{className:"flex items-center ml-2 text-lg text-dark-gray-8",children:t.name})]}),e.jsxs("div",{className:"flex items-center space-x-4 flex-1 justify-end",children:[a==="GamePlaying"&&e.jsxs("div",{className:"text-xl relative cursor-pointer flex h-9 w-9  justify-center items-center",title:`${l?"Turn off bullets":"Turn on bullets"}`,onClick:()=>{o(c=>!c)},children:[e.jsx("div",{className:`absolute text-dark-gray-6 text-3xl top-1/2 -translate-x-1/2 left-1/2 -translate-y-1/2
                            ${l?"opacity-0":"opacity-100"} transition-all`,children:e.jsx(Oe,{})}),e.jsx(Ee,{})]}),a==="GamePlaying"&&n&&e.jsx(pe,{timeLeft:n,setTimeLeft:r}),e.jsxs("button",{className:"flex items-center bg-dark-fill-3 py-1 px-3 cursor-pointer rounded text-dark-pink hover:bg-dark-fill-2 transition-all",onClick:m,children:[e.jsx("div",{className:"mr-2",children:"Exit"}),e.jsx(te,{})]})]})]})]})})},Nt=({player:t})=>{const a=x.useRef(R(z)).current,[s,n]=x.useState([]),r=["bg-sky-500","bg-pink-500","bg-yellow-500","bg-slate-500","bg-green-500","bg-purple-500"];x.useEffect(()=>(a.emit("ws-player-joinGame",{gameId:t.gameId}),a.on("ws-player-sendMessageToPlayer",function(o){(o.id===-1||o.id===t.id)&&(console.log("Host message",o.message),l(o.message))}),()=>{a.off("ws-player-sendMessageToPlayer")}),[a]);const l=o=>{const i=0+Math.random()*400,m=ne.uniqueId(),c=16+Math.floor(Math.random()*8),u=r[Math.floor(Math.random()*r.length)];n(g=>[...g,{message:o,height:i,id:m,duration:c,colorName:u}]),setTimeout(()=>{n(g=>g.filter(p=>p.id!==m))},c*1e3)};return e.jsx("div",{className:"bg-transparent h-[calc(100vh-48px)] w-full absolute overflow-hidden top-0 z-40 pointer-events-none",children:s.map(o=>e.jsxs("div",{className:"bullet",style:{top:o.height,animationDuration:`${o.duration}s`},children:[e.jsxs("div",{className:`bg-opacity-50 ${o.colorName} flex shrink-0 items-center py-0.5 pl-3 pr-2 rounded-l-3xl rounded-r-lg`,children:[e.jsx("img",{src:"./gameHost.png",alt:"GameHost",className:"h-7 mr-2"}),o.message]}),e.jsx("img",{src:"fire.gif",className:" rotate-90 h-8 opacity-90"})]},o.id))})},bt=({player:t,setCurrentState:a})=>{const[s,n]=x.useState([]),[r,l]=x.useState(0),[o,i]=x.useState(),[m,c]=x.useState([]),u=x.useRef(R(z)).current,g=re(de),[p,d]=x.useState(!0),h=()=>{c(j=>(j.sort((N,v)=>{const S=N.progress.reduce((O,L)=>L.passed?O+1:O,0),C=v.progress.reduce((O,L)=>L.passed?O+1:O,0);return S>C?-1:S<C?1:N.finishedAt&&v.finishedAt?new Date(N.finishedAt).getTime()-new Date(v.finishedAt).getTime():0}),[...j]))};x.useEffect(()=>(fetch(K,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{n(j.problems)}),u.emit("ws-player-joinGame",{gameId:t.gameId}),u.on("ws-player-hostCloseGame",function(){a("GameResult"),y.info("Host terminated game")}),u.on("ws-host-playerJoinGame",function(j){c(N=>[...N,{id:j.id,name:j.name,finishedAt:null,progress:s.map(v=>({id:v.id,passed:!1}))}])}),u.on("ws-host-updateProgress",function({playerId:j,progress:N,finishedAt:v}){c(S=>(S.forEach(C=>{C.id===j&&(C.progress=N,C.finishedAt=v)}),[...S])),h()}),()=>{u.off("ws-player-hostCloseGame"),u.off("ws-host-playerJoinGame"),u.off("ws-host-updateProgress")}),[u]),x.useEffect(()=>{s.length>0&&t&&fetch(oe,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({gameId:t==null?void 0:t.gameId})}).then(j=>j.json()).then(j=>{c([]),j.progress.forEach(N=>{N.id===t.id&&i({id:N.id,name:N.name,finishedAt:N.finishedAt,progress:N.progress?JSON.parse(N.progress):s.map(v=>({id:v.id,passed:!1}))}),c(v=>[...v,{id:N.id,name:N.name,finishedAt:N.finishedAt,progress:N.progress?JSON.parse(N.progress):s.map(S=>({id:S.id,passed:!1}))}])}),h()})},[s]);const f=(j,N,v,S,C,O)=>{u.emit("ws-player-updateCode",{gameId:j,playerId:N,playerName:v,problemId:S,problemTitle:C,code:O})},b=x.useCallback(ne.debounce(f,500),[]);return e.jsxs(P.div,{className:"relative flex w-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[g&&e.jsx(Nt,{player:t}),e.jsx("div",{className:`transform transition-all duration-500 ease-in-out flex items-center justify-center h-20 w-5
             absolute rounded-r-lg  bg-slate-700 hover:bg-slate-500 bg-opacity-80 cursor-pointer z-10 top-[50%] -translate-y-1/2
             left-[0px] ${p?"-translate-x-[50px]":"translate-x-0"}`,onClick:()=>d(!0),children:e.jsx(_,{className:"text-white rotate-90"})}),e.jsxs("div",{className:`text-dark-gray-8  shrink-0 bg-dark-layer-2 transition-all duration-500
        ${p?"translate-x-0 w-[260px]":"-translate-x-[100px] w-[0px]"}`,children:[e.jsxs("div",{className:" h-[40px] flex items-end border-dark-fill-2 px-3 relative",children:[e.jsx("h1",{className:"text-xl",children:"Rank"}),e.jsx("div",{className:`ml-1 transform transition-all duration-450 ease-in-out flex items-center justify-center h-9 w-9
             absolute rounded-lg bg-dark-fill-3 hover:bg-dark-fill-2 cursor-pointer z-10 top-[8px]
             right-[8px]`,onClick:()=>d(!1),children:e.jsx(_,{className:"text-white -rotate-90"})})]}),e.jsx("div",{className:"h-[calc(100vh-96px)] overflow-y-auto overflow-hidden rounded-b-lg",children:m.map((j,N)=>{const v=j.progress.length,S=j.progress.reduce((C,O)=>O.passed?C+1:C,0);return e.jsxs("div",{className:"w-full h-[56px] flex items-center px-[12px] mt-[8px]",children:[e.jsx("div",{className:`text-xl font-semibold ${j.id===t.id?"text-dark-pink":"text-dark-yellow"}`,children:N+1}),e.jsx("div",{className:"h-11 w-11 bg-dark-fill-2 rounded-full flex justify-center items-center overflow-hidden ml-3",children:e.jsx("img",{src:`${T}&seed=${j.name}`,alt:"avatar",className:"h-11"})}),e.jsx("div",{className:`text-lg ml-3 ${j.id===t.id?"font-semibold":"font-normal"}`,children:j.name}),e.jsxs("div",{className:" ml-auto text-lg",children:[S,"/",v]})]},N)})})]}),e.jsx("div",{className:"w-full",children:s.length>0&&o&&e.jsxs(Y,{minSize:0,snapOffset:100,className:"split",children:[e.jsxs("div",{className:"bg-dark-layer-1",children:[e.jsx("div",{className:"flex h-10 w-full items-end bg-dark-layer-2 text-white overflow-x-auto no-scrollbar",children:s.map((j,N)=>e.jsxs("div",{className:`flex items-center rounded-t-[5px] px-4 py-[7px] text-sm cursor-pointer ${N===r?"bg-dark-layer-1":"bg-dark-layer-2"}`,onClick:()=>l(N),children:[o&&o.progress.map((v,S)=>e.jsx("span",{className:`text-dark-green-s mr-1 ml-[-8px] ${v.id===j.id&&v.passed?"block":"hidden"}`,children:e.jsx(se,{})},S)),e.jsxs("span",{className:"  whitespace-nowrap",children:["Prob ",N+1]})]},N))}),e.jsx(xe,{problem:s[r]})]}),e.jsx(me,{problem:s[r],gameMode:!0,gameData:{player:t,myProgress:o,setMyProgress:i,updateCode:b}})]})})]})},vt=()=>{const[t,a]=I(B),[s,n]=x.useState("GameJoining"),[r,l]=x.useState();return x.useEffect(()=>{a(!0);const o=localStorage.getItem("playerData");if(!o)n("GameJoining"),a(!1);else{const i=JSON.parse(o);fetch(tt,{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({playerId:i.id,contestId:i.gameId})}).then(m=>m.json()).then(m=>{l(i),a(!1),m.founded?n(()=>m.state==="created"?"GameWaiting":m.state==="started"?"GamePlaying":m.state==="closed"?"GameResult":"GameJoining"):(localStorage.removeItem("playerData"),n("GameJoining"))})}},[]),e.jsxs(e.Fragment,{children:[s==="GameJoining"?e.jsx(F,{}):e.jsx(yt,{player:r,currentState:s,setCurrentState:n}),e.jsx(P.div,{className:`text-dark-gray-8 ${t&&"opacity-0"} h-[calc(100vh-48px)] overflow-y-auto transition-all`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"h-[calc(100vh-48px)] overflow-y-auto",children:[s==="GameJoining"&&e.jsx(gt,{setCurrentState:n,setPlayer:l}),s==="GameWaiting"&&r&&e.jsx(jt,{setCurrentState:n,player:r}),s==="GamePlaying"&&r&&e.jsx(bt,{setCurrentState:n,player:r}),s==="GameResult"&&r&&e.jsx(ue,{gameId:r.gameId})]})})]})},wt=()=>{const[t,a]=I(B),[s,n]=x.useState({isOpen:!1,videoId:""}),[r,l]=x.useState([]),[o,i]=x.useState(JSON.parse(localStorage.getItem("problemStatus")||"{}"));x.useEffect(()=>{a(!0),fetch(le,{method:"GET"}).then(c=>c.json()).then(c=>{l(c),a(!1)})},[]);const m=()=>{n({isOpen:!1,videoId:""})};return e.jsx(e.Fragment,{children:!t&&e.jsx(P.div,{className:"relative overflow-x-auto mx-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:r.length>0&&e.jsxs("table",{className:"w-full mx-auto",children:[e.jsx("thead",{className:" text-gray-300 border-b text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Status"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Title"}),e.jsx("th",{className:"px-3 py-3 w-[30%] font-semibold",children:"Category"}),e.jsx("th",{className:"px-3 py-3 w-[15%] font-semibold",children:"Difficulty"}),e.jsx("th",{className:"px-3 py-3 w-[10%] font-semibold",children:"Solution"})]})}),e.jsx("tbody",{className:"text-white",children:r!==void 0&&r.map((c,u)=>{const g=c.difficulty==="Easy"?"text-dark-green-s":c.difficulty==="Medium"?"text-dark-yellow":"text-dark-pink";return e.jsxs("tr",{className:`${u%2===1?"bg-dark-layer-1":""}`,children:[e.jsx("td",{className:"pl-4 py-4 whitespace-nowrap text-dark-green-s",children:e.jsx("div",{className:" cursor-pointer h-6",onClick:()=>{i(p=>(p[c.id]=!p[c.id],localStorage.setItem("problemStatus",JSON.stringify(p)),{...p}))},children:o[c.id]&&e.jsx(ae,{width:"18"})})}),e.jsx("td",{className:"px-3 py-4",children:e.jsx(M,{className:"hover:text-blue-600",to:`/problem?id=${c.id}`,children:c.title})}),e.jsx("td",{className:"px-2",children:e.jsx("div",{className:"flex",children:c.tags.map(p=>e.jsx("div",{className:"mr-3 bg-dark-fill-2 px-2 py-[2px] rounded-lg ",children:p.title},p.id))})}),e.jsx("td",{className:`px-3 py-4 ${g}`,children:c.difficulty}),e.jsx("td",{className:"px-3 py-4",children:c.solutionVideo?e.jsx(Te,{fontSize:"28",className:"cursor-pointer hover:text-red-600",onClick:()=>n({isOpen:!0,videoId:c.solutionVideo})}):e.jsx("p",{className:"text-gray-400",children:"Coming soon"})})]},u)})}),s.isOpen&&e.jsxs("tfoot",{className:"fixed top-0 left-0 h-screen w-screen flex items-center justify-center",children:[e.jsx("div",{className:"bg-black z-10 opacity-70 top-0 left-0 w-screen h-screen absolute",onClick:m}),e.jsx("div",{className:"w-full z-50 h-full px-6 relative max-w-4xl",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center relative",children:e.jsxs("div",{className:"w-full relative",children:[e.jsx(D,{fontSize:"35",className:"cursor-pointer absolute -top-16 right-0 text-dark-gray-8",onClick:m}),e.jsx(ze,{videoId:s.videoId,loading:"lazy",iframeClassName:"w-full min-h-[500px]"})]})})})]})]})})})},ee=()=>{const t=re(A),a=$(),s=()=>{t.isLogin?a("/gameHost"):y.error("Please Sign In")};return e.jsxs("div",{children:[e.jsx(F,{}),e.jsx(P.div,{className:"block h-[calc(100vh-48px)] overflow-y-auto",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsxs("div",{className:"w-11/12 md:w-9/12 mx-auto pt-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1",children:"Let's Code!"}),e.jsxs("div",{className:" flex mt-5",children:[e.jsx("button",{onClick:s,children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105 flex items-end justify-center",children:[e.jsx("img",{src:"createGame.svg",className:"h-24 object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Create Game"})]})}),e.jsx(M,{to:"gamePlayer",className:" ml-8",children:e.jsxs("div",{className:"h-32 w-48 rounded-xl text-white relative bg-dark-fill-3 transition-all hover:bg-dark-fill-2 hover:scale-105",children:[e.jsx("img",{src:"joinGame.svg",className:"h-full w-full object-contain"}),e.jsx("div",{className:"absolute top-[20%] left-[50%] translate-x-[-50%] translate-y-[-50%] whitespace-pre text-xl opacity-70",children:"Join Game"})]})})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h1",{className:"text-xl text-left text-gray-200 ml-1 mt-5",children:"Problems"}),e.jsx(wt,{})]})]})})]})};function fe(t){return String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}const kt=()=>{const t=W(A),[a,s]=x.useState(""),[n,r]=x.useState(""),[l,o]=x.useState(!1),i=m=>{if(!l){if(m.preventDefault(),a.trim()==="")return y.error("Email can not be empty");if(!fe(a))return y.error("Please enter a valid email");if(n.trim()==="")return y.error("Password can not be empty");if(a.length>30)return y.error("Email too long");if(n.length>30)return y.error("Password too long");o(!0),fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"native",email:a,password:n})}).then(c=>c.json()).then(c=>{c.errors?y.error(c.errors):(y.success("Sign In Successfully"),localStorage.setItem("userData",JSON.stringify(c.data)),s(""),r(""),t(u=>({...u,isOpen:!1,isLogin:!0})))}).catch(c=>{console.error(c)}).finally(()=>{o(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign In"}),e.jsxs("form",{onSubmit:i,children:[e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:a,name:"email",onChange:m=>{s(m.target.value.trim())},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:" mt-4",children:[e.jsx("label",{className:"block mb-2 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:n,name:"password",onChange:m=>{r(m.target.value.trim())},className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
                     w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{disabled:l,className:"w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s mt-6 disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-5",children:["Not Registered?",e.jsx("button",{onClick:()=>{t(m=>({...m,type:"register"}))},className:"text-blue-400 hover:underline ml-3",children:"Create Account"})]})]})},St=()=>{const t=W(A),[a,s]=x.useState(""),[n,r]=x.useState(""),[l,o]=x.useState(""),[i,m]=x.useState(""),[c,u]=x.useState(!1),g=p=>{if(!c){if(p.preventDefault(),a==="")return y.error("Name can not be empty");if(n==="")return y.error("Email can not be empty");if(l==="")return y.error("Password can not be empty");if(a.length>30)return y.error("UserName too long");if(n.length>30)return y.error("Email too long");if(l.length>30)return y.error("Password too long");if(!fe(n))return y.error("Please enter a valid email");if(i!==l)return y.error("Passwords are not matched");u(!0),fetch(We,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:n,password:l})}).then(d=>d.json()).then(d=>{d.errors?y.error(d.errors):(y.success("Sign Up Successfully"),localStorage.setItem("userData",JSON.stringify(d.data)),s(""),r(""),o(""),m(""),t(h=>({...h,isOpen:!1,isLogin:!0})))}).catch(d=>{y.error(d.errors)}).finally(()=>{u(!1)})}};return e.jsxs("div",{className:"px-8 pb-4 flex flex-col bg-gradient-to-b from-brand-orange-s to-dark-layer-1 pt-10 w-[340px]",children:[e.jsx("h3",{className:"text-2xl font-medium block mb-2 text-white",children:"Sign Up"}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Name"}),e.jsx("input",{type:"name",value:a,onChange:p=>s(p.target.value.trim()),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Email"}),e.jsx("input",{type:"text",value:n,onChange:p=>r(p.target.value.trim()),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"name@email.com"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Your Password"}),e.jsx("input",{type:"password",value:l,onChange:p=>o(p.target.value.trim()),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block mb-1 text-dark-gray-8",children:"Confirm Password"}),e.jsx("input",{type:"password",value:i,onChange:p=>m(p.target.value.trim()),className:`outline-none sm:text-sm rounded-lg p-2.5 bg-dark-layer-1
          w-full placeholder-gray-400 text-white`,placeholder:"******"})]}),e.jsx("button",{disabled:c,className:" mt-5 w-full text-white rounded-lg px-5 py-2.5 bg-brand-orange hover:bg-brand-orange-s disabled:opacity-60",type:"submit",children:"Submit"})]}),e.jsxs("div",{className:" text-sm text-dark-gray-8 mt-3",children:["Already have an account",e.jsx("button",{className:"text-blue-300 hover:underline ml-3",onClick:()=>{t(p=>({...p,type:"login"}))},children:"Sign In"})]})]})},Ct=()=>{const[t,a]=x.useState(""),s=W(A),[n,r]=x.useState(),l=$(),o=i=>{s(m=>({...m,isOpen:!1})),l(`/problem?id=${i}`)};return x.useEffect(()=>{const i=localStorage.getItem("userData");if(i){const m=JSON.parse(i);a(m.user.name);const c=m.access_token;fetch(Ze,{method:"POST",headers:{"content-type":"application/json",Authorization:`Bearer ${c}`}}).then(u=>u.json()).then(u=>{r(u)})}else y.error("Login timeout"),s(m=>({...m,isOpen:!1,isLogin:!1}))},[]),e.jsxs("div",{className:" w-[800px] h-[560px] bg-dark-layer-1 px-10",children:[e.jsxs("div",{className:" h-[100px] mt-[20px] px-3 text-white font-semibold text-2xl flex items-center tracking-wide",children:[e.jsxs("span",{className:" text-dark-yellow mr-[10px]",children:[t,"'s"]}),"Host History"]}),e.jsxs("div",{className:"h-[420px] overflow-y-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"text-dark-gray-8 text-left border-b-[1px] h-[60px]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-2 w-[10%]",children:"GameId"}),e.jsx("th",{className:"py-3 px-2 w-[25%]",children:"Problems"}),e.jsx("th",{className:"py-3 px-2 w-[30%]",children:"Players"}),e.jsx("th",{className:"py-3 px-2 w-[15%] text-center",children:"Time"})]})}),e.jsx("tbody",{className:"text-dark-gray-8 ",children:n&&n.length>0&&n.map((i,m)=>e.jsxs("tr",{className:`${m%2===1?"bg-dark-fill-3":""}`,children:[e.jsx("td",{className:"py-3 px-3",children:i.contestId}),e.jsx("td",{className:"py-3 px-2",children:i.problems.map((c,u)=>e.jsx("div",{className:"font-semibold leading-7 hover:text-blue-500 transition-all cursor-pointer",onClick:()=>o(c.id),children:c.title},u))}),e.jsx("td",{className:"py-4 px-2 flex flex-wrap",children:i.players.map((c,u)=>e.jsxs("div",{className:"mr-[12px] mb-1 flex items-center",children:[e.jsx("img",{src:`${T}&seed=${c.name}`,className:"h-[25px] mr-[4px]"}),c.name]},u))}),e.jsxs("td",{className:"py-3 text-center text-dark-gray-7",children:[e.jsx("div",{children:new Date(i.startedAt).toLocaleDateString()}),e.jsx("div",{children:new Date(i.startedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},m))})]}),n&&n.length===0&&e.jsx("div",{className:"h-[300px] w-full items-center justify-center flex text-xl tracking-wide text-dark-gray-7",children:"You have no host history"})]})]})},Pt=()=>{const[t,a]=I(A),s=()=>{a(n=>({...n,isOpen:!1}))};return e.jsxs("div",{children:[e.jsx("div",{className:`z-40 absolute top-0 w-full h-full flex items-center justify-center bg-black transition-all duration-500 ${t.isOpen?" opacity-50 ":"pointer-events-none opacity-0"}`,onClick:s}),e.jsxs("div",{className:`w-fit absolute left-[50%] translate-y-[-50%] translate-x-[-50%] flex justify-center z-50 rounded-lg overflow-hidden
        transition-all duration-500 ${t.isOpen?"top-[50%] opacity-100":"top-[-60%] opacity-0"} `,children:[e.jsx("button",{className:"absolute bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center text-white right-[5px] top-[5px]",children:e.jsx(D,{className:"h-6 w-6",onClick:s})}),t.type==="register"&&e.jsx(St,{}),t.type==="login"&&e.jsx(kt,{}),t.type==="profile"&&e.jsx(Ct,{})]})]})};function Gt(){return e.jsx(be,{children:e.jsxs("div",{className:"bg-dark-layer-2 min-h-screen relative",children:[e.jsx($e,{position:"top-center",autoClose:2500,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),e.jsx(Pt,{}),e.jsxs(Me,{children:[e.jsx(J,{path:"/",element:e.jsx(ee,{})}),e.jsx(J,{path:"problem",element:e.jsx(dt,{})}),e.jsx(J,{path:"gameHost",element:e.jsx(ft,{})}),e.jsx(J,{path:"gamePlayer",element:e.jsx(vt,{})}),e.jsx(J,{path:"*",element:e.jsx(ee,{})})]})]})})}ye.createRoot(document.getElementById("root")).render(e.jsx(Ie,{children:e.jsx(Gt,{})}));
